{"version":3,"file":"map-home-BSNm7dy1.js","sources":["../../src/pages/map-home.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Menu, MapPin, Search, Navigation, Fuel } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport logo from \"../assets/images/logo.png\";\n\ninterface LocationData {\n  latitude: number;\n  longitude: number;\n  address: string;\n  isAutomatic: boolean;\n}\n\nexport default function MapHome() {\n  const [, setLocation] = useLocation();\n  const { user } = useAuth();\n  const [currentLocation, setCurrentLocation] = useState<LocationData | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  useEffect(() => {\n    // Check if location was set during onboarding\n    const savedLocation = localStorage.getItem(\"userLocation\");\n    if (savedLocation) {\n      setCurrentLocation(JSON.parse(savedLocation));\n    } else {\n      // If no location set, redirect to location setup\n      setLocation(\"/location-setup\");\n    }\n  }, [setLocation]);\n\n  const handleLocationUpdate = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const locationData: LocationData = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            address: \"Current Location\", // Would be reverse geocoded in real app\n            isAutomatic: true\n          };\n          setCurrentLocation(locationData);\n          localStorage.setItem(\"userLocation\", JSON.stringify(locationData));\n        },\n        (error) => {\n          console.error(\"Error getting location:\", error);\n        }\n      );\n    }\n  };\n\n  const handleSearch = () => {\n    if (searchQuery.trim()) {\n      setLocation(`/search-results?q=${encodeURIComponent(searchQuery)}`);\n    }\n  };\n\n  const handleOrderFuel = () => {\n    setLocation(\"/fuel-ordering\");\n  };\n\n  const openSideMenu = () => {\n    setIsMenuOpen(true);\n    setLocation(\"/side-menu\");\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 relative\">\n      {/* Map Background Simulation */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-100 to-green-100\">\n        {/* Simulated map with grid pattern */}\n        <div className=\"absolute inset-0 opacity-20\">\n          <div className=\"grid grid-cols-8 grid-rows-12 h-full w-full\">\n            {Array.from({ length: 96 }).map((_, i) => (\n              <div key={i} className=\"border border-gray-300\"></div>\n            ))}\n          </div>\n        </div>\n        \n        {/* Map pins simulation */}\n        <div className=\"absolute top-1/4 left-1/3 w-4 h-4 bg-red-500 rounded-full animate-pulse\"></div>\n        <div className=\"absolute top-1/2 right-1/4 w-4 h-4 bg-red-500 rounded-full animate-pulse\"></div>\n        <div className=\"absolute bottom-1/3 left-1/4 w-4 h-4 bg-red-500 rounded-full animate-pulse\"></div>\n        \n        {/* User location pin */}\n        {currentLocation && (\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\">\n            <div className=\"w-6 h-6 bg-[#4682b4] rounded-full border-4 border-white shadow-lg\">\n              <div className=\"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"></div>\n            </div>\n            <div className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-black/75 text-white text-xs px-2 py-1 rounded whitespace-nowrap\">\n              Your Location\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Top Navigation Bar */}\n      <div className=\"relative z-10 bg-white/95 backdrop-blur-sm shadow-sm\">\n        <div className=\"flex items-center justify-between p-4\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={openSideMenu}\n            className=\"text-[#131313]\"\n          >\n            <Menu className=\"w-6 h-6\" />\n          </Button>\n          \n          <div className=\"flex items-center space-x-2\">\n            <img src={logo} alt=\"Brillprime\" className=\"w-8 h-8\" />\n            <span className=\"font-semibold text-[#131313]\">Brillprime</span>\n          </div>\n          \n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={handleLocationUpdate}\n            className=\"text-[#4682b4]\"\n          >\n            <Navigation className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        {/* Current Location Display */}\n        {currentLocation && (\n          <div className=\"px-4 pb-3\">\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n              <MapPin className=\"w-4 h-4 text-[#4682b4]\" />\n              <span className=\"truncate\">{currentLocation.address}</span>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setLocation(\"/location-setup\")}\n                className=\"text-[#4682b4] hover:text-[#0b1a51] text-xs\"\n              >\n                Change\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"relative z-10 p-4\">\n        <Card className=\"shadow-lg\">\n          <CardContent className=\"p-3\">\n            <div className=\"flex space-x-2\">\n              <div className=\"flex-1 relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <Input\n                  placeholder=\"Search for fuel stations, locations...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n                  className=\"pl-10 border-[#4682b4]/30 focus:border-[#4682b4]\"\n                />\n              </div>\n              <Button\n                onClick={handleSearch}\n                className=\"bg-[#4682b4] hover:bg-[#0b1a51]\"\n              >\n                <Search className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"relative z-10 px-4 mb-4\">\n        <div className=\"grid grid-cols-2 gap-3\">\n          <Button\n            onClick={handleOrderFuel}\n            className=\"h-16 bg-[#4682b4] hover:bg-[#0b1a51] text-white rounded-xl shadow-lg\"\n          >\n            <div className=\"flex items-center space-x-3\">\n              <Fuel className=\"w-6 h-6\" />\n              <div className=\"text-left\">\n                <div className=\"font-semibold\">Order Fuel</div>\n                <div className=\"text-xs opacity-90\">Fast delivery</div>\n              </div>\n            </div>\n          </Button>\n          \n          <Button\n            variant=\"outline\"\n            onClick={() => setLocation(\"/qr-scanner\")}\n            className=\"h-16 border-[#4682b4] text-[#4682b4] hover:bg-[#4682b4]/10 rounded-xl shadow-lg\"\n          >\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-6 h-6 border-2 border-current rounded\"></div>\n              <div className=\"text-left\">\n                <div className=\"font-semibold\">Scan QR</div>\n                <div className=\"text-xs opacity-75\">Quick pay</div>\n              </div>\n            </div>\n          </Button>\n        </div>\n      </div>\n\n      {/* User Info Card */}\n      <div className=\"relative z-10 px-4\">\n        <Card className=\"bg-white/95 backdrop-blur-sm shadow-lg\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"font-semibold text-[#131313]\">\n                  Welcome, {user?.fullName?.split(' ')[0] || 'User'}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {currentLocation?.isAutomatic ? \"Location set automatically\" : \"Location set manually\"}\n                </p>\n              </div>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setLocation(\"/consumer-home\")}\n                className=\"border-[#4682b4] text-[#4682b4] hover:bg-[#4682b4]/10\"\n              >\n                Dashboard\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Floating Action Button for Emergency */}\n      <div className=\"fixed bottom-6 right-6 z-20\">\n        <Button\n          onClick={() => setLocation(\"/emergency-fuel\")}\n          className=\"w-14 h-14 rounded-full bg-red-500 hover:bg-red-600 shadow-xl\"\n        >\n          <Fuel className=\"w-6 h-6 text-white\" />\n        </Button>\n      </div>\n\n      {/* Location Permission Prompt */}\n      {!currentLocation && (\n        <div className=\"fixed bottom-0 left-0 right-0 z-30 bg-white p-4 border-t shadow-lg\">\n          <div className=\"text-center\">\n            <h4 className=\"font-semibold text-[#131313] mb-2\">Enable Location Access</h4>\n            <p className=\"text-sm text-gray-600 mb-4\">\n              We need your location to find nearby fuel stations\n            </p>\n            <div className=\"flex space-x-3\">\n              <Button\n                onClick={handleLocationUpdate}\n                className=\"flex-1 bg-[#4682b4] hover:bg-[#0b1a51]\"\n              >\n                Enable Location\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => setLocation(\"/location-setup\")}\n                className=\"flex-1 border-[#4682b4] text-[#4682b4]\"\n              >\n                Set Manually\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":["MapHome","setLocation","useLocation","user","useAuth","currentLocation","setCurrentLocation","useState","searchQuery","setSearchQuery","isMenuOpen","setIsMenuOpen","useEffect","savedLocation","handleLocationUpdate","position","locationData","error","handleSearch","handleOrderFuel","openSideMenu","jsxs","jsx","_","i","Button","Menu","logo","Navigation","MapPin","Card","CardContent","Search","Input","e","Fuel","_a"],"mappings":"8LAgBA,SAAwBA,GAAU,OAChC,KAAM,CAAA,CAAGC,CAAW,EAAIC,EAAA,EAClB,CAAE,KAAAC,CAAA,EAASC,EAAA,EACX,CAACC,EAAiBC,CAAkB,EAAIC,EAAAA,SAA8B,IAAI,EAC1E,CAACC,EAAaC,CAAc,EAAIF,EAAAA,SAAS,EAAE,EAC3C,CAACG,EAAYC,CAAa,EAAIJ,EAAAA,SAAS,EAAK,EAElDK,EAAAA,UAAU,IAAM,CAEd,MAAMC,EAAgB,aAAa,QAAQ,cAAc,EACrDA,EACFP,EAAmB,KAAK,MAAMO,CAAa,CAAC,EAG5CZ,EAAY,iBAAiB,CAEjC,EAAG,CAACA,CAAW,CAAC,EAEhB,MAAMa,EAAuB,IAAM,CAC7B,UAAU,aACZ,UAAU,YAAY,mBACnBC,GAAa,CACZ,MAAMC,EAA6B,CACjC,SAAUD,EAAS,OAAO,SAC1B,UAAWA,EAAS,OAAO,UAC3B,QAAS,mBACT,YAAa,EAAA,EAEfT,EAAmBU,CAAY,EAC/B,aAAa,QAAQ,eAAgB,KAAK,UAAUA,CAAY,CAAC,CACnE,EACCC,GAAU,CACT,QAAQ,MAAM,0BAA2BA,CAAK,CAChD,CAAA,CAGN,EAEMC,EAAe,IAAM,CACrBV,EAAY,QACdP,EAAY,qBAAqB,mBAAmBO,CAAW,CAAC,EAAE,CAEtE,EAEMW,EAAkB,IAAM,CAC5BlB,EAAY,gBAAgB,CAC9B,EAEMmB,EAAe,IAAM,CACzBT,EAAc,EAAI,EAClBV,EAAY,YAAY,CAC1B,EAEA,OACEoB,EAAAA,KAAC,MAAA,CAAI,UAAU,mCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gEAEb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,8CACZ,SAAA,MAAM,KAAK,CAAE,OAAQ,EAAA,CAAI,EAAE,IAAI,CAACC,EAAGC,IAClCF,EAAAA,IAAC,MAAA,CAAY,UAAU,wBAAA,EAAbE,CAAsC,CACjD,CAAA,CACH,CAAA,CACF,EAGAF,EAAAA,IAAC,MAAA,CAAI,UAAU,yEAAA,CAA0E,EACzFA,EAAAA,IAAC,MAAA,CAAI,UAAU,0EAAA,CAA2E,EAC1FA,EAAAA,IAAC,MAAA,CAAI,UAAU,4EAAA,CAA6E,EAG3FjB,GACCgB,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAAC,MAAA,CAAI,UAAU,sGAAsG,CAAA,CACvH,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,4HAA4H,SAAA,eAAA,CAE3I,CAAA,CAAA,CACF,CAAA,EAEJ,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACG,EAAA,CACC,QAAQ,QACR,KAAK,OACL,QAASL,EACT,UAAU,iBAEV,SAAAE,EAAAA,IAACI,EAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,EAG5BL,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,OAAI,IAAKK,EAAM,IAAI,aAAa,UAAU,UAAU,EACrDL,EAAAA,IAAC,OAAA,CAAK,UAAU,+BAA+B,SAAA,YAAA,CAAU,CAAA,EAC3D,EAEAA,EAAAA,IAACG,EAAA,CACC,QAAQ,QACR,KAAK,OACL,QAASX,EACT,UAAU,iBAEV,SAAAQ,EAAAA,IAACM,EAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAAA,CAClC,EACF,EAGCvB,SACE,MAAA,CAAI,UAAU,YACb,SAAAgB,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAO,UAAU,wBAAA,CAAyB,EAC3CP,EAAAA,IAAC,OAAA,CAAK,UAAU,WAAY,WAAgB,QAAQ,EACpDA,EAAAA,IAACG,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IAAMxB,EAAY,iBAAiB,EAC5C,UAAU,8CACX,SAAA,QAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,EAGAqB,MAAC,MAAA,CAAI,UAAU,oBACb,eAACQ,EAAA,CAAK,UAAU,YACd,SAAAR,EAAAA,IAACS,GAAY,UAAU,MACrB,SAAAV,OAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAACU,EAAA,CAAO,UAAU,0EAAA,CAA2E,EAC7FV,EAAAA,IAACW,EAAA,CACC,YAAY,yCACZ,MAAOzB,EACP,SAAW0B,GAAMzB,EAAeyB,EAAE,OAAO,KAAK,EAC9C,WAAaA,GAAMA,EAAE,MAAQ,SAAWhB,EAAA,EACxC,UAAU,kDAAA,CAAA,CACZ,EACF,EACAI,EAAAA,IAACG,EAAA,CACC,QAASP,EACT,UAAU,kCAEV,SAAAI,EAAAA,IAACU,EAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,EACF,CAAA,CACF,EACF,EACF,QAGC,MAAA,CAAI,UAAU,0BACb,SAAAX,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAACG,EAAA,CACC,QAASN,EACT,UAAU,uEAEV,SAAAE,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACa,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1Bd,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,aAAU,EACzCA,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAqB,SAAA,eAAA,CAAa,CAAA,CAAA,CACnD,CAAA,CAAA,CACF,CAAA,CAAA,EAGFA,EAAAA,IAACG,EAAA,CACC,QAAQ,UACR,QAAS,IAAMxB,EAAY,aAAa,EACxC,UAAU,kFAEV,SAAAoB,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,UAAO,EACtCA,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAqB,SAAA,WAAA,CAAS,CAAA,CAAA,CAC/C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,EAGAA,MAAC,MAAA,CAAI,UAAU,qBACb,eAACQ,EAAA,CAAK,UAAU,yCACd,SAAAR,EAAAA,IAACS,GAAY,UAAU,MACrB,SAAAV,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,CAAA,cACjCe,EAAAjC,GAAA,YAAAA,EAAM,WAAN,YAAAiC,EAAgB,MAAM,KAAK,KAAM,MAAA,EAC7C,QACC,IAAA,CAAE,UAAU,wBACV,SAAA/B,GAAA,MAAAA,EAAiB,YAAc,6BAA+B,uBAAA,CACjE,CAAA,EACF,EACAiB,EAAAA,IAACG,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMxB,EAAY,gBAAgB,EAC3C,UAAU,wDACX,SAAA,WAAA,CAAA,CAED,EACF,CAAA,CACF,EACF,EACF,EAGAqB,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACb,SAAAA,EAAAA,IAACG,EAAA,CACC,QAAS,IAAMxB,EAAY,iBAAiB,EAC5C,UAAU,+DAEV,SAAAqB,EAAAA,IAACa,EAAA,CAAK,UAAU,oBAAA,CAAqB,CAAA,CAAA,EAEzC,EAGC,CAAC9B,GACAiB,EAAAA,IAAC,MAAA,CAAI,UAAU,qEACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,yBAAsB,EACxEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,qDAE1C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAACG,EAAA,CACC,QAASX,EACT,UAAU,yCACX,SAAA,iBAAA,CAAA,EAGDQ,EAAAA,IAACG,EAAA,CACC,QAAQ,UACR,QAAS,IAAMxB,EAAY,iBAAiB,EAC5C,UAAU,yCACX,SAAA,cAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,CAEJ"}