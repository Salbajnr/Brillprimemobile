import{a as O,a8 as B,r,j as e,g as I,aM as U,m as j,s as v,t as N,F as k,n as g,I as A,B as b,Q as L,L as F,C as Y,a3 as G}from"./index-CPIh2kaR.js";import{L as y}from"./label-HdyYSJzW.js";import{U as $}from"./upload-NXx3Rohn.js";import{F as V}from"./fingerprint-CYdAdfGH.js";import{S as J}from"./star-DIqyJTa_.js";const a={PRIMARY:"#4682b4",SECONDARY:"#131313",SUCCESS:"#10b981",WARNING:"#f59e0b",ERROR:"#ef4444"};function K(){const{user:W}=O(),{toast:n}=B(),[t,P]=r.useState(null),[o,d]=r.useState(!1),[c,S]=r.useState(null),[m,C]=r.useState(""),[u,R]=r.useState(""),[h,w]=r.useState(""),[x,E]=r.useState("");r.useEffect(()=>{p()},[]);const p=async()=>{try{const s=await fetch("/api/verification-enhanced/status",{credentials:"include"});if(s.ok){const i=await s.json();P(i.verification)}}catch(s){console.error("Failed to fetch verification status:",s)}},T=async()=>{if(!c||!m||!u){n({title:"Missing Information",description:"Please select a file, document type, and number",variant:"destructive"});return}d(!0);const s=new FormData;s.append("document",c),s.append("documentType",m),s.append("documentNumber",u),h&&s.append("expiryDate",h);try{const l=await(await fetch("/api/verification-enhanced/documents/upload",{method:"POST",credentials:"include",body:s})).json();if(l.success)n({title:"Document Uploaded",description:`Document uploaded with ${Math.round(l.document.validationScore*100)}% confidence`,variant:"default"}),S(null),C(""),R(""),w(""),p();else throw new Error(l.message)}catch(i){n({title:"Upload Failed",description:i.message||"Failed to upload document",variant:"destructive"})}finally{d(!1)}},D=async s=>{if(!x){E(btoa(Math.random().toString())),n({title:"Biometric Captured",description:"Biometric data captured successfully",variant:"default"});return}d(!0);try{const l=await(await fetch("/api/verification-enhanced/biometric/verify",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({biometricType:s,biometricData:x,deviceInfo:{deviceId:navigator.userAgent,platform:navigator.platform,version:"1.0.0"}})})).json();if(l.success)n({title:"Biometric Verified",description:`${s} verification completed successfully`,variant:"default"}),E(""),p();else throw new Error(l.message)}catch(i){n({title:"Verification Failed",description:i.message||"Biometric verification failed",variant:"destructive"})}finally{d(!1)}},f=s=>{switch(s){case"PREMIUM":return a.SUCCESS;case"STANDARD":return a.PRIMARY;case"BASIC":return a.WARNING;default:return a.ERROR}},M=s=>{switch(s){case"PREMIUM":return e.jsx(J,{className:"h-5 w-5"});case"STANDARD":return e.jsx(G,{className:"h-5 w-5"});case"BASIC":return e.jsx(Y,{className:"h-5 w-5"});default:return e.jsx(F,{className:"h-5 w-5"})}};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",style:{color:a.SECONDARY},children:"Enhanced Verification"}),e.jsx("p",{className:"text-gray-600",children:"Complete advanced verification for maximum security and benefits"}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs(I,{className:"px-4 py-2 text-sm font-medium flex items-center",style:{backgroundColor:`${f(t.overall.level)}20`,color:f(t.overall.level),border:`1px solid ${f(t.overall.level)}40`},children:[M(t.overall.level),e.jsxs("span",{className:"ml-2",children:[t.overall.level," Level"]})]})}),e.jsxs("div",{className:"mt-6 max-w-md mx-auto",children:[e.jsx(U,{value:t.overall.progress,className:"h-3"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[Math.round(t.overall.progress),"% Complete"]})]})]}),e.jsxs(j,{className:"mb-8",children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center",style:{color:a.SECONDARY},children:[e.jsx(k,{className:"h-6 w-6 mr-3"}),"Document Verification"]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"documentType",children:"Document Type"}),e.jsxs("select",{id:"documentType",value:m,onChange:s=>C(s.target.value),className:"w-full p-3 border rounded-xl",children:[e.jsx("option",{value:"",children:"Select Document"}),e.jsx("option",{value:"LICENSE",children:"Driver's License"}),e.jsx("option",{value:"NIN",children:"National ID (NIN)"}),e.jsx("option",{value:"PASSPORT",children:"International Passport"}),e.jsx("option",{value:"VEHICLE_REGISTRATION",children:"Vehicle Registration"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"documentNumber",children:"Document Number"}),e.jsx(A,{id:"documentNumber",value:u,onChange:s=>R(s.target.value),placeholder:"Enter document number",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"expiryDate",children:"Expiry Date (Optional)"}),e.jsx(A,{id:"expiryDate",type:"date",value:h,onChange:s=>w(s.target.value),className:"rounded-xl"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var i;return S(((i=s.target.files)==null?void 0:i[0])||null)},className:"hidden",id:"document-upload"}),e.jsxs("label",{htmlFor:"document-upload",className:"cursor-pointer",children:[e.jsx($,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:c?c.name:"Click to upload document image"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"PNG, JPG, JPEG up to 5MB"})]})]}),e.jsx(b,{onClick:T,disabled:o||!c||!m||!u,className:"w-full rounded-xl",style:{backgroundColor:a.PRIMARY},children:o?"Uploading...":"Upload Document"})]})]}),e.jsxs(j,{className:"mb-8",children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center",style:{color:a.SECONDARY},children:[e.jsx(V,{className:"h-6 w-6 mr-3"}),"Biometric Verification"]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-xl p-6 text-center",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-blue-500 mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Face Recognition"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Verify your identity using facial recognition"}),e.jsx(b,{onClick:()=>D("FACE"),disabled:o,className:"w-full rounded-xl",variant:t.biometric.verified?"outline":"default",style:t.biometric.verified?{}:{backgroundColor:a.PRIMARY},children:t.biometric.verified?"✓ Verified":x?"Complete Verification":"Capture Face"})]}),e.jsxs("div",{className:"border rounded-xl p-6 text-center",children:[e.jsx(V,{className:"h-12 w-12 mx-auto text-blue-500 mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Fingerprint"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Secure verification using fingerprint"}),e.jsx(b,{onClick:()=>D("FINGERPRINT"),disabled:o,className:"w-full rounded-xl",variant:t.biometric.verified?"outline":"default",style:t.biometric.verified?{}:{backgroundColor:a.PRIMARY},children:t.biometric.verified?"✓ Verified":x?"Complete Verification":"Scan Fingerprint"})]})]})})]}),e.jsxs(j,{children:[e.jsx(v,{children:e.jsx(N,{style:{color:a.SECONDARY},children:"Verification Status"})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[t.documents.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Uploaded Documents"}),e.jsx("div",{className:"space-y-2",children:t.documents.map(s=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:s.type.replace("_"," ")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Confidence: ",Math.round(s.validationScore*100),"%"]})]}),e.jsx(I,{variant:s.status==="VERIFIED"?"default":"secondary",style:{backgroundColor:s.status==="VERIFIED"?a.SUCCESS:a.WARNING,color:"white"},children:s.status})]},s.id))})]}),t.requiredSteps.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Remaining Steps"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.requiredSteps.map(s=>e.jsxs("div",{className:"flex items-center p-2 border rounded-lg",children:[e.jsx(F,{className:"h-4 w-4 text-orange-500 mr-2"}),e.jsx("span",{className:"text-sm",children:s.replace("_"," ")})]},s))})]})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white p-4 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}export{K as default};
//# sourceMappingURL=enhanced-verification-CihNA24C.js.map
