{"version":3,"file":"toll-payment-success-BTbHXFT_.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/share.js","../../src/pages/toll-payment-success.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Share = createLucideIcon(\"Share\", [\n  [\"path\", { d: \"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\", key: \"1b2hhj\" }],\n  [\"polyline\", { points: \"16 6 12 2 8 6\", key: \"m901s6\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"15\", key: \"1p0rca\" }]\n]);\n\nexport { Share as default };\n//# sourceMappingURL=share.js.map\n","\nimport { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, CheckCircle, Download, Share, QrCode } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport default function TollPaymentSuccess() {\n  const [, setLocation] = useLocation();\n  const [transactionDetails, setTransactionDetails] = useState<any>(null);\n  const [qrCode, setQrCode] = useState<string>(\"\");\n\n  useEffect(() => {\n    // Get transaction details from URL params\n    const urlParams = new URLSearchParams(window.location.search);\n    const transactionId = urlParams.get('transactionId');\n    const qrCodeParam = urlParams.get('qrCode');\n\n    if (qrCodeParam) {\n      setQrCode(qrCodeParam);\n    }\n\n    // Fetch transaction details\n    if (transactionId) {\n      fetchTransactionDetails(transactionId);\n    }\n  }, []);\n\n  const fetchTransactionDetails = async (transactionId: string) => {\n    try {\n      const response = await fetch(`/api/transactions/${transactionId}`, {\n        credentials: 'include'\n      });\n      \n      if (response.ok) {\n        const result = await response.json();\n        setTransactionDetails(result.transaction);\n      }\n    } catch (error) {\n      console.error('Error fetching transaction details:', error);\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-NG', {\n      style: 'currency',\n      currency: 'NGN',\n      minimumFractionDigits: 0\n    }).format(amount);\n  };\n\n  const handleShare = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: 'Toll Payment Receipt',\n          text: `Toll payment successful - ${formatCurrency(parseFloat(transactionDetails?.amount || '0'))}`,\n          url: window.location.href\n        });\n      } catch (error) {\n        console.log('Error sharing:', error);\n      }\n    } else {\n      // Fallback: copy to clipboard\n      navigator.clipboard.writeText(window.location.href);\n    }\n  };\n\n  const handleDownloadReceipt = () => {\n    // Create a simple receipt text\n    const receiptText = `\nTOLL PAYMENT RECEIPT\n===================\nTransaction ID: ${transactionDetails?.id}\nDate: ${new Date(transactionDetails?.createdAt).toLocaleString()}\nAmount: ${formatCurrency(parseFloat(transactionDetails?.amount || '0'))}\nToll Gate: ${transactionDetails?.metadata?.tollGateName}\nVehicle Type: ${transactionDetails?.metadata?.vehicleType}\nQR Code: ${qrCode}\n===================\nBrillPrime Toll Services\n    `;\n\n    const element = document.createElement('a');\n    const file = new Blob([receiptText], { type: 'text/plain' });\n    element.href = URL.createObjectURL(file);\n    element.download = `toll-receipt-${transactionDetails?.id}.txt`;\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 w-full max-w-md mx-auto\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"flex items-center justify-between p-4\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/toll-payments\")}\n          >\n            <ArrowLeft className=\"w-5 h-5\" />\n          </Button>\n          <h1 className=\"text-lg font-semibold text-[#131313]\">Payment Success</h1>\n          <div className=\"w-10\"></div>\n        </div>\n      </div>\n\n      <div className=\"p-4 space-y-6\">\n        {/* Success Icon */}\n        <div className=\"text-center py-8\">\n          <CheckCircle className=\"w-20 h-20 text-green-500 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-[#131313] mb-2\">Payment Successful!</h2>\n          <p className=\"text-gray-600\">Your toll payment has been processed successfully</p>\n        </div>\n\n        {/* Transaction Details */}\n        {transactionDetails && (\n          <Card>\n            <CardContent className=\"p-6 space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Amount Paid</span>\n                <span className=\"text-2xl font-bold text-[#4682b4]\">\n                  {formatCurrency(parseFloat(transactionDetails.amount))}\n                </span>\n              </div>\n\n              <div className=\"border-t pt-4 space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Transaction ID</span>\n                  <span className=\"font-medium\">{transactionDetails.id}</span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Date & Time</span>\n                  <span className=\"font-medium\">\n                    {new Date(transactionDetails.createdAt).toLocaleString()}\n                  </span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Toll Gate</span>\n                  <span className=\"font-medium\">{transactionDetails.metadata?.tollGateName}</span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Vehicle Type</span>\n                  <Badge variant=\"secondary\" className=\"capitalize\">\n                    {transactionDetails.metadata?.vehicleType}\n                  </Badge>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Status</span>\n                  <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">\n                    Completed\n                  </Badge>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* QR Code */}\n        {qrCode && (\n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <QrCode className=\"w-12 h-12 mx-auto mb-4 text-[#4682b4]\" />\n              <h3 className=\"font-semibold mb-2\">Your Toll Pass QR Code</h3>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Show this QR code at the toll gate for entry\n              </p>\n              <div className=\"bg-gray-100 p-4 rounded-lg font-mono text-sm break-all\">\n                {qrCode}\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Actions */}\n        <div className=\"space-y-3\">\n          <Button\n            onClick={handleDownloadReceipt}\n            variant=\"outline\"\n            className=\"w-full\"\n          >\n            <Download className=\"w-4 h-4 mr-2\" />\n            Download Receipt\n          </Button>\n\n          <Button\n            onClick={handleShare}\n            variant=\"outline\"\n            className=\"w-full\"\n          >\n            <Share className=\"w-4 h-4 mr-2\" />\n            Share Receipt\n          </Button>\n\n          <Button\n            onClick={() => setLocation(\"/dashboard\")}\n            className=\"w-full bg-[#4682b4] hover:bg-[#357abd]\"\n          >\n            Back to Dashboard\n          </Button>\n        </div>\n\n        {/* Important Note */}\n        <Card className=\"bg-blue-50 border-blue-200\">\n          <CardContent className=\"p-4\">\n            <h4 className=\"font-medium text-blue-900 mb-2\">Important Notice</h4>\n            <p className=\"text-sm text-blue-800\">\n              Keep this QR code ready for toll gate scanning. The QR code is valid for 24 hours \n              from the time of payment.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n"],"names":["Share","createLucideIcon","TollPaymentSuccess","setLocation","useLocation","transactionDetails","setTransactionDetails","useState","qrCode","setQrCode","useEffect","urlParams","transactionId","qrCodeParam","fetchTransactionDetails","response","result","error","formatCurrency","amount","handleShare","handleDownloadReceipt","receiptText","_a","_b","element","file","jsxs","jsx","Button","ArrowLeft","CheckCircle","Card","CardContent","Badge","QrCode","Download"],"mappings":"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","x_google_ignoreList":[0]}