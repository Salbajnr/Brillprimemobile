import{a as E,u as R,H as T,aT as w,r as o,j as e,B as n,A as P,g as d,ag as I,aj as A,m,n as x,k as D,$ as L,aU as u,P as b,y as k}from"./index-CVqmz7v7.js";import{a as M}from"./account_circle-ChEtdL0c.js";import{P as F}from"./phone-0BJ47FE1.js";import{F as O}from"./fuel-COf1siGH.js";const s={PRIMARY:"#4682b4",SECONDARY:"#0b1a51",ACTIVE:"#010e42",TEXT:"#131313",WHITE:"#ffffff"},S=a=>{const l=new URLSearchParams(window.location.search).get("status")||"COMPLETED";return a==="DRIVER"?l==="CANCELLED"?{id:"ord-004",type:"FUEL",productName:"Petrol",quantity:"1 litre",unitPrice:3e4,subtotal:3e4,deliveryFee:500,total:30500,customerName:"Mike Johnson",customerPhone:"+234 801 234 5678",pickupLocation:"Bukuru, Jos",deliveryLocation:"Rayfield, Jos",distance:"10Km",timeTaken:"15 mins",status:"CANCELLED",date:"Friday, 13th November 2024",deliveryTime:"05:00pm",productIcon:u}:{id:"ord-001",type:"FUEL",productName:"Petrol",quantity:"1 litre",unitPrice:3e4,subtotal:3e4,deliveryFee:500,total:30500,customerName:"Mike Johnson",customerPhone:"+234 801 234 5678",pickupLocation:"Bukuru, Jos",deliveryLocation:"Rayfield, Jos",distance:"10Km",timeTaken:"15 mins",status:"COMPLETED",date:"Friday, 13th November 2024",deliveryTime:"05:00pm",productIcon:u}:a==="CONSUMER"?l==="CANCELLED"?{id:"ord-005",type:"COMMODITY",productName:"Rice (50kg)",quantity:"2 bags",unitPrice:42500,subtotal:85e3,deliveryFee:1500,total:86500,customerName:"Sarah Ibrahim",customerPhone:"+234 803 567 8901",driverName:"Ahmed Hassan",pickupLocation:"Market Square, Jos",deliveryLocation:"Angwan Rogo, Jos",distance:"8Km",timeTaken:"0 mins",status:"CANCELLED",date:"Thursday, 12th November 2024",deliveryTime:"Not delivered",productIcon:u}:{id:"ord-002",type:"COMMODITY",productName:"Rice (50kg)",quantity:"2 bags",unitPrice:42500,subtotal:85e3,deliveryFee:1500,total:86500,customerName:"Sarah Ibrahim",customerPhone:"+234 803 567 8901",driverName:"Ahmed Hassan",pickupLocation:"Market Square, Jos",deliveryLocation:"Angwan Rogo, Jos",distance:"8Km",timeTaken:"22 mins",status:"COMPLETED",date:"Thursday, 12th November 2024",deliveryTime:"02:30pm"}:l==="CANCELLED"?{id:"ord-006",type:"FOOD",productName:"Jollof Rice Combo",quantity:"3 portions",unitPrice:5e3,subtotal:15e3,deliveryFee:800,total:15800,customerName:"Grace Danjuma",customerPhone:"+234 805 432 1098",driverName:"David Yakubu",pickupLocation:"Mama Adanna Kitchen",deliveryLocation:"University of Jos",distance:"5Km",timeTaken:"0 mins",status:"CANCELLED",date:"Wednesday, 11th November 2024",deliveryTime:"Not delivered",productIcon:u}:{id:"ord-003",type:"FOOD",productName:"Jollof Rice Combo",quantity:"3 portions",unitPrice:5e3,subtotal:15e3,deliveryFee:800,total:15800,customerName:"Grace Danjuma",customerPhone:"+234 805 432 1098",driverName:"David Yakubu",pickupLocation:"Mama Adanna Kitchen",deliveryLocation:"University of Jos",distance:"5Km",timeTaken:"18 mins",status:"COMPLETED",date:"Wednesday, 11th November 2024",deliveryTime:"07:45pm"}},f=a=>{switch(a){case"COMPLETED":return{bg:"#31D45D",text:"#31D45D",label:"Completed"};case"CANCELLED":return{bg:"#FF4141",text:"#FF4141",label:"Cancelled"};case"IN_PROGRESS":return{bg:"#FF8C00",text:"#FF8C00",label:"In Progress"};case"PENDING":return{bg:"#FFC107",text:"#FFC107",label:"Pending"};default:return{bg:s.PRIMARY,text:s.PRIMARY,label:a}}},Y=a=>{switch(a){case"FUEL":return e.jsx(O,{className:"h-10 w-10 text-white"});case"COMMODITY":case"FOOD":return e.jsx(k,{className:"h-10 w-10 text-white"});case"DELIVERY":return e.jsx(b,{className:"h-10 w-10 text-white"});default:return e.jsx(b,{className:"h-10 w-10 text-white"})}},V=a=>a==="DRIVER"?"Delivery Detail":"Order History Detail",J=a=>"/order-history";function K(){const{user:a}=E(),[,i]=R(),{connected:l,orderUpdates:c}=T();w();const r=(a==null?void 0:a.role)||"CONSUMER",[t,j]=o.useState(S(r)),[h,y]=o.useState(f(t.status)),p=V(r),v=J();o.useEffect(()=>{if(Object.keys(c).length>0&&c[t.id]){const N=c[t.id];console.log(`Updating order ${t.id} status to ${N.status}`),j(g=>({...g,status:N.status}))}},[c,t.id]),o.useEffect(()=>{y(f(t.status))},[t.status]);const C=()=>{i(v)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{onClick:C,variant:"ghost",size:"sm",className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(P,{className:"h-6 w-6",style:{color:s.TEXT}})}),e.jsx("h1",{className:"text-xl font-bold",style:{color:s.TEXT},children:p}),e.jsx("div",{className:"w-10 flex items-center justify-center",children:l?e.jsxs(d,{className:"bg-green-500 hover:bg-green-600",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Live"})]}):e.jsxs(d,{className:"bg-gray-500 hover:bg-gray-600",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Offline"})]})})]})})}),e.jsxs("div",{className:"max-w-md mx-auto p-5 space-y-6",children:[e.jsx(m,{className:"rounded-3xl border",style:{borderColor:s.PRIMARY},children:e.jsxs(x,{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 overflow-hidden border-4",style:{borderColor:s.PRIMARY},children:e.jsx("img",{src:t.profileImage||M,alt:"Customer Profile",className:"w-full h-full object-cover",style:{filter:"brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(2878%) hue-rotate(176deg) brightness(102%) contrast(97%)"}})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:s.TEXT},children:t.customerName})]})}),e.jsx("div",{className:"w-full h-px bg-gray-300"}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-15 h-15 rounded-2xl flex items-center justify-center",style:{backgroundColor:s.PRIMARY},children:t.productIcon?e.jsx("img",{src:t.productIcon,alt:t.productName,className:"w-10 h-10"}):Y(t.type)}),e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-semibold",style:{color:s.ACTIVE},children:t.productName})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(d,{variant:"outline",className:"px-3 py-1 rounded-lg border text-xs font-medium",style:{borderColor:s.PRIMARY,color:s.PRIMARY,backgroundColor:"transparent"},children:t.quantity}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-lg font-semibold",style:{color:s.SECONDARY},children:["₦",(t.unitPrice/100).toFixed(2)]})})]})]}),e.jsx(m,{className:"rounded-3xl border",style:{borderColor:s.PRIMARY},children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center",style:{borderColor:s.PRIMARY},children:e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:s.ACTIVE}})})}),e.jsx("p",{className:"text-base font-medium",style:{color:s.ACTIVE},children:t.pickupLocation})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),e.jsx("div",{className:"w-px h-8 ml-2.5 border-l-2 border-dashed",style:{borderColor:s.PRIMARY}})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"h-5 w-5",style:{color:s.PRIMARY}}),e.jsx("p",{className:"text-base font-medium",style:{color:s.ACTIVE},children:t.deliveryLocation})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-light",style:{color:s.ACTIVE},children:"Distance"}),e.jsx("p",{className:"text-sm font-medium",style:{color:s.ACTIVE},children:t.distance})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-light",style:{color:s.ACTIVE},children:"Time taken"}),e.jsx("p",{className:"text-sm font-medium",style:{color:s.ACTIVE},children:t.timeTaken})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-light",style:{color:s.ACTIVE},children:"Date"}),e.jsx("p",{className:"text-sm font-medium",style:{color:s.ACTIVE},children:t.date})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-light",style:{color:s.ACTIVE},children:"Time of Delivery"}),e.jsx("p",{className:"text-sm font-medium",style:{color:s.ACTIVE},children:t.deliveryTime})]})]}),t.status==="COMPLETED"&&e.jsx(m,{className:"rounded-2xl text-white",style:{backgroundColor:s.PRIMARY},children:e.jsxs(x,{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-center mb-6 text-white",children:"Purchase Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base",children:"Subtotal"}),e.jsxs("span",{className:"text-base font-semibold",children:["₦",(t.subtotal/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base",children:"Delivery fee"}),e.jsxs("span",{className:"text-base font-semibold",children:["₦",(t.deliveryFee/100).toFixed(2)]})]}),e.jsx("div",{className:"border-t border-white/20 pt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base font-medium",children:"Total"}),e.jsxs("span",{className:"text-base font-bold",children:["₦",(t.total/100).toFixed(2)]})]})})]})]})}),t.status==="CANCELLED"&&e.jsx(m,{className:"rounded-2xl text-white",style:{backgroundColor:s.PRIMARY},children:e.jsxs(x,{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-center mb-6 text-white",children:"Purchase Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base",children:"Subtotal"}),e.jsxs("span",{className:"text-base font-semibold",children:["₦",(t.subtotal/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base",children:"Delivery fee"}),e.jsxs("span",{className:"text-base font-semibold",children:["₦",(t.deliveryFee/100).toFixed(2)]})]}),e.jsx("div",{className:"border-t border-white/20 pt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base font-medium",children:"Total"}),e.jsxs("span",{className:"text-base font-bold",children:["₦",(t.total/100).toFixed(2)]})]})})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(d,{className:"px-8 py-3 text-lg font-medium border-2 rounded-3xl",style:{borderColor:h.bg,color:h.text,backgroundColor:"transparent"},children:h.label})}),r==="DRIVER"&&t.status!=="COMPLETED"&&t.status!=="CANCELLED"&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(n,{className:"flex-1 rounded-2xl border-2 border-gray-300 bg-white hover:bg-gray-50",style:{color:s.PRIMARY},children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Call Customer"]}),e.jsxs(n,{className:"flex-1 rounded-2xl",style:{backgroundColor:s.PRIMARY,color:s.WHITE},onClick:()=>i("/chat"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Chat"]})]}),t.status==="CANCELLED"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-2xl p-4 border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-red-600",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-red-600 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold",children:"!"})}),e.jsx("p",{className:"text-sm font-medium",children:"This order was cancelled"})]}),e.jsx("p",{className:"text-xs text-red-500 mt-2",children:r==="DRIVER"?"The customer cancelled this delivery request":r==="CONSUMER"?"You cancelled this order":"This order was cancelled by the customer"})]}),r==="CONSUMER"&&e.jsx(n,{className:"rounded-2xl",style:{backgroundColor:s.PRIMARY,color:s.WHITE},onClick:()=>i("/commodities"),children:"Order Again"})]})]})]})}export{K as default};
//# sourceMappingURL=order-history-detail-C6oREqmO.js.map
