{"version":3,"file":"order-history-detail-BLhQkyv4.js","sources":["../../src/pages/order-history-detail.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  ArrowLeft, \n  MapPin, \n  Clock,\n  Package,\n  Fuel,\n  ShoppingCart,\n  Truck,\n  Phone,\n  MessageSquare,\n  Navigation,\n  Wifi,\n  WifiOff\n} from \"lucide-react\";\nimport { useWebSocketOrders, useWebSocketNotifications } from \"@/hooks/use-websocket\";\nimport { ClientRole, MessageType } from \"../../../server/websocket\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport accountCircleIcon from \"../assets/images/account_circle.svg\";\nimport fuelIcon from \"../assets/images/order_fuel_icon.png\";\n\n// Color constants\nconst COLORS = {\n  PRIMARY: \"#4682b4\",\n  SECONDARY: \"#0b1a51\", \n  ACTIVE: \"#010e42\",\n  TEXT: \"#131313\",\n  WHITE: \"#ffffff\"\n};\n\ninterface OrderDetail {\n  id: string;\n  type: 'FUEL' | 'COMMODITY' | 'DELIVERY' | 'FOOD';\n  productName: string;\n  quantity: string;\n  unitPrice: number;\n  subtotal: number;\n  deliveryFee: number;\n  total: number;\n  customerName: string;\n  customerPhone: string;\n  driverName?: string;\n  pickupLocation: string;\n  deliveryLocation: string;\n  distance: string;\n  timeTaken: string;\n  status: 'COMPLETED' | 'CANCELLED' | 'PENDING' | 'IN_PROGRESS';\n  date: string;\n  deliveryTime: string;\n  profileImage?: string;\n  productIcon?: string;\n}\n\n// Get sample data including failed orders\nconst getSampleOrderDetail = (userRole: string): OrderDetail => {\n  // Check URL params to determine if showing a failed/cancelled order\n  const urlParams = new URLSearchParams(window.location.search);\n  const orderStatus = urlParams.get('status') || 'COMPLETED';\n  \n  if (userRole === 'DRIVER') {\n    if (orderStatus === 'CANCELLED') {\n      return {\n        id: 'ord-004',\n        type: 'FUEL',\n        productName: 'Petrol',\n        quantity: '1 litre',\n        unitPrice: 30000,\n        subtotal: 30000,\n        deliveryFee: 500,\n        total: 30500,\n        customerName: 'Mike Johnson',\n        customerPhone: '+234 801 234 5678',\n        pickupLocation: 'Bukuru, Jos',\n        deliveryLocation: 'Rayfield, Jos',\n        distance: '10Km',\n        timeTaken: '15 mins',\n        status: 'CANCELLED',\n        date: 'Friday, 13th November 2024',\n        deliveryTime: '05:00pm',\n        productIcon: fuelIcon\n      };\n    }\n    return {\n      id: 'ord-001',\n      type: 'FUEL',\n      productName: 'Petrol',\n      quantity: '1 litre',\n      unitPrice: 30000,\n      subtotal: 30000,\n      deliveryFee: 500,\n      total: 30500,\n      customerName: 'Mike Johnson',\n      customerPhone: '+234 801 234 5678',\n      pickupLocation: 'Bukuru, Jos',\n      deliveryLocation: 'Rayfield, Jos',\n      distance: '10Km',\n      timeTaken: '15 mins',\n      status: 'COMPLETED',\n      date: 'Friday, 13th November 2024',\n      deliveryTime: '05:00pm',\n      productIcon: fuelIcon\n    };\n  } else if (userRole === 'CONSUMER') {\n    if (orderStatus === 'CANCELLED') {\n      return {\n        id: 'ord-005',\n        type: 'COMMODITY',\n        productName: 'Rice (50kg)',\n        quantity: '2 bags',\n        unitPrice: 42500,\n        subtotal: 85000,\n        deliveryFee: 1500,\n        total: 86500,\n        customerName: 'Sarah Ibrahim',\n        customerPhone: '+234 803 567 8901',\n        driverName: 'Ahmed Hassan',\n        pickupLocation: 'Market Square, Jos',\n        deliveryLocation: 'Angwan Rogo, Jos',\n        distance: '8Km',\n        timeTaken: '0 mins',\n        status: 'CANCELLED',\n        date: 'Thursday, 12th November 2024',\n        deliveryTime: 'Not delivered',\n        productIcon: fuelIcon\n      };\n    }\n    return {\n      id: 'ord-002',\n      type: 'COMMODITY',\n      productName: 'Rice (50kg)',\n      quantity: '2 bags',\n      unitPrice: 42500,\n      subtotal: 85000,\n      deliveryFee: 1500,\n      total: 86500,\n      customerName: 'Sarah Ibrahim',\n      customerPhone: '+234 803 567 8901',\n      driverName: 'Ahmed Hassan',\n      pickupLocation: 'Market Square, Jos',\n      deliveryLocation: 'Angwan Rogo, Jos',\n      distance: '8Km',\n      timeTaken: '22 mins',\n      status: 'COMPLETED',\n      date: 'Thursday, 12th November 2024',\n      deliveryTime: '02:30pm'\n    };\n  } else {\n    if (orderStatus === 'CANCELLED') {\n      return {\n        id: 'ord-006',\n        type: 'FOOD',\n        productName: 'Jollof Rice Combo',\n        quantity: '3 portions',\n        unitPrice: 5000,\n        subtotal: 15000,\n        deliveryFee: 800,\n        total: 15800,\n        customerName: 'Grace Danjuma',\n        customerPhone: '+234 805 432 1098',\n        driverName: 'David Yakubu',\n        pickupLocation: 'Mama Adanna Kitchen',\n        deliveryLocation: 'University of Jos',\n        distance: '5Km',\n        timeTaken: '0 mins',\n        status: 'CANCELLED',\n        date: 'Wednesday, 11th November 2024',\n        deliveryTime: 'Not delivered',\n        productIcon: fuelIcon\n      };\n    }\n    return {\n      id: 'ord-003',\n      type: 'FOOD',\n      productName: 'Jollof Rice Combo',\n      quantity: '3 portions',\n      unitPrice: 5000,\n      subtotal: 15000,\n      deliveryFee: 800,\n      total: 15800,\n      customerName: 'Grace Danjuma',\n      customerPhone: '+234 805 432 1098',\n      driverName: 'David Yakubu',\n      pickupLocation: 'Mama Adanna Kitchen',\n      deliveryLocation: 'University of Jos',\n      distance: '5Km',\n      timeTaken: '18 mins',\n      status: 'COMPLETED',\n      date: 'Wednesday, 11th November 2024',\n      deliveryTime: '07:45pm'\n    };\n  }\n};\n\nconst getStatusConfig = (status: string) => {\n  switch (status) {\n    case 'COMPLETED':\n      return {\n        bg: '#31D45D',\n        text: '#31D45D',\n        label: 'Completed'\n      };\n    case 'CANCELLED':\n      return {\n        bg: '#FF4141',\n        text: '#FF4141',\n        label: 'Cancelled'\n      };\n    case 'IN_PROGRESS':\n      return {\n        bg: '#FF8C00',\n        text: '#FF8C00',\n        label: 'In Progress'\n      };\n    case 'PENDING':\n      return {\n        bg: '#FFC107',\n        text: '#FFC107',\n        label: 'Pending'\n      };\n    default:\n      return {\n        bg: COLORS.PRIMARY,\n        text: COLORS.PRIMARY,\n        label: status\n      };\n  }\n};\n\nconst getProductIcon = (type: string) => {\n  switch (type) {\n    case 'FUEL':\n      return <Fuel className=\"h-10 w-10 text-white\" />;\n    case 'COMMODITY':\n    case 'FOOD':\n      return <ShoppingCart className=\"h-10 w-10 text-white\" />;\n    case 'DELIVERY':\n      return <Package className=\"h-10 w-10 text-white\" />;\n    default:\n      return <Package className=\"h-10 w-10 text-white\" />;\n  }\n};\n\nconst getPageTitle = (userRole: string) => {\n  if (userRole === 'DRIVER') return 'Delivery Detail';\n  return 'Order History Detail';\n};\n\nconst getReturnPath = (userRole: string) => {\n  return '/order-history';\n};\n\nexport default function OrderHistoryDetail() {\n  const { user } = useAuth();\n  const [, setLocation] = useLocation();\n  const { connected: ordersConnected, orderUpdates, connectionError: ordersError } = useWebSocketOrders();\n  const { connected: notificationsConnected, notifications } = useWebSocketNotifications();\n  \n  const userRole = user?.role || 'CONSUMER';\n  const [orderDetail, setOrderDetail] = useState<OrderDetail>(getSampleOrderDetail(userRole));\n  const [statusConfig, setStatusConfig] = useState(getStatusConfig(orderDetail.status));\n  const pageTitle = getPageTitle(userRole);\n  const returnPath = getReturnPath(userRole);\n  \n  // Process order updates from WebSocket\n  useEffect(() => {\n    if (Object.keys(orderUpdates).length > 0 && orderUpdates[orderDetail.id]) {\n      const update = orderUpdates[orderDetail.id];\n      console.log(`Updating order ${orderDetail.id} status to ${update.status}`);\n      \n      setOrderDetail(prevOrder => ({\n        ...prevOrder,\n        status: update.status\n      }));\n    }\n  }, [orderUpdates, orderDetail.id]);\n  \n  // Update status config when order status changes\n  useEffect(() => {\n    setStatusConfig(getStatusConfig(orderDetail.status));\n  }, [orderDetail.status]);\n\n  const handleBackNavigation = () => {\n    setLocation(returnPath);\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-NG', {\n      style: 'currency',\n      currency: 'NGN',\n      minimumFractionDigits: 2\n    }).format(amount / 100); // Convert from kobo to naira\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-40\">\n        <div className=\"max-w-md mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <Button \n              onClick={handleBackNavigation}\n              variant=\"ghost\" \n              size=\"sm\"\n              className=\"p-2 rounded-full hover:bg-gray-100\"\n            >\n              <ArrowLeft className=\"h-6 w-6\" style={{ color: COLORS.TEXT }} />\n            </Button>\n            <h1 className=\"text-xl font-bold\" style={{ color: COLORS.TEXT }}>\n              {pageTitle}\n            </h1>\n            <div className=\"w-10 flex items-center justify-center\">\n              {ordersConnected ? (\n                <Badge className=\"bg-green-500 hover:bg-green-600\">\n                  <Wifi className=\"h-3 w-3 mr-1\" />\n                  <span className=\"text-xs\">Live</span>\n                </Badge>\n              ) : (\n                <Badge className=\"bg-gray-500 hover:bg-gray-600\">\n                  <WifiOff className=\"h-3 w-3 mr-1\" />\n                  <span className=\"text-xs\">Offline</span>\n                </Badge>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Order Detail Content */}\n      <div className=\"max-w-md mx-auto p-5 space-y-6\">\n        {/* Customer Profile Section */}\n        <Card className=\"rounded-3xl border\" style={{ borderColor: COLORS.PRIMARY }}>\n          <CardContent className=\"text-center py-8\">\n            <div className=\"w-20 h-20 rounded-full mx-auto mb-4 overflow-hidden border-4\" style={{ borderColor: COLORS.PRIMARY }}>\n              <img \n                src={orderDetail.profileImage || accountCircleIcon} \n                alt=\"Customer Profile\" \n                className=\"w-full h-full object-cover\"\n                style={{ filter: `brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(2878%) hue-rotate(176deg) brightness(102%) contrast(97%)` }}\n              />\n            </div>\n            <h2 className=\"text-xl font-semibold mb-2\" style={{ color: COLORS.TEXT }}>\n              {orderDetail.customerName}\n            </h2>\n          </CardContent>\n        </Card>\n\n        {/* Divider */}\n        <div className=\"w-full h-px bg-gray-300\"></div>\n\n        {/* Product Information */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div \n              className=\"w-15 h-15 rounded-2xl flex items-center justify-center\"\n              style={{ backgroundColor: COLORS.PRIMARY }}\n            >\n              {orderDetail.productIcon ? (\n                <img src={orderDetail.productIcon} alt={orderDetail.productName} className=\"w-10 h-10\" />\n              ) : (\n                getProductIcon(orderDetail.type)\n              )}\n            </div>\n            <div>\n              <h3 className=\"text-xl font-semibold\" style={{ color: COLORS.ACTIVE }}>\n                {orderDetail.productName}\n              </h3>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <Badge \n              variant=\"outline\"\n              className=\"px-3 py-1 rounded-lg border text-xs font-medium\"\n              style={{ \n                borderColor: COLORS.PRIMARY,\n                color: COLORS.PRIMARY,\n                backgroundColor: 'transparent'\n              }}\n            >\n              {orderDetail.quantity}\n            </Badge>\n            <div className=\"text-right\">\n              <span className=\"text-lg font-semibold\" style={{ color: COLORS.SECONDARY }}>\n                ₦{(orderDetail.unitPrice / 100).toFixed(2)}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Route Information */}\n        <Card className=\"rounded-3xl border\" style={{ borderColor: COLORS.PRIMARY }}>\n          <CardContent className=\"p-6\">\n            <div className=\"space-y-4\">\n              {/* Pickup Location */}\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"flex items-center justify-center\">\n                  <div \n                    className=\"w-5 h-5 rounded-full border-2 flex items-center justify-center\"\n                    style={{ borderColor: COLORS.PRIMARY }}\n                  >\n                    <div \n                      className=\"w-2.5 h-2.5 rounded-full\"\n                      style={{ backgroundColor: COLORS.ACTIVE }}\n                    ></div>\n                  </div>\n                </div>\n                <p className=\"text-base font-medium\" style={{ color: COLORS.ACTIVE }}>\n                  {orderDetail.pickupLocation}\n                </p>\n              </div>\n\n              {/* Dotted connector line */}\n              <div className=\"flex items-center\">\n                <div className=\"w-5 h-5 flex-shrink-0\"></div>\n                <div \n                  className=\"w-px h-8 ml-2.5 border-l-2 border-dashed\" \n                  style={{ borderColor: COLORS.PRIMARY }}\n                ></div>\n              </div>\n\n              {/* Delivery Location */}\n              <div className=\"flex items-center space-x-3\">\n                <MapPin className=\"h-5 w-5\" style={{ color: COLORS.PRIMARY }} />\n                <p className=\"text-base font-medium\" style={{ color: COLORS.ACTIVE }}>\n                  {orderDetail.deliveryLocation}\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Delivery Statistics */}\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm font-light\" style={{ color: COLORS.ACTIVE }}>Distance</p>\n            <p className=\"text-sm font-medium\" style={{ color: COLORS.ACTIVE }}>{orderDetail.distance}</p>\n          </div>\n          \n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm font-light\" style={{ color: COLORS.ACTIVE }}>Time taken</p>\n            <p className=\"text-sm font-medium\" style={{ color: COLORS.ACTIVE }}>{orderDetail.timeTaken}</p>\n          </div>\n          \n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm font-light\" style={{ color: COLORS.ACTIVE }}>Date</p>\n            <p className=\"text-sm font-medium\" style={{ color: COLORS.ACTIVE }}>{orderDetail.date}</p>\n          </div>\n          \n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm font-light\" style={{ color: COLORS.ACTIVE }}>Time of Delivery</p>\n            <p className=\"text-sm font-medium\" style={{ color: COLORS.ACTIVE }}>{orderDetail.deliveryTime}</p>\n          </div>\n        </div>\n\n        {/* Purchase Summary - Only show for completed orders */}\n        {orderDetail.status === 'COMPLETED' && (\n          <Card \n            className=\"rounded-2xl text-white\"\n            style={{ backgroundColor: COLORS.PRIMARY }}\n          >\n            <CardContent className=\"p-6\">\n              <h4 className=\"text-lg font-bold text-center mb-6 text-white\">Purchase Summary</h4>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-base\">Subtotal</span>\n                  <span className=\"text-base font-semibold\">₦{(orderDetail.subtotal / 100).toFixed(2)}</span>\n                </div>\n                \n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-base\">Delivery fee</span>\n                  <span className=\"text-base font-semibold\">₦{(orderDetail.deliveryFee / 100).toFixed(2)}</span>\n                </div>\n                \n                <div className=\"border-t border-white/20 pt-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-base font-medium\">Total</span>\n                    <span className=\"text-base font-bold\">₦{(orderDetail.total / 100).toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Cancelled Order Summary */}\n        {orderDetail.status === 'CANCELLED' && (\n          <Card \n            className=\"rounded-2xl text-white\"\n            style={{ backgroundColor: COLORS.PRIMARY }}\n          >\n            <CardContent className=\"p-6\">\n              <h4 className=\"text-lg font-bold text-center mb-6 text-white\">Purchase Summary</h4>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-base\">Subtotal</span>\n                  <span className=\"text-base font-semibold\">₦{(orderDetail.subtotal / 100).toFixed(2)}</span>\n                </div>\n                \n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-base\">Delivery fee</span>\n                  <span className=\"text-base font-semibold\">₦{(orderDetail.deliveryFee / 100).toFixed(2)}</span>\n                </div>\n                \n                <div className=\"border-t border-white/20 pt-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-base font-medium\">Total</span>\n                    <span className=\"text-base font-bold\">₦{(orderDetail.total / 100).toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Status Badge */}\n        <div className=\"flex justify-center\">\n          <Badge \n            className=\"px-8 py-3 text-lg font-medium border-2 rounded-3xl\"\n            style={{ \n              borderColor: statusConfig.bg,\n              color: statusConfig.text,\n              backgroundColor: 'transparent'\n            }}\n          >\n            {statusConfig.label}\n          </Badge>\n        </div>\n\n        {/* Action Buttons (only for drivers with active orders) */}\n        {userRole === 'DRIVER' && orderDetail.status !== 'COMPLETED' && orderDetail.status !== 'CANCELLED' && (\n          <div className=\"flex space-x-3\">\n            <Button \n              className=\"flex-1 rounded-2xl border-2 border-gray-300 bg-white hover:bg-gray-50\"\n              style={{ color: COLORS.PRIMARY }}\n            >\n              <Phone className=\"h-4 w-4 mr-2\" />\n              Call Customer\n            </Button>\n            \n            <Button \n              className=\"flex-1 rounded-2xl\"\n              style={{ \n                backgroundColor: COLORS.PRIMARY,\n                color: COLORS.WHITE\n              }}\n              onClick={() => setLocation('/chat')}\n            >\n              <MessageSquare className=\"h-4 w-4 mr-2\" />\n              Chat\n            </Button>\n          </div>\n        )}\n\n        {/* Cancelled Order Actions */}\n        {orderDetail.status === 'CANCELLED' && (\n          <div className=\"text-center space-y-4\">\n            <div className=\"bg-red-50 rounded-2xl p-4 border border-red-200\">\n              <div className=\"flex items-center justify-center space-x-2 text-red-600\">\n                <div className=\"w-6 h-6 rounded-full border-2 border-red-600 flex items-center justify-center\">\n                  <span className=\"text-sm font-bold\">!</span>\n                </div>\n                <p className=\"text-sm font-medium\">This order was cancelled</p>\n              </div>\n              <p className=\"text-xs text-red-500 mt-2\">\n                {userRole === 'DRIVER' \n                  ? 'The customer cancelled this delivery request'\n                  : userRole === 'CONSUMER'\n                  ? 'You cancelled this order'\n                  : 'This order was cancelled by the customer'\n                }\n              </p>\n            </div>\n            \n            {userRole === 'CONSUMER' && (\n              <Button \n                className=\"rounded-2xl\"\n                style={{ \n                  backgroundColor: COLORS.PRIMARY,\n                  color: COLORS.WHITE\n                }}\n                onClick={() => setLocation('/commodities')}\n              >\n                Order Again\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":["COLORS","getSampleOrderDetail","userRole","orderStatus","fuelIcon","getStatusConfig","status","getProductIcon","type","jsx","Fuel","ShoppingCart","Package","getPageTitle","getReturnPath","OrderHistoryDetail","user","useAuth","setLocation","useLocation","ordersConnected","orderUpdates","useWebSocketOrders","useWebSocketNotifications","orderDetail","setOrderDetail","useState","statusConfig","setStatusConfig","pageTitle","returnPath","useEffect","update","prevOrder","handleBackNavigation","jsxs","Button","ArrowLeft","Badge","Wifi","WifiOff","Card","CardContent","accountCircleIcon","MapPin","Phone","MessageSquare"],"mappings":"8RA0BA,MAAMA,EAAS,CACb,QAAS,UACT,UAAW,UACX,OAAQ,UACR,KAAM,UACN,MAAO,SACT,EA0BMC,EAAwBC,GAAkC,CAG9D,MAAMC,EADY,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC9B,IAAI,QAAQ,GAAK,YAE/C,OAAID,IAAa,SACXC,IAAgB,YACX,CACL,GAAI,UACJ,KAAM,OACN,YAAa,SACb,SAAU,UACV,UAAW,IACX,SAAU,IACV,YAAa,IACb,MAAO,MACP,aAAc,eACd,cAAe,oBACf,eAAgB,cAChB,iBAAkB,gBAClB,SAAU,OACV,UAAW,UACX,OAAQ,YACR,KAAM,6BACN,aAAc,UACd,YAAaC,CAAA,EAGV,CACL,GAAI,UACJ,KAAM,OACN,YAAa,SACb,SAAU,UACV,UAAW,IACX,SAAU,IACV,YAAa,IACb,MAAO,MACP,aAAc,eACd,cAAe,oBACf,eAAgB,cAChB,iBAAkB,gBAClB,SAAU,OACV,UAAW,UACX,OAAQ,YACR,KAAM,6BACN,aAAc,UACd,YAAaA,CAAA,EAENF,IAAa,WAClBC,IAAgB,YACX,CACL,GAAI,UACJ,KAAM,YACN,YAAa,cACb,SAAU,SACV,UAAW,MACX,SAAU,KACV,YAAa,KACb,MAAO,MACP,aAAc,gBACd,cAAe,oBACf,WAAY,eACZ,eAAgB,qBAChB,iBAAkB,mBAClB,SAAU,MACV,UAAW,SACX,OAAQ,YACR,KAAM,+BACN,aAAc,gBACd,YAAaC,CAAA,EAGV,CACL,GAAI,UACJ,KAAM,YACN,YAAa,cACb,SAAU,SACV,UAAW,MACX,SAAU,KACV,YAAa,KACb,MAAO,MACP,aAAc,gBACd,cAAe,oBACf,WAAY,eACZ,eAAgB,qBAChB,iBAAkB,mBAClB,SAAU,MACV,UAAW,UACX,OAAQ,YACR,KAAM,+BACN,aAAc,SAAA,EAGZD,IAAgB,YACX,CACL,GAAI,UACJ,KAAM,OACN,YAAa,oBACb,SAAU,aACV,UAAW,IACX,SAAU,KACV,YAAa,IACb,MAAO,MACP,aAAc,gBACd,cAAe,oBACf,WAAY,eACZ,eAAgB,sBAChB,iBAAkB,oBAClB,SAAU,MACV,UAAW,SACX,OAAQ,YACR,KAAM,gCACN,aAAc,gBACd,YAAaC,CAAA,EAGV,CACL,GAAI,UACJ,KAAM,OACN,YAAa,oBACb,SAAU,aACV,UAAW,IACX,SAAU,KACV,YAAa,IACb,MAAO,MACP,aAAc,gBACd,cAAe,oBACf,WAAY,eACZ,eAAgB,sBAChB,iBAAkB,oBAClB,SAAU,MACV,UAAW,UACX,OAAQ,YACR,KAAM,gCACN,aAAc,SAAA,CAGpB,EAEMC,EAAmBC,GAAmB,CAC1C,OAAQA,EAAA,CACN,IAAK,YACH,MAAO,CACL,GAAI,UACJ,KAAM,UACN,MAAO,WAAA,EAEX,IAAK,YACH,MAAO,CACL,GAAI,UACJ,KAAM,UACN,MAAO,WAAA,EAEX,IAAK,cACH,MAAO,CACL,GAAI,UACJ,KAAM,UACN,MAAO,aAAA,EAEX,IAAK,UACH,MAAO,CACL,GAAI,UACJ,KAAM,UACN,MAAO,SAAA,EAEX,QACE,MAAO,CACL,GAAIN,EAAO,QACX,KAAMA,EAAO,QACb,MAAOM,CAAA,CACT,CAEN,EAEMC,EAAkBC,GAAiB,CACvC,OAAQA,EAAA,CACN,IAAK,OACH,OAAOC,EAAAA,IAACC,EAAA,CAAK,UAAU,sBAAA,CAAuB,EAChD,IAAK,YACL,IAAK,OACH,OAAOD,EAAAA,IAACE,EAAA,CAAa,UAAU,sBAAA,CAAuB,EACxD,IAAK,WACH,OAAOF,EAAAA,IAACG,EAAA,CAAQ,UAAU,sBAAA,CAAuB,EACnD,QACE,OAAOH,EAAAA,IAACG,EAAA,CAAQ,UAAU,sBAAA,CAAuB,CAAA,CAEvD,EAEMC,EAAgBX,GAChBA,IAAa,SAAiB,kBAC3B,uBAGHY,EAAiBZ,GACd,iBAGT,SAAwBa,GAAqB,CAC3C,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EACX,CAAA,CAAGC,CAAW,EAAIC,EAAA,EAClB,CAAE,UAAWC,EAAiB,aAAAC,CAA2C,EAAIC,EAAA,EACtBC,EAAA,EAE7D,MAAMrB,GAAWc,GAAA,YAAAA,EAAM,OAAQ,WACzB,CAACQ,EAAaC,CAAc,EAAIC,EAAAA,SAAsBzB,EAAqBC,CAAQ,CAAC,EACpF,CAACyB,EAAcC,CAAe,EAAIF,EAAAA,SAASrB,EAAgBmB,EAAY,MAAM,CAAC,EAC9EK,EAAYhB,EAAaX,CAAQ,EACjC4B,EAAahB,EAAsB,EAGzCiB,EAAAA,UAAU,IAAM,CACd,GAAI,OAAO,KAAKV,CAAY,EAAE,OAAS,GAAKA,EAAaG,EAAY,EAAE,EAAG,CACxE,MAAMQ,EAASX,EAAaG,EAAY,EAAE,EAC1C,QAAQ,IAAI,kBAAkBA,EAAY,EAAE,cAAcQ,EAAO,MAAM,EAAE,EAEzEP,EAAeQ,IAAc,CAC3B,GAAGA,EACH,OAAQD,EAAO,MAAA,EACf,CACJ,CACF,EAAG,CAACX,EAAcG,EAAY,EAAE,CAAC,EAGjCO,EAAAA,UAAU,IAAM,CACdH,EAAgBvB,EAAgBmB,EAAY,MAAM,CAAC,CACrD,EAAG,CAACA,EAAY,MAAM,CAAC,EAEvB,MAAMU,EAAuB,IAAM,CACjChB,EAAYY,CAAU,CACxB,EAUA,OACEK,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAA1B,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,6BACb,SAAA0B,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC2B,EAAA,CACC,QAASF,EACT,QAAQ,QACR,KAAK,KACL,UAAU,qCAEV,SAAAzB,EAAAA,IAAC4B,GAAU,UAAU,UAAU,MAAO,CAAE,MAAOrC,EAAO,KAAK,CAAG,CAAA,CAAA,EAEhES,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,MAAO,CAAE,MAAOT,EAAO,IAAA,EACtD,SAAA6B,CAAA,CACH,EACApB,EAAAA,IAAC,OAAI,UAAU,wCACZ,WACC0B,EAAAA,KAACG,EAAA,CAAM,UAAU,kCACf,SAAA,CAAA7B,EAAAA,IAAC8B,EAAA,CAAK,UAAU,cAAA,CAAe,EAC/B9B,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,MAAA,CAAI,CAAA,CAAA,CAChC,EAEA0B,EAAAA,KAACG,EAAA,CAAM,UAAU,gCACf,SAAA,CAAA7B,EAAAA,IAAC+B,EAAA,CAAQ,UAAU,cAAA,CAAe,EAClC/B,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,SAAA,CAAO,CAAA,CAAA,CACnC,CAAA,CAEJ,CAAA,CAAA,CACF,EACF,EACF,EAGA0B,EAAAA,KAAC,MAAA,CAAI,UAAU,iCAEb,SAAA,CAAA1B,EAAAA,IAACgC,EAAA,CAAK,UAAU,qBAAqB,MAAO,CAAE,YAAazC,EAAO,OAAA,EAChE,SAAAmC,OAACO,EAAA,CAAY,UAAU,mBACrB,SAAA,CAAAjC,EAAAA,IAAC,MAAA,CAAI,UAAU,+DAA+D,MAAO,CAAE,YAAaT,EAAO,SACzG,SAAAS,EAAAA,IAAC,MAAA,CACC,IAAKe,EAAY,cAAgBmB,EACjC,IAAI,mBACJ,UAAU,6BACV,MAAO,CAAE,OAAQ,uHAAA,CAAwH,CAAA,EAE7I,EACAlC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,MAAO,CAAE,MAAOT,EAAO,IAAA,EAC/D,SAAAwB,EAAY,YAAA,CACf,CAAA,CAAA,CACF,CAAA,CACF,EAGAf,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAAA,CAA0B,EAGzC0B,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAA1B,EAAAA,IAAC,MAAA,CACC,UAAU,yDACV,MAAO,CAAE,gBAAiBT,EAAO,OAAA,EAEhC,SAAAwB,EAAY,YACXf,EAAAA,IAAC,MAAA,CAAI,IAAKe,EAAY,YAAa,IAAKA,EAAY,YAAa,UAAU,WAAA,CAAY,EAEvFjB,EAAeiB,EAAY,IAAI,CAAA,CAAA,EAGnCf,EAAAA,IAAC,MAAA,CACC,SAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAwB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAC1D,SAAAwB,EAAY,YACf,CAAA,CACF,CAAA,EACF,EAEAW,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAA1B,EAAAA,IAAC6B,EAAA,CACC,QAAQ,UACR,UAAU,kDACV,MAAO,CACL,YAAatC,EAAO,QACpB,MAAOA,EAAO,QACd,gBAAiB,aAAA,EAGlB,SAAAwB,EAAY,QAAA,CAAA,EAEff,EAAAA,IAAC,MAAA,CAAI,UAAU,aACb,SAAA0B,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,MAAO,CAAE,MAAOnC,EAAO,WAAa,SAAA,CAAA,KACvEwB,EAAY,UAAY,KAAK,QAAQ,CAAC,CAAA,CAAA,CAC3C,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAGCiB,EAAA,CAAK,UAAU,qBAAqB,MAAO,CAAE,YAAazC,EAAO,OAAA,EAChE,eAAC0C,EAAA,CAAY,UAAU,MACrB,SAAAP,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAA1B,EAAAA,IAAC,MAAA,CAAI,UAAU,mCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,iEACV,MAAO,CAAE,YAAaT,EAAO,OAAA,EAE7B,SAAAS,EAAAA,IAAC,MAAA,CACC,UAAU,2BACV,MAAO,CAAE,gBAAiBT,EAAO,MAAA,CAAO,CAAA,CACzC,CAAA,EAEL,EACAS,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,MAAO,CAAE,MAAOT,EAAO,MAAA,EACzD,SAAAwB,EAAY,cAAA,CACf,CAAA,EACF,EAGAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAA1B,EAAAA,IAAC,MAAA,CAAI,UAAU,uBAAA,CAAwB,EACvCA,EAAAA,IAAC,MAAA,CACC,UAAU,2CACV,MAAO,CAAE,YAAaT,EAAO,OAAA,CAAQ,CAAA,CACtC,EACH,EAGAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAA1B,MAACmC,EAAA,CAAO,UAAU,UAAU,MAAO,CAAE,MAAO5C,EAAO,SAAW,EAC9DS,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,MAAO,CAAE,MAAOT,EAAO,MAAA,EACzD,SAAAwB,EAAY,gBAAA,CACf,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,EAGAW,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAU,SAAA,UAAA,CAAQ,EAC3ES,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAW,SAAAwB,EAAY,QAAA,CAAS,CAAA,EAC5F,EAEAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAU,SAAA,YAAA,CAAU,EAC7ES,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAW,SAAAwB,EAAY,SAAA,CAAU,CAAA,EAC7F,EAEAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAU,SAAA,MAAA,CAAI,EACvES,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAW,SAAAwB,EAAY,IAAA,CAAK,CAAA,EACxF,EAEAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAU,SAAA,kBAAA,CAAgB,EACnFS,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,MAAO,CAAE,MAAOT,EAAO,MAAA,EAAW,SAAAwB,EAAY,YAAA,CAAa,CAAA,CAAA,CAChG,CAAA,EACF,EAGCA,EAAY,SAAW,aACtBf,EAAAA,IAACgC,EAAA,CACC,UAAU,yBACV,MAAO,CAAE,gBAAiBzC,EAAO,OAAA,EAEjC,SAAAmC,EAAAA,KAACO,EAAA,CAAY,UAAU,MACrB,SAAA,CAAAjC,EAAAA,IAAC,KAAA,CAAG,UAAU,gDAAgD,SAAA,mBAAgB,EAE9E0B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,WAAQ,EACpC0B,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAA,KAAGX,EAAY,SAAW,KAAK,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACtF,EAEAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,eAAY,EACxC0B,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAA,KAAGX,EAAY,YAAc,KAAK,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACzF,QAEC,MAAA,CAAI,UAAU,gCACb,SAAAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,QAAK,EAC7C0B,EAAAA,KAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,CAAA,KAAGX,EAAY,MAAQ,KAAK,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CAC/E,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAKHA,EAAY,SAAW,aACtBf,EAAAA,IAACgC,EAAA,CACC,UAAU,yBACV,MAAO,CAAE,gBAAiBzC,EAAO,OAAA,EAEjC,SAAAmC,EAAAA,KAACO,EAAA,CAAY,UAAU,MACrB,SAAA,CAAAjC,EAAAA,IAAC,KAAA,CAAG,UAAU,gDAAgD,SAAA,mBAAgB,EAE9E0B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,WAAQ,EACpC0B,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAA,KAAGX,EAAY,SAAW,KAAK,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACtF,EAEAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,eAAY,EACxC0B,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAA,KAAGX,EAAY,YAAc,KAAK,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACzF,QAEC,MAAA,CAAI,UAAU,gCACb,SAAAW,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAA1B,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,QAAK,EAC7C0B,EAAAA,KAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,CAAA,KAAGX,EAAY,MAAQ,KAAK,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CAC/E,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAKJf,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACb,SAAAA,EAAAA,IAAC6B,EAAA,CACC,UAAU,qDACV,MAAO,CACL,YAAaX,EAAa,GAC1B,MAAOA,EAAa,KACpB,gBAAiB,aAAA,EAGlB,SAAAA,EAAa,KAAA,CAAA,EAElB,EAGCzB,IAAa,UAAYsB,EAAY,SAAW,aAAeA,EAAY,SAAW,aACrFW,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAACC,EAAA,CACC,UAAU,wEACV,MAAO,CAAE,MAAOpC,EAAO,OAAA,EAEvB,SAAA,CAAAS,EAAAA,IAACoC,EAAA,CAAM,UAAU,cAAA,CAAe,EAAE,eAAA,CAAA,CAAA,EAIpCV,EAAAA,KAACC,EAAA,CACC,UAAU,qBACV,MAAO,CACL,gBAAiBpC,EAAO,QACxB,MAAOA,EAAO,KAAA,EAEhB,QAAS,IAAMkB,EAAY,OAAO,EAElC,SAAA,CAAAT,EAAAA,IAACqC,EAAA,CAAc,UAAU,cAAA,CAAe,EAAE,MAAA,CAAA,CAAA,CAE5C,EACF,EAIDtB,EAAY,SAAW,aACtBW,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAA1B,EAAAA,IAAC,MAAA,CAAI,UAAU,gFACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,oBAAoB,aAAC,CAAA,CACvC,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,SAAA,0BAAA,CAAwB,CAAA,EAC7D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4BACV,SAAAP,IAAa,SACV,+CACAA,IAAa,WACb,2BACA,0CAAA,CAEN,CAAA,EACF,EAECA,IAAa,YACZO,EAAAA,IAAC2B,EAAA,CACC,UAAU,cACV,MAAO,CACL,gBAAiBpC,EAAO,QACxB,MAAOA,EAAO,KAAA,EAEhB,QAAS,IAAMkB,EAAY,cAAc,EAC1C,SAAA,aAAA,CAAA,CAED,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ"}