import{c as g,u as v,r as o,j as e,B as c,A as C,C as T,m as i,n as d,g as j,D as S}from"./index-CVqmz7v7.js";import{Q as R}from"./qr-code-BNXnmlXa.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=g("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);function E(){var h,x;const[,m]=v(),[s,f]=o.useState(null),[n,y]=o.useState("");o.useEffect(()=>{const t=new URLSearchParams(window.location.search),a=t.get("transactionId"),l=t.get("qrCode");l&&y(l),a&&N(a)},[]);const N=async t=>{try{const a=await fetch(`/api/transactions/${t}`,{credentials:"include"});if(a.ok){const l=await a.json();f(l.transaction)}}catch(a){console.error("Error fetching transaction details:",a)}},r=t=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(t),b=async()=>{if(navigator.share)try{await navigator.share({title:"Toll Payment Receipt",text:`Toll payment successful - ${r(parseFloat((s==null?void 0:s.amount)||"0"))}`,url:window.location.href})}catch(t){console.log("Error sharing:",t)}else navigator.clipboard.writeText(window.location.href)},w=()=>{var u,p;const t=`
TOLL PAYMENT RECEIPT
===================
Transaction ID: ${s==null?void 0:s.id}
Date: ${new Date(s==null?void 0:s.createdAt).toLocaleString()}
Amount: ${r(parseFloat((s==null?void 0:s.amount)||"0"))}
Toll Gate: ${(u=s==null?void 0:s.metadata)==null?void 0:u.tollGateName}
Vehicle Type: ${(p=s==null?void 0:s.metadata)==null?void 0:p.vehicleType}
QR Code: ${n}
===================
BrillPrime Toll Services
    `,a=document.createElement("a"),l=new Blob([t],{type:"text/plain"});a.href=URL.createObjectURL(l),a.download=`toll-receipt-${s==null?void 0:s.id}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 w-full max-w-md mx-auto",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>m("/toll-payments"),children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-[#131313]",children:"Payment Success"}),e.jsx("div",{className:"w-10"})]})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"w-20 h-20 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-[#131313] mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600",children:"Your toll payment has been processed successfully"})]}),s&&e.jsx(i,{children:e.jsxs(d,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid"}),e.jsx("span",{className:"text-2xl font-bold text-[#4682b4]",children:r(parseFloat(s.amount))})]}),e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Transaction ID"}),e.jsx("span",{className:"font-medium",children:s.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date & Time"}),e.jsx("span",{className:"font-medium",children:new Date(s.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Toll Gate"}),e.jsx("span",{className:"font-medium",children:(h=s.metadata)==null?void 0:h.tollGateName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vehicle Type"}),e.jsx(j,{variant:"secondary",className:"capitalize",children:(x=s.metadata)==null?void 0:x.vehicleType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx(j,{variant:"default",className:"bg-green-100 text-green-800",children:"Completed"})]})]})]})}),n&&e.jsx(i,{children:e.jsxs(d,{className:"p-6 text-center",children:[e.jsx(R,{className:"w-12 h-12 mx-auto mb-4 text-[#4682b4]"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Your Toll Pass QR Code"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Show this QR code at the toll gate for entry"}),e.jsx("div",{className:"bg-gray-100 p-4 rounded-lg font-mono text-sm break-all",children:n})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(c,{onClick:w,variant:"outline",className:"w-full",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Download Receipt"]}),e.jsxs(c,{onClick:b,variant:"outline",className:"w-full",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Share Receipt"]}),e.jsx(c,{onClick:()=>m("/dashboard"),className:"w-full bg-[#4682b4] hover:bg-[#357abd]",children:"Back to Dashboard"})]}),e.jsx(i,{className:"bg-blue-50 border-blue-200",children:e.jsxs(d,{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Keep this QR code ready for toll gate scanning. The QR code is valid for 24 hours from the time of payment."})]})})]})]})}export{E as default};
//# sourceMappingURL=toll-payment-success-BTbHXFT_.js.map
