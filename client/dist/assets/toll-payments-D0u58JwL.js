import{u as O,r as c,j as e,B as f,A as I,I as E,m as d,n as o,g as n,k as V,V as N,ab as A,ac as q,ad as H,ae as B,C as b,L as w,aY as K}from"./index-CPIh2kaR.js";import{L as $}from"./label-HdyYSJzW.js";import{C as F}from"./car-CK56CMyq.js";import{T as Q}from"./ticket-D9iaUnEg.js";function Y(){var g;const[,x]=O(),[i,v]=c.useState("car"),[a,C]=c.useState(null),[l,T]=c.useState(""),[h,k]=c.useState([{id:"TP-2024-0001",tollGateId:"lagos-ibadan-1",vehicleType:"car",amount:600,timestamp:"2024-01-15 14:30",status:"completed",qrCode:"QR123456789"}]),u=[{id:"motorcycle",name:"Motorcycle",icon:"ðŸï¸",description:"2-wheeled vehicles"},{id:"car",name:"Car",icon:"ðŸš—",description:"Private cars & sedans"},{id:"suv",name:"SUV/Bus",icon:"ðŸš™",description:"SUVs, vans & small buses"},{id:"truck",name:"Truck",icon:"ðŸš›",description:"Heavy vehicles & trailers"}],[p,G]=c.useState([{id:"lagos-ibadan-1",name:"Lagos-Ibadan Toll Plaza",location:"Km 20, Lagos-Ibadan Expressway",highway:"Lagos-Ibadan Expressway",distance:18.5,pricePerVehicle:{motorcycle:300,car:600,suv:1e3,truck:1500},operatingHours:"24 hours",isOpen:!0,estimatedTime:"22 mins",paymentMethods:["Cash","Card","Mobile"],trafficStatus:"moderate",queueTime:"5-10 mins"},{id:"abuja-kaduna-1",name:"Abuja-Kaduna Toll Gate",location:"Km 15, Abuja-Kaduna Highway",highway:"Abuja-Kaduna Highway",distance:28.2,pricePerVehicle:{motorcycle:200,car:400,suv:700,truck:1200},operatingHours:"24 hours",isOpen:!0,estimatedTime:"35 mins",paymentMethods:["Cash","Card","Mobile"],trafficStatus:"light",queueTime:"2-5 mins"},{id:"lekki-toll",name:"Lekki Toll Gate",location:"Lekki-Epe Expressway, Lagos",highway:"Lekki-Epe Expressway",distance:12.1,pricePerVehicle:{motorcycle:150,car:300,suv:500,truck:800},operatingHours:"5:00 AM - 11:00 PM",isOpen:!0,estimatedTime:"18 mins",paymentMethods:["Card","Mobile"],trafficStatus:"heavy",queueTime:"15-20 mins"},{id:"kara-bridge",name:"Kara Bridge Toll",location:"Kara, Lagos-Ibadan Expressway",highway:"Lagos-Ibadan Expressway",distance:25.8,pricePerVehicle:{motorcycle:250,car:500,suv:800,truck:1300},operatingHours:"24 hours",isOpen:!1,estimatedTime:"32 mins",paymentMethods:["Cash","Card"],trafficStatus:"light",queueTime:"N/A"}]),j=p.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.highway.toLowerCase().includes(l.toLowerCase())||s.location.toLowerCase().includes(l.toLowerCase())),m=s=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(s),S=s=>{C(s)},P=async()=>{if(a){const s=a==null?void 0:a.pricePerVehicle[i];try{const t=await fetch("/api/toll/payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tollGateId:a.id,vehicleType:i,amount:s,paymentMethod:"wallet"}),credentials:"include"});if(t.ok){const r=await t.json();if(r.success){const L={id:r.transaction.id,tollGateId:a.id,vehicleType:i,amount:s||0,timestamp:new Date().toISOString(),status:"completed",qrCode:r.qrCode,paymentMethod:"wallet",reference:r.transaction.reference};k(M=>[...M,L]),x(`/toll-payment-success?transactionId=${r.transaction.id}&qrCode=${r.qrCode}`)}else setModalData({isOpen:!0,type:"error",title:"Payment Failed",message:r.message||"An error occurred during payment processing."})}else console.error("Failed to process toll payment"),setModalData({isOpen:!0,type:"error",title:"Payment Error",message:"Server error. Please try again later."})}catch(t){console.error("Error processing toll payment:",t),setModalData({isOpen:!0,type:"error",title:"Network Error",message:"Failed to connect. Check your internet connection."})}}},y=s=>{switch(s){case"light":return"bg-green-100 text-green-800";case"moderate":return"bg-yellow-100 text-yellow-800";case"heavy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=s=>{switch(s){case"completed":return e.jsx(b,{className:"w-4 h-4 text-green-500"});case"pending":return e.jsx(N,{className:"w-4 h-4 text-yellow-500"});case"failed":return e.jsx(w,{className:"w-4 h-4 text-red-500"});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl mx-auto px-2 sm:px-4",children:[e.jsxs("div",{className:"bg-white shadow-sm border-b",children:[e.jsx("div",{className:"flex items-center justify-between p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>x("/consumer-home"),children:e.jsx(I,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-[#131313]",children:"Electronic Toll Payments"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pay toll fees in advance"})]})]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx(E,{placeholder:"Search toll gates or highways...",value:l,onChange:s=>T(s.target.value),className:"border-[#4682b4]/30 focus:border-[#4682b4]"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[h.length>0&&e.jsx(d,{children:e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-[#131313] mb-3",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-3",children:h.slice(0,3).map(s=>{const t=p.find(r=>r.id===s.tollGateId);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[D(s.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-600",children:s.timestamp})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-sm",children:m(s.amount)}),e.jsx(n,{variant:"secondary",className:`text-xs ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})]})]},s.id)})})]})}),e.jsx(d,{children:e.jsxs(o,{className:"p-4",children:[e.jsx($,{className:"text-sm font-medium text-[#131313] mb-3 block",children:"Select Vehicle Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map(s=>e.jsxs("button",{onClick:()=>v(s.id),className:`p-3 rounded-lg border text-left transition-colors ${i===s.id?"border-[#4682b4] bg-[#4682b4]/5":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsx("span",{className:"font-medium text-sm",children:s.name})]}),e.jsx("p",{className:"text-xs text-gray-600",children:s.description})]},s.id))})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-semibold text-[#131313]",children:"Available Toll Gates"}),j.map(s=>e.jsx(d,{className:`cursor-pointer transition-all hover:shadow-md ${(a==null?void 0:a.id)===s.id?"ring-2 ring-[#4682b4] ring-opacity-50":""} ${s.isOpen?"":"opacity-60"}`,onClick:()=>s.isOpen&&S(s),children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-[#131313] mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.location}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(V,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.distance," km away"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"w-3 h-3"}),e.jsx("span",{children:s.estimatedTime})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(n,{variant:s.isOpen?"default":"secondary",children:s.isOpen?"Open":"Closed"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{className:y(s.trafficStatus),children:[s.trafficStatus," traffic"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Queue: ",s.queueTime]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-[#4682b4]",children:m(s.pricePerVehicle[i])}),e.jsx("p",{className:"text-sm text-gray-600",children:s.operatingHours})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Payment:"}),s.paymentMethods.map(t=>e.jsx(n,{variant:"outline",className:"text-xs",children:t},t))]})]})})},s.id))]}),a&&e.jsx(d,{className:"border-[#4682b4]",children:e.jsxs(o,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-[#131313] mb-4",children:"Purchase Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Toll Gate:"}),e.jsx("span",{className:"font-medium",children:a==null?void 0:a.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vehicle Type:"}),e.jsx("span",{className:"font-medium",children:(g=u.find(s=>s.id===i))==null?void 0:g.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Distance:"}),e.jsxs("span",{className:"font-medium",children:[a==null?void 0:a.distance," km"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Traffic:"}),e.jsxs(n,{className:y((a==null?void 0:a.trafficStatus)||"light"),children:[a==null?void 0:a.trafficStatus," traffic"]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total Amount:"}),e.jsx("span",{className:"text-[#4682b4]",children:a&&m(a.pricePerVehicle[i])})]})]})]})}),j.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No toll gates found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or check back later"})]})]}),a&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t",children:e.jsxs(f,{className:"w-full h-12 bg-[#4682b4] hover:bg-[#0b1a51]",onClick:P,children:[e.jsx(Q,{className:"w-5 h-5 mr-2"}),"Purchase Toll Pass"]})}),e.jsx(A,{open:modalData.isOpen,onOpenChange:s=>setModalData({...modalData,isOpen:s}),children:e.jsxs(q,{className:"sm:max-w-md",children:[e.jsx(H,{children:e.jsx(B,{children:modalData.type==="success"?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(b,{className:"w-6 h-6 mr-2"})," ",modalData.title]}):e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(w,{className:"w-6 h-6 mr-2"})," ",modalData.title]})})}),e.jsx(K,{children:modalData.message})]})})]})}export{Y as default};
//# sourceMappingURL=toll-payments-D0u58JwL.js.map
