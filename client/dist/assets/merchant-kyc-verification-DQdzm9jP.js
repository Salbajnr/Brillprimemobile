import{r as b,j as e,a7 as I,b as L,e as k,f as U,T as G,o as J,p as P,q as E,m as c,s as h,t as j,a3 as z,n as d,g as F,V as S,C as g,L as R,F as D,B as T,aM as H,I as m,af as Q,aO as _,a1 as W}from"./index-CPIh2kaR.js";import{a as A}from"./queryClient-CN8qbYBa.js";import{L as l}from"./label-HdyYSJzW.js";import{S as X,a as Z,b as $,c as ee,d as y}from"./select-DaEbXPmH.js";import{B as se}from"./building-Bn7Et3U8.js";import{U as ae}from"./upload-NXx3Rohn.js";import"./check-D6cbRviz.js";const f=b.forwardRef(({children:p,className:x,variant:t="default",...n},u)=>e.jsx("div",{ref:u,role:"alert",className:I("relative w-full rounded-lg border p-4",t==="default"&&"bg-blue-50 border-blue-200 text-blue-800",t==="destructive"&&"bg-red-50 border-red-200 text-red-800",x),...n,children:p}));f.displayName="Alert";const v=b.forwardRef(({children:p,className:x,...t},n)=>e.jsx("div",{ref:n,className:I("text-sm [&_p]:leading-relaxed",x),...t,children:p}));v.displayName="AlertDescription";function oe(){const[p,x]=b.useState("status"),[t,n]=b.useState({businessRegistrationNumber:"",taxIdentificationNumber:"",businessType:"",businessAddress:"",businessPhone:"",businessEmail:"",ownerFullName:"",ownerNationalId:"",bankAccountNumber:"",bankName:"",bankAccountName:""}),[u,q]=b.useState({}),[te,re]=b.useState(0),O=L(),{data:r}=k({queryKey:["merchant","kyc-status"],queryFn:async()=>(await A("GET","/api/merchant/kyc/status")).json()}),{data:i}=k({queryKey:["merchant","kyc-requirements"],queryFn:async()=>(await A("GET","/api/merchant/kyc/requirements")).json()}),w=U({mutationFn:async s=>{const a=await fetch("/api/merchant/kyc/submit",{method:"POST",credentials:"include",body:s});if(!a.ok)throw new Error("Failed to submit KYC documents");return a.json()},onSuccess:()=>{O.invalidateQueries({queryKey:["merchant","kyc-status"]}),x("status")}}),Y=(s,a)=>{q(o=>({...o,[s]:a}))},B=async s=>{s.preventDefault();const a=new FormData;a.append("kycData",JSON.stringify(t)),Object.entries(u).forEach(([o,N])=>{a.append(o,N)}),w.mutate(a)},K=s=>{switch(s){case"APPROVED":return e.jsx(g,{className:"h-5 w-5 text-green-600"});case"REJECTED":return e.jsx(R,{className:"h-5 w-5 text-red-600"});case"PENDING":return e.jsx(S,{className:"h-5 w-5 text-yellow-600"});default:return e.jsx(D,{className:"h-5 w-5 text-gray-400"})}},V=s=>{switch(s){case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"PENDING":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},C=()=>{const s=Object.keys(t).length,a=Object.values(t).filter(M=>M.trim()!=="").length,o=Object.keys(u).length,N=(i==null?void 0:i.requiredDocuments.length)||0;return Math.round((a+o)/(s+N)*100)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#0b1a51] mb-2",children:"Merchant KYC Verification"}),e.jsx("p",{className:"text-gray-600",children:"Complete your identity verification to unlock all merchant features"})]}),e.jsxs(G,{value:p,onValueChange:x,children:[e.jsxs(J,{className:"grid w-full grid-cols-3",children:[e.jsx(P,{value:"status",children:"Status"}),e.jsx(P,{value:"submit",children:"Submit Documents"}),e.jsx(P,{value:"requirements",children:"Requirements"})]}),e.jsx(E,{value:"status",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{children:"Verification Status"})]})}),e.jsx(d,{children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[K(r.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Status"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted on ",new Date(r.submittedAt).toLocaleDateString()]})]})]}),e.jsx(F,{className:V(r.status),children:r.status})]}),r.status==="PENDING"&&e.jsxs(f,{children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx(v,{children:"Your KYC documents are under review. This typically takes 2-3 business days."})]}),r.status==="APPROVED"&&e.jsxs(f,{className:"border-green-200 bg-green-50",children:[e.jsx(g,{className:"h-4 w-4 text-green-600"}),e.jsx(v,{className:"text-green-800",children:"Congratulations! Your KYC verification is complete. You now have access to all merchant features."})]}),r.status==="REJECTED"&&e.jsxs(f,{className:"border-red-200 bg-red-50",children:[e.jsx(R,{className:"h-4 w-4 text-red-600"}),e.jsxs(v,{className:"text-red-800",children:["Your KYC submission was rejected. ",r.rejectionReason,r.reviewNotes&&e.jsxs("div",{className:"mt-2",children:[e.jsx("strong",{children:"Review Notes:"})," ",r.reviewNotes]})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No KYC submission found"}),e.jsx(T,{onClick:()=>x("submit"),className:"bg-[#4682b4] hover:bg-[#0b1a51]",children:"Start KYC Process"})]})})]})}),e.jsxs(E,{value:"submit",className:"space-y-4",children:[(!r||r.status==="REJECTED")&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(j,{children:"Completion Progress"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[C(),"%"]})]}),e.jsx(H,{value:C(),className:"w-full"})]})})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:"Business Information"})]})}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"businessRegistrationNumber",children:"Business Registration Number *"}),e.jsx(m,{id:"businessRegistrationNumber",value:t.businessRegistrationNumber,onChange:s=>n(a=>({...a,businessRegistrationNumber:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"taxIdentificationNumber",children:"Tax Identification Number *"}),e.jsx(m,{id:"taxIdentificationNumber",value:t.taxIdentificationNumber,onChange:s=>n(a=>({...a,taxIdentificationNumber:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"businessType",children:"Business Type *"}),e.jsxs(X,{value:t.businessType,onValueChange:s=>n(a=>({...a,businessType:s})),children:[e.jsx(Z,{children:e.jsx($,{placeholder:"Select business type"})}),e.jsxs(ee,{children:[e.jsx(y,{value:"SOLE_PROPRIETORSHIP",children:"Sole Proprietorship"}),e.jsx(y,{value:"PARTNERSHIP",children:"Partnership"}),e.jsx(y,{value:"LIMITED_COMPANY",children:"Limited Company"}),e.jsx(y,{value:"CORPORATION",children:"Corporation"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"businessPhone",children:"Business Phone *"}),e.jsx(m,{id:"businessPhone",value:t.businessPhone,onChange:s=>n(a=>({...a,businessPhone:s.target.value})),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"businessAddress",children:"Business Address *"}),e.jsx(Q,{id:"businessAddress",value:t.businessAddress,onChange:s=>n(a=>({...a,businessAddress:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"businessEmail",children:"Business Email *"}),e.jsx(m,{id:"businessEmail",type:"email",value:t.businessEmail,onChange:s=>n(a=>({...a,businessEmail:s.target.value})),required:!0})]})]})})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-5 w-5"}),e.jsx("span",{children:"Owner Information"})]})}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"ownerFullName",children:"Full Name *"}),e.jsx(m,{id:"ownerFullName",value:t.ownerFullName,onChange:s=>n(a=>({...a,ownerFullName:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"ownerNationalId",children:"National ID Number *"}),e.jsx(m,{id:"ownerNationalId",value:t.ownerNationalId,onChange:s=>n(a=>({...a,ownerNationalId:s.target.value})),required:!0})]})]})})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5"}),e.jsx("span",{children:"Banking Information"})]})}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"bankName",children:"Bank Name *"}),e.jsx(m,{id:"bankName",value:t.bankName,onChange:s=>n(a=>({...a,bankName:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"bankAccountNumber",children:"Account Number *"}),e.jsx(m,{id:"bankAccountNumber",value:t.bankAccountNumber,onChange:s=>n(a=>({...a,bankAccountNumber:s.target.value})),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"bankAccountName",children:"Account Name *"}),e.jsx(m,{id:"bankAccountName",value:t.bankAccountName,onChange:s=>n(a=>({...a,bankAccountName:s.target.value})),required:!0})]})]})})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Required Documents"})]})}),e.jsx(d,{className:"space-y-4",children:i==null?void 0:i.requiredDocuments.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Formats: ",s.formats.join(", ")," | Max size: ",s.maxSize]})]}),e.jsx(F,{variant:u[s.type]?"default":"secondary",children:u[s.type]?"Uploaded":"Required"})]}),e.jsx("input",{type:"file",accept:s.formats.map(a=>a==="PDF"?".pdf":".jpg,.jpeg,.png").join(","),onChange:a=>{var N;const o=(N=a.target.files)==null?void 0:N[0];o&&Y(s.type,o)},className:"w-full"}),u[s.type]&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ ",u[s.type].name]})]},s.type))})]}),e.jsx("div",{className:"flex justify-end space-x-4",children:e.jsx(T,{type:"submit",disabled:w.isPending||C()<100,className:"bg-[#4682b4] hover:bg-[#0b1a51]",children:w.isPending?"Submitting...":"Submit KYC Documents"})})]})]}),r&&r.status==="PENDING"&&e.jsx(c,{children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(S,{className:"h-12 w-12 text-yellow-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"KYC Under Review"}),e.jsx("p",{className:"text-gray-600",children:"Your documents have been submitted and are currently under review. You'll be notified once the review is complete."})]})}),r&&r.status==="APPROVED"&&e.jsx(c,{children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"KYC Verified"}),e.jsx("p",{className:"text-gray-600",children:"Your identity has been successfully verified. You now have access to all merchant features."})]})})]}),e.jsx(E,{value:"requirements",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(j,{children:"KYC Requirements & Benefits"})}),e.jsxs(d,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Required Documents"}),e.jsx("div",{className:"space-y-3",children:i==null?void 0:i.requiredDocuments.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg",children:[e.jsx(D,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Accepted formats: ",s.formats.join(", ")," | Maximum size: ",s.maxSize]})]})]},s.type))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Processing Time"}),e.jsx("p",{className:"text-gray-600",children:i==null?void 0:i.processingTime})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Verification Benefits"}),e.jsx("ul",{className:"space-y-2",children:i==null?void 0:i.benefits.map((s,a)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:s})]},a))})]})]})]})})]})]})}export{oe as default};
//# sourceMappingURL=merchant-kyc-verification-DQdzm9jP.js.map
