import{r as c,R as wr,a as de,u as xi,b as gi,c as Ft}from"./router-D1VAICW1.js";import{r as yi,a as Sr,g as Cr}from"./vendor-DgTrhVr3.js";import{H as vi,U as Ze,a as Ge,D as Qe,S as bi,M as ji,b as se,c as Er,T as ue,C as Rr,d as Ni,L as wi,A as Ne,e as Rt,f as kr,g as Si,h as Fs,i as kt,E as et,X as Ve,F as Tr,R as be,j as Ci,k as ge,l as je,P as Ls,m as ft,n as Us,o as ys,p as Lt,q as es,r as Ar,s as ts,W as Ei,t as Bs,u as Ri,N as ki,B as Ti,v as Ai,w as Oi,x as _i,y as Nt,z as $s,G as Di,I as Pi,J as Ii,K as Mi,O as Fi}from"./ui-DI9arCqY.js";var Ut={exports:{}},Fe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs;function Li(){if(qs)return Fe;qs=1;var t=yi(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(o,h,p){var u,m={},f=null,S=null;p!==void 0&&(f=""+p),h.key!==void 0&&(f=""+h.key),h.ref!==void 0&&(S=h.ref);for(u in h)n.call(h,u)&&!a.hasOwnProperty(u)&&(m[u]=h[u]);if(o&&o.defaultProps)for(u in h=o.defaultProps,h)m[u]===void 0&&(m[u]=h[u]);return{$$typeof:s,type:o,key:f,ref:S,props:m,_owner:i.current}}return Fe.Fragment=r,Fe.jsx=l,Fe.jsxs=l,Fe}var Vs;function Ui(){return Vs||(Vs=1,Ut.exports=Li()),Ut.exports}var e=Ui(),it={},zs;function Bi(){if(zs)return it;zs=1;var t=Sr();return it.createRoot=t.createRoot,it.hydrateRoot=t.hydrateRoot,it}var $i=Bi();const qi=Cr($i);var Pe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},we=typeof window>"u"||"Deno"in globalThis;function G(){}function Vi(t,s){return typeof t=="function"?t(s):t}function ss(t){return typeof t=="number"&&t>=0&&t!==1/0}function Or(t,s){return Math.max(t+(s||0)-Date.now(),0)}function ye(t,s){return typeof t=="function"?t(s):t}function Z(t,s){return typeof t=="function"?t(s):t}function Ws(t,s){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:l,stale:o}=t;if(l){if(n){if(s.queryHash!==vs(l,s.options))return!1}else if(!Ye(s.queryKey,l))return!1}if(r!=="all"){const h=s.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||i&&i!==s.state.fetchStatus||a&&!a(s))}function Ks(t,s){const{exact:r,status:n,predicate:i,mutationKey:a}=t;if(a){if(!s.options.mutationKey)return!1;if(r){if(Se(s.options.mutationKey)!==Se(a))return!1}else if(!Ye(s.options.mutationKey,a))return!1}return!(n&&s.state.status!==n||i&&!i(s))}function vs(t,s){return(s?.queryKeyHashFn||Se)(t)}function Se(t){return JSON.stringify(t,(s,r)=>rs(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Ye(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>Ye(t[r],s[r])):!1}function _r(t,s){if(t===s)return t;const r=Hs(t)&&Hs(s);if(r||rs(t)&&rs(s)){const n=r?t:Object.keys(t),i=n.length,a=r?s:Object.keys(s),l=a.length,o=r?[]:{},h=new Set(n);let p=0;for(let u=0;u<l;u++){const m=r?u:a[u];(!r&&h.has(m)||r)&&t[m]===void 0&&s[m]===void 0?(o[m]=void 0,p++):(o[m]=_r(t[m],s[m]),o[m]===t[m]&&t[m]!==void 0&&p++)}return i===l&&p===i?t:o}return s}function wt(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Hs(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rs(t){if(!Gs(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Gs(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Gs(t){return Object.prototype.toString.call(t)==="[object Object]"}function zi(t){return new Promise(s=>{setTimeout(s,t)})}function ns(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?_r(t,s):s}function Wi(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function Ki(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var bs=Symbol();function Dr(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===bs?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Pr(t,s){return typeof t=="function"?t(...s):!!t}var Hi=class extends Pe{#t;#e;#s;constructor(){super(),this.#s=t=>{if(!we&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},js=new Hi,Gi=class extends Pe{#t=!0;#e;#s;constructor(){super(),this.#s=t=>{if(!we&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#t}},St=new Gi;function is(){let t,s;const r=new Promise((i,a)=>{t=i,s=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),s(i)},r}function Qi(t){return Math.min(1e3*2**t,3e4)}function Ir(t){return(t??"online")==="online"?St.isOnline():!0}var Mr=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Fr(t){let s=!1,r=0,n;const i=is(),a=()=>i.status!=="pending",l=x=>{a()||(f(new Mr(x)),t.abort?.())},o=()=>{s=!0},h=()=>{s=!1},p=()=>js.isFocused()&&(t.networkMode==="always"||St.isOnline())&&t.canRun(),u=()=>Ir(t.networkMode)&&t.canRun(),m=x=>{a()||(n?.(),i.resolve(x))},f=x=>{a()||(n?.(),i.reject(x))},S=()=>new Promise(x=>{n=g=>{(a()||p())&&x(g)},t.onPause?.()}).then(()=>{n=void 0,a()||t.onContinue?.()}),E=()=>{if(a())return;let x;const g=r===0?t.initialPromise:void 0;try{x=g??t.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(m).catch(w=>{if(a())return;const k=t.retry??(we?0:3),T=t.retryDelay??Qi,R=typeof T=="function"?T(r,w):T,v=k===!0||typeof k=="number"&&r<k||typeof k=="function"&&k(r,w);if(s||!v){f(w);return}r++,t.onFail?.(r,w),zi(R).then(()=>p()?void 0:S()).then(()=>{s?f(w):E()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(n?.(),i),cancelRetry:o,continueRetry:h,canStart:u,start:()=>(u()?E():S().then(E),i)}}var Yi=t=>setTimeout(t,0);function Ji(){let t=[],s=0,r=o=>{o()},n=o=>{o()},i=Yi;const a=o=>{s?t.push(o):i(()=>{r(o)})},l=()=>{const o=t;t=[],o.length&&i(()=>{n(()=>{o.forEach(h=>{r(h)})})})};return{batch:o=>{let h;s++;try{h=o()}finally{s--,s||l()}return h},batchCalls:o=>(...h)=>{a(()=>{o(...h)})},schedule:a,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var q=Ji(),Lr=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ss(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(we?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},Xi=class extends Lr{#t;#e;#s;#r;#n;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#s=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=Zi(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=ns(this.state.data,t,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#i({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#n?.promise;return this.#n?.cancel(t),s?s.then(G).catch(G):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>Z(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ye(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Or(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const o=this.observers.find(h=>h.options.queryFn);o&&this.setOptions(o.options)}const r=new AbortController,n=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},i=()=>{const o=Dr(this.options,s),p=(()=>{const u={client:this.#r,queryKey:this.queryKey,meta:this.meta};return n(u),u})();return this.#o=!1,this.options.persister?this.options.persister(o,p,this):o(p)},l=(()=>{const o={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};return n(o),o})();this.options.behavior?.onFetch(l,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#i({type:"fetch",meta:l.fetchOptions?.meta}),this.#n=Fr({initialPromise:s?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onFail:(o,h)=>{this.#i({type:"failed",failureCount:o,error:h})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const o=await this.#n.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#s.config.onSuccess?.(o,this),this.#s.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof Mr){if(o.silent)return this.#n.promise;if(o.revert){if(this.setState({...this.#e,fetchStatus:"idle"}),this.state.data===void 0)throw o;return this.state.data}}throw this.#i({type:"error",error:o}),this.#s.config.onError?.(o,this),this.#s.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#i(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ur(r.data,this.options),fetchMeta:t.meta??null};case"success":const n={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=t.manual?n:void 0,n;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),q.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function Ur(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ir(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Zi(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ea=class extends Pe{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,s,r){const n=s.queryKey,i=s.queryHash??vs(n,s);let a=this.get(i);return a||(a=new Xi({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(a)),a}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#t.get(t.queryHash);s&&(t.destroy(),s===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){q.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ws(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Ws(t,r)):s}notify(t){q.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){q.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){q.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ta=class extends Lr{#t;#e;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||Br(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})};this.#s=Fr({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(i,a)=>{this.#r({type:"failed",failureCount:i,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#s.canStart();try{if(r)s();else{this.#r({type:"pending",variables:t,isPaused:n}),await this.#e.config.onMutate?.(t,this);const a=await this.options.onMutate?.(t);a!==this.state.context&&this.#r({type:"pending",context:a,variables:t,isPaused:n})}const i=await this.#s.start();return await this.#e.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,t,this.state.context,this),await this.options.onError?.(i,t,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,t,this.state.context),i}finally{this.#r({type:"error",error:i})}}finally{this.#e.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),q.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function Br(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sa=class extends Pe{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(t,s,r){const n=new ta({mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){this.#t.add(t);const s=at(t);if(typeof s=="string"){const r=this.#e.get(s);r?r.push(t):this.#e.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const s=at(t);if(typeof s=="string"){const r=this.#e.get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#e.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=at(t);if(typeof s=="string"){const n=this.#e.get(s)?.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=at(t);return typeof s=="string"?this.#e.get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){q.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ks(s,r))}findAll(t={}){return this.getAll().filter(s=>Ks(t,s))}notify(t){q.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return q.batch(()=>Promise.all(t.map(s=>s.continue().catch(G))))}};function at(t){return t.options.scope?.id}function Qs(t){return{onFetch:(s,r)=>{const n=s.options,i=s.fetchOptions?.meta?.fetchMore?.direction,a=s.state.data?.pages||[],l=s.state.data?.pageParams||[];let o={pages:[],pageParams:[]},h=0;const p=async()=>{let u=!1;const m=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},f=Dr(s.options,s.fetchOptions),S=async(E,x,g)=>{if(u)return Promise.reject();if(x==null&&E.pages.length)return Promise.resolve(E);const k=(()=>{const D={client:s.client,queryKey:s.queryKey,pageParam:x,direction:g?"backward":"forward",meta:s.options.meta};return m(D),D})(),T=await f(k),{maxPages:R}=s.options,v=g?Ki:Wi;return{pages:v(E.pages,T,R),pageParams:v(E.pageParams,x,R)}};if(i&&a.length){const E=i==="backward",x=E?ra:Ys,g={pages:a,pageParams:l},w=x(n,g);o=await S(g,w,E)}else{const E=t??a.length;do{const x=h===0?l[0]??n.initialPageParam:Ys(n,o);if(h>0&&x==null)break;o=await S(o,x),h++}while(h<E)}return o};s.options.persister?s.fetchFn=()=>s.options.persister?.(p,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=p}}}function Ys(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function ra(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var na=class{#t;#e;#s;#r;#n;#a;#o;#i;constructor(t={}){this.#t=t.queryCache||new ea,this.#e=t.mutationCache||new sa,this.#s=t.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=js.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#i=St.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#t.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#t.build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(ye(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),a=this.#t.get(n.queryHash)?.state.data,l=Vi(s,a);if(l!==void 0)return this.#t.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,s,r){return q.batch(()=>this.#t.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#t.get(s.queryHash)?.state}removeQueries(t){const s=this.#t;q.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#t;return q.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=q.batch(()=>this.#t.findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(G).catch(G)}invalidateQueries(t,s={}){return q.batch(()=>(this.#t.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=q.batch(()=>this.#t.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(G)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(G)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#t.build(this,s);return r.isStaleByTime(ye(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(G).catch(G)}fetchInfiniteQuery(t){return t.behavior=Qs(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(G).catch(G)}ensureInfiniteQueryData(t){return t.behavior=Qs(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return St.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#r.set(Se(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(n=>{Ye(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){this.#n.set(Se(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#n.values()],r={};return s.forEach(n=>{Ye(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=vs(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===bs&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},ia=class extends Pe{constructor(t,s){super(),this.options=s,this.#t=t,this.#i=null,this.#o=is(),this.bindMethods(),this.setOptions(s)}#t;#e=void 0;#s=void 0;#r=void 0;#n;#a;#o;#i;#p;#h;#m;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Js(this.#e,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return as(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return as(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#j(),this.#e.removeObserver(this)}setOptions(t){const s=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Z(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),s._defaulted&&!wt(this.options,s)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&Xs(this.#e,r,this.options,s)&&this.#u(),this.updateResult(),n&&(this.#e!==r||Z(this.options.enabled,this.#e)!==Z(s.enabled,this.#e)||ye(this.options.staleTime,this.#e)!==ye(s.staleTime,this.#e))&&this.#x();const i=this.#g();n&&(this.#e!==r||Z(this.options.enabled,this.#e)!==Z(s.enabled,this.#e)||i!==this.#l)&&this.#y(i)}getOptimisticResult(t){const s=this.#t.getQueryCache().build(this.#t,t),r=this.createResult(s,t);return oa(this,r)&&(this.#r=r,this.#a=this.options,this.#n=this.#e.state),r}getCurrentResult(){return this.#r}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#t.defaultQueryOptions(t),r=this.#t.getQueryCache().build(this.#t,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(t){this.#N();let s=this.#e.fetch(this.options,t);return t?.throwOnError||(s=s.catch(G)),s}#x(){this.#b();const t=ye(this.options.staleTime,this.#e);if(we||this.#r.isStale||!ss(t))return;const r=Or(this.#r.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(t){this.#j(),this.#l=t,!(we||Z(this.options.enabled,this.#e)===!1||!ss(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||js.isFocused())&&this.#u()},this.#l))}#v(){this.#x(),this.#y(this.#g())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#e,n=this.options,i=this.#r,a=this.#n,l=this.#a,h=t!==r?t.state:this.#s,{state:p}=t;let u={...p},m=!1,f;if(s._optimisticResults){const b=this.hasListeners(),P=!b&&Js(t,s),N=b&&Xs(t,r,s,n);(P||N)&&(u={...u,...Ur(p.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:S,errorUpdatedAt:E,status:x}=u;f=u.data;let g=!1;if(s.placeholderData!==void 0&&f===void 0&&x==="pending"){let b;i?.isPlaceholderData&&s.placeholderData===l?.placeholderData?(b=i.data,g=!0):b=typeof s.placeholderData=="function"?s.placeholderData(this.#m?.state.data,this.#m):s.placeholderData,b!==void 0&&(x="success",f=ns(i?.data,b,s),m=!0)}if(s.select&&f!==void 0&&!g)if(i&&f===a?.data&&s.select===this.#p)f=this.#h;else try{this.#p=s.select,f=s.select(f),f=ns(i?.data,f,s),this.#h=f,this.#i=null}catch(b){this.#i=b}this.#i&&(S=this.#i,f=this.#h,E=Date.now(),x="error");const w=u.fetchStatus==="fetching",k=x==="pending",T=x==="error",R=k&&w,v=f!==void 0,O={status:x,fetchStatus:u.fetchStatus,isPending:k,isSuccess:x==="success",isError:T,isInitialLoading:R,isLoading:R,data:f,dataUpdatedAt:u.dataUpdatedAt,error:S,errorUpdatedAt:E,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:w,isRefetching:w&&!k,isLoadingError:T&&!v,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&v,isStale:Ns(t,s),refetch:this.refetch,promise:this.#o,isEnabled:Z(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const b=_=>{O.status==="error"?_.reject(O.error):O.data!==void 0&&_.resolve(O.data)},P=()=>{const _=this.#o=O.promise=is();b(_)},N=this.#o;switch(N.status){case"pending":t.queryHash===r.queryHash&&b(N);break;case"fulfilled":(O.status==="error"||O.data!==N.value)&&P();break;case"rejected":(O.status!=="error"||O.error!==N.reason)&&P();break}}return O}updateResult(){const t=this.#r,s=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#a=this.options,this.#n.data!==void 0&&(this.#m=this.#e),wt(s,t))return;this.#r=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#f.size)return!0;const a=new Set(i??this.#f);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const o=l;return this.#r[o]!==t[o]&&a.has(o)})};this.#w({listeners:r()})}#N(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;const s=this.#e;this.#e=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(t){q.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function aa(t,s){return Z(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Js(t,s){return aa(t,s)||t.state.data!==void 0&&as(t,s,s.refetchOnMount)}function as(t,s,r){if(Z(s.enabled,t)!==!1&&ye(s.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Ns(t,s)}return!1}function Xs(t,s,r,n){return(t!==s||Z(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Ns(t,r)}function Ns(t,s){return Z(s.enabled,t)!==!1&&t.isStaleByTime(ye(s.staleTime,t))}function oa(t,s){return!wt(t.getCurrentResult(),s)}var la=class extends Pe{#t;#e=void 0;#s;#r;constructor(s,r){super(),this.#t=s,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#t.defaultMutationOptions(s),wt(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&Se(r.mutationKey)!==Se(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#n(),this.#a(s)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#a()}mutate(s,r){return this.#r=r,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(s)}#n(){const s=this.#s?.state??Br();this.#e={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#a(s){q.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;s?.type==="success"?(this.#r.onSuccess?.(s.data,r,n),this.#r.onSettled?.(s.data,null,r,n)):s?.type==="error"&&(this.#r.onError?.(s.error,r,n),this.#r.onSettled?.(void 0,s.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},$r=c.createContext(void 0),tt=t=>{const s=c.useContext($r);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},ca=({client:t,children:s})=>(c.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx($r.Provider,{value:t,children:s})),qr=c.createContext(!1),da=()=>c.useContext(qr);qr.Provider;function ua(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ha=c.createContext(ua()),ma=()=>c.useContext(ha),fa=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},pa=t=>{c.useEffect(()=>{t.clearReset()},[t])},xa=({result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:i})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||Pr(r,[t.error,n])),ga=t=>{if(t.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>s(r(...n)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ya=(t,s)=>t.isLoading&&t.isFetching&&!s,va=(t,s)=>t?.suspense&&s.isPending,Zs=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function ba(t,s,r){const n=da(),i=ma(),a=tt(),l=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=n?"isRestoring":"optimistic",ga(l),fa(l,i),pa(i);const o=!a.getQueryCache().get(l.queryHash),[h]=c.useState(()=>new s(a,l)),p=h.getOptimisticResult(l),u=!n&&t.subscribed!==!1;if(c.useSyncExternalStore(c.useCallback(m=>{const f=u?h.subscribe(q.batchCalls(m)):G;return h.updateResult(),f},[h,u]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),c.useEffect(()=>{h.setOptions(l)},[l,h]),va(l,p))throw Zs(l,h,i);if(xa({result:p,errorResetBoundary:i,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw p.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,p),l.experimental_prefetchInRender&&!we&&ya(p,n)&&(o?Zs(l,h,i):a.getQueryCache().get(l.queryHash)?.promise)?.catch(G).finally(()=>{h.updateResult()}),l.notifyOnChangeProps?p:h.trackResult(p)}function Te(t,s){return ba(t,ia)}function ze(t,s){const r=tt(),[n]=c.useState(()=>new la(r,t));c.useEffect(()=>{n.setOptions(t)},[n,t]);const i=c.useSyncExternalStore(c.useCallback(l=>n.subscribe(q.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=c.useCallback((l,o)=>{n.mutate(l,o).catch(G)},[n]);if(i.error&&Pr(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const ja=1,Na=1e6;let Bt=0;function wa(){return Bt=(Bt+1)%Number.MAX_SAFE_INTEGER,Bt.toString()}const $t=new Map,er=t=>{if($t.has(t))return;const s=setTimeout(()=>{$t.delete(t),We({type:"REMOVE_TOAST",toastId:t})},Na);$t.set(t,s)},Sa=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,ja)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?er(r):t.toasts.forEach(n=>{er(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},pt=[];let xt={toasts:[]};function We(t){xt=Sa(xt,t),pt.forEach(s=>{s(xt)})}function Ca({...t}){const s=wa(),r=i=>We({type:"UPDATE_TOAST",toast:{...i,id:s}}),n=()=>We({type:"DISMISS_TOAST",toastId:s});return We({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||n()}}}),{id:s,dismiss:n,update:r}}function Tt(){const[t,s]=c.useState(xt);return c.useEffect(()=>(pt.push(s),()=>{const r=pt.indexOf(s);r>-1&&pt.splice(r,1)}),[t]),{...t,toast:Ca,dismiss:r=>We({type:"DISMISS_TOAST",toastId:r})}}function Ea(){const{toasts:t}=Tt();return e.jsx("div",{className:"fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",children:t.map(({id:s,title:r,description:n,action:i,...a})=>e.jsxs("div",{className:"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",...a,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx("div",{className:"text-sm font-semibold",children:r}),n&&e.jsx("div",{className:"text-sm opacity-90",children:n})]}),i]},s))})}const Vr=c.createContext(void 0);function Ra({children:t}){const[s,r]=c.useState(null),[n,i]=c.useState(!0);c.useEffect(()=>{if(!window.location.hostname.startsWith("admin.")){i(!1);return}const p=localStorage.getItem("adminToken"),u=localStorage.getItem("adminUser");if(p&&u)try{const m=JSON.parse(u);r(m)}catch(m){console.error("Failed to parse admin user data:",m),localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser")}i(!1)},[]);const o={user:s,isAuthenticated:!!s,isLoading:n,login:async(h,p)=>{try{const u=await fetch("/api/admin/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:p})});if(u.ok){const m=await u.json();return localStorage.setItem("adminToken",m.data.token),localStorage.setItem("adminUser",JSON.stringify(m.data.user)),r(m.data.user),!0}else return!1}catch(u){return console.error("Login failed:",u),!1}},logout:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),r(null),window.location.href="/admin/login"}};return e.jsx(Vr.Provider,{value:o,children:t})}function ka(){const t=c.useContext(Vr);if(t===void 0)throw new Error("useAdmin must be used within an AdminAuthProvider");return t}function Ta({children:t,currentPage:s,onPageChange:r}){const n=[{id:"dashboard",label:"Dashboard",icon:vi},{id:"users",label:"User Management",icon:Ze},{id:"kyc",label:"KYC Verification",icon:Ge},{id:"transactions",label:"Transactions",icon:Qe},{id:"escrow",label:"Escrow Management",icon:bi},{id:"monitoring",label:"System Monitoring",icon:ji},{id:"fraud",label:"Fraud Detection",icon:se},{id:"moderation",label:"Content Moderation",icon:Er},{id:"support",label:"Support Tickets",icon:ue},{id:"analytics",label:"Analytics",icon:Rr},{id:"security",label:"Security Center",icon:Ni}],i=()=>{localStorage.removeItem("adminToken"),window.location.href="/admin"};return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsxs("div",{className:"w-64 bg-white shadow-lg",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Brill Prime Management"})]}),e.jsx("nav",{className:"mt-6",children:n.map(a=>{const l=a.icon;return e.jsxs("button",{onClick:()=>r(a.id),className:`w-full flex items-center px-6 py-3 text-left hover:bg-gray-50 transition-colors ${s===a.id?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-700"}`,"data-testid":`nav-${a.id}`,children:[e.jsx(l,{className:"w-5 h-5 mr-3"}),e.jsx("span",{children:a.label})]},a.id)})}),e.jsx("div",{className:"absolute bottom-0 w-64 p-6 border-t bg-white",children:e.jsxs("button",{onClick:i,className:"w-full flex items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":"button-logout",children:[e.jsx(wi,{className:"w-5 h-5 mr-3"}),e.jsx("span",{children:"Logout"})]})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full overflow-auto",children:t})})]})}function tr(){const[t,s]=c.useState({totalUsers:0,activeUsers:0,totalTransactions:0,totalRevenue:0,pendingKyc:0,fraudAlerts:0,systemUptime:99.9,responseTime:245}),[r,n]=c.useState(!0);c.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0),setTimeout(()=>{s({totalUsers:15847,activeUsers:3421,totalTransactions:89234,totalRevenue:245e4,pendingKyc:127,fraudAlerts:8,systemUptime:99.9,responseTime:245}),n(!1)},1e3)}catch(l){console.error("Failed to fetch dashboard stats:",l),n(!1)}},a=[{title:"Total Users",value:t.totalUsers.toLocaleString(),icon:Ze,trend:"+12%",trendUp:!0,color:"bg-blue-500"},{title:"Active Users",value:t.activeUsers.toLocaleString(),icon:Ne,trend:"+8%",trendUp:!0,color:"bg-green-500"},{title:"Total Transactions",value:t.totalTransactions.toLocaleString(),icon:Qe,trend:"+15%",trendUp:!0,color:"bg-purple-500"},{title:"Total Revenue",value:`₦${(t.totalRevenue/1e6).toFixed(1)}M`,icon:Rt,trend:"+22%",trendUp:!0,color:"bg-yellow-500"},{title:"Pending KYC",value:t.pendingKyc.toString(),icon:Ge,trend:"-5%",trendUp:!1,color:"bg-orange-500"},{title:"Fraud Alerts",value:t.fraudAlerts.toString(),icon:se,trend:"-12%",trendUp:!1,color:"bg-red-500"}];return r?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((l,o)=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},o))})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Overview of platform metrics and system health"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:a.map((l,o)=>{const h=l.icon;return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:l.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900","data-testid":`stat-${l.title.toLowerCase().replace(/\s+/g,"-")}`,children:l.value}),e.jsxs("div",{className:"flex items-center mt-2",children:[l.trendUp?e.jsx(kr,{className:"w-4 h-4 text-green-500"}):e.jsx(Si,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:`text-sm ml-1 ${l.trendUp?"text-green-500":"text-red-500"}`,children:l.trend}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last month"})]})]}),e.jsx("div",{className:`p-3 rounded-full ${l.color}`,children:e.jsx(h,{className:"w-6 h-6 text-white"})})]})},o)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"System Uptime"}),e.jsxs("span",{className:"font-semibold text-green-600","data-testid":"stat-uptime",children:[t.systemUptime,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Average Response Time"}),e.jsxs("span",{className:"font-semibold text-blue-600","data-testid":"stat-response-time",children:[t.responseTime,"ms"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Server Status"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Healthy"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors","data-testid":"button-review-kyc",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ge,{className:"w-5 h-5 text-orange-500 mr-3"}),e.jsxs("span",{children:["Review Pending KYC (",t.pendingKyc,")"]})]})}),e.jsx("button",{className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors","data-testid":"button-fraud-alerts",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"w-5 h-5 text-red-500 mr-3"}),e.jsxs("span",{children:["View Fraud Alerts (",t.fraudAlerts,")"]})]})}),e.jsx("button",{className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors","data-testid":"button-system-reports",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rr,{className:"w-5 h-5 text-blue-500 mr-3"}),e.jsx("span",{children:"Generate System Reports"})]})})]})]})]})]})}function zr(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(r=zr(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Aa(){for(var t,s,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(s=zr(t))&&(n&&(n+=" "),n+=s);return n}const ws="-",Oa=t=>{const s=Da(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const o=l.split(ws);return o[0]===""&&o.length!==1&&o.shift(),Wr(o,s)||_a(l)},getConflictingClassGroupIds:(l,o)=>{const h=r[l]||[];return o&&n[l]?[...h,...n[l]]:h}}},Wr=(t,s)=>{if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),i=n?Wr(t.slice(1),n):void 0;if(i)return i;if(s.validators.length===0)return;const a=t.join(ws);return s.validators.find(({validator:l})=>l(a))?.classGroupId},sr=/^\[(.+)\]$/,_a=t=>{if(sr.test(t)){const s=sr.exec(t)[1],r=s?.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},Da=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return Ia(Object.entries(t.classGroups),r).forEach(([a,l])=>{os(l,n,a,s)}),n},os=(t,s,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?s:rr(s,i);a.classGroupId=r;return}if(typeof i=="function"){if(Pa(i)){os(i(n),s,r,n);return}s.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,l])=>{os(l,rr(s,a),r,n)})})},rr=(t,s)=>{let r=t;return s.split(ws).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Pa=t=>t.isThemeGetter,Ia=(t,s)=>s?t.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?s+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,o])=>[s+l,o])):a);return[r,i]}):t,Ma=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const i=(a,l)=>{r.set(a,l),s++,s>t&&(s=0,n=r,r=new Map)};return{get(a){let l=r.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return i(a,l),l},set(a,l){r.has(a)?r.set(a,l):i(a,l)}}},Kr="!",Fa=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,i=s[0],a=s.length,l=o=>{const h=[];let p=0,u=0,m;for(let g=0;g<o.length;g++){let w=o[g];if(p===0){if(w===i&&(n||o.slice(g,g+a)===s)){h.push(o.slice(u,g)),u=g+a;continue}if(w==="/"){m=g;continue}}w==="["?p++:w==="]"&&p--}const f=h.length===0?o:o.substring(u),S=f.startsWith(Kr),E=S?f.substring(1):f,x=m&&m>u?m-u:void 0;return{modifiers:h,hasImportantModifier:S,baseClassName:E,maybePostfixModifierPosition:x}};return r?o=>r({className:o,parseClassName:l}):l},La=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},Ua=t=>({cache:Ma(t.cacheSize),parseClassName:Fa(t),...Oa(t)}),Ba=/\s+/,$a=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=s,a=[],l=t.trim().split(Ba);let o="";for(let h=l.length-1;h>=0;h-=1){const p=l[h],{modifiers:u,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:S}=r(p);let E=!!S,x=n(E?f.substring(0,S):f);if(!x){if(!E){o=p+(o.length>0?" "+o:o);continue}if(x=n(f),!x){o=p+(o.length>0?" "+o:o);continue}E=!1}const g=La(u).join(":"),w=m?g+Kr:g,k=w+x;if(a.includes(k))continue;a.push(k);const T=i(x,E);for(let R=0;R<T.length;++R){const v=T[R];a.push(w+v)}o=p+(o.length>0?" "+o:o)}return o};function qa(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=Hr(s))&&(n&&(n+=" "),n+=r);return n}const Hr=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=Hr(t[n]))&&(r&&(r+=" "),r+=s);return r};function Va(t,...s){let r,n,i,a=l;function l(h){const p=s.reduce((u,m)=>m(u),t());return r=Ua(p),n=r.cache.get,i=r.cache.set,a=o,o(h)}function o(h){const p=n(h);if(p)return p;const u=$a(h,r);return i(h,u),u}return function(){return a(qa.apply(null,arguments))}}const B=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},Gr=/^\[(?:([a-z-]+):)?(.+)\]$/i,za=/^\d+\/\d+$/,Wa=new Set(["px","full","screen"]),Ka=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ha=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ga=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Qa=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ya=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ce=t=>Ae(t)||Wa.has(t)||za.test(t),me=t=>Ie(t,"length",no),Ae=t=>!!t&&!Number.isNaN(Number(t)),qt=t=>Ie(t,"number",Ae),Le=t=>!!t&&Number.isInteger(Number(t)),Ja=t=>t.endsWith("%")&&Ae(t.slice(0,-1)),I=t=>Gr.test(t),fe=t=>Ka.test(t),Xa=new Set(["length","size","percentage"]),Za=t=>Ie(t,Xa,Qr),eo=t=>Ie(t,"position",Qr),to=new Set(["image","url"]),so=t=>Ie(t,to,ao),ro=t=>Ie(t,"",io),Ue=()=>!0,Ie=(t,s,r)=>{const n=Gr.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},no=t=>Ha.test(t)&&!Ga.test(t),Qr=()=>!1,io=t=>Qa.test(t),ao=t=>Ya.test(t),oo=()=>{const t=B("colors"),s=B("spacing"),r=B("blur"),n=B("brightness"),i=B("borderColor"),a=B("borderRadius"),l=B("borderSpacing"),o=B("borderWidth"),h=B("contrast"),p=B("grayscale"),u=B("hueRotate"),m=B("invert"),f=B("gap"),S=B("gradientColorStops"),E=B("gradientColorStopPositions"),x=B("inset"),g=B("margin"),w=B("opacity"),k=B("padding"),T=B("saturate"),R=B("scale"),v=B("sepia"),D=B("skew"),O=B("space"),b=B("translate"),P=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",I,s],y=()=>[I,s],j=()=>["",ce,me],d=()=>["auto",Ae,I],C=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],he=()=>["","0",I],Ms=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[Ae,I];return{cacheSize:500,separator:":",theme:{colors:[Ue],spacing:[ce,me],blur:["none","",fe,I],brightness:le(),borderColor:[t],borderRadius:["none","","full",fe,I],borderSpacing:y(),borderWidth:j(),contrast:le(),grayscale:he(),hueRotate:le(),invert:he(),gap:y(),gradientColorStops:[t],gradientColorStopPositions:[Ja,me],inset:_(),margin:_(),opacity:le(),padding:y(),saturate:le(),scale:le(),sepia:he(),skew:le(),space:y(),translate:y()},classGroups:{aspect:[{aspect:["auto","square","video",I]}],container:["container"],columns:[{columns:[fe]}],"break-after":[{"break-after":Ms()}],"break-before":[{"break-before":Ms()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...C(),I]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Le,I]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",I]}],grow:[{grow:he()}],shrink:[{shrink:he()}],order:[{order:["first","last","none",Le,I]}],"grid-cols":[{"grid-cols":[Ue]}],"col-start-end":[{col:["auto",{span:["full",Le,I]},I]}],"col-start":[{"col-start":d()}],"col-end":[{"col-end":d()}],"grid-rows":[{"grid-rows":[Ue]}],"row-start-end":[{row:["auto",{span:[Le,I]},I]}],"row-start":[{"row-start":d()}],"row-end":[{"row-end":d()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",I]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",I]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",I,s]}],"min-w":[{"min-w":[I,s,"min","max","fit"]}],"max-w":[{"max-w":[I,s,"none","full","min","max","fit","prose",{screen:[fe]},fe]}],h:[{h:[I,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[I,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[I,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[I,s,"auto","min","max","fit"]}],"font-size":[{text:["base",fe,me]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qt]}],"font-family":[{font:[Ue]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",I]}],"line-clamp":[{"line-clamp":["none",Ae,qt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ce,I]}],"list-image":[{"list-image":["none",I]}],"list-style-type":[{list:["none","disc","decimal",I]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ce,me]}],"underline-offset":[{"underline-offset":["auto",ce,I]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",I]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",I]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...C(),eo]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Za]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},so]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:A()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[ce,I]}],"outline-w":[{outline:[ce,me]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ce,me]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fe,ro]}],"shadow-color":[{shadow:[Ue]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",fe,I]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[T]}],sepia:[{sepia:[v]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[v]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",I]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",I]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",I]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Le,I]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",I]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",I]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",I]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ce,me,qt]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lo=Va(oo);function V(...t){return lo(Aa(t))}const L=c.forwardRef(({className:t,variant:s="default",size:r="default",...n},i)=>{const a={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},l={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return e.jsx("button",{className:V("inline-flex items-center justify-center whitespace-nowrap curved-button text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",a[s],l[r],t),ref:i,...n})});L.displayName="Button";const Je=c.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:V("flex h-10 w-full curved-input border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));Je.displayName="Input";const W=c.forwardRef(({className:t,variant:s="default",...r},n)=>{const i={default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"};return e.jsx("div",{ref:n,className:V("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",i[s],t),...r})});W.displayName="Badge";function co(){const{toast:t}=Tt();tt();const[s,r]=c.useState({role:"all",status:"all",search:"",page:1,limit:20}),[n,i]=c.useState([]),[a,l]=c.useState(null),[o,h]=c.useState(""),[p,u]=c.useState("all"),[m,f]=c.useState("all"),[S,E]=c.useState("all"),[x,g]=c.useState([]),[w,k]=c.useState(!0),[T,R]=c.useState({totalUsers:0,activeUsers:0,verifiedUsers:0,pendingKyc:0}),[v,D]=c.useState({page:1,limit:20,total:0,pages:0}),O=async()=>{try{k(!0);const d=new URLSearchParams({page:v.page.toString(),limit:v.limit.toString(),search:o,role:p,status:m,verificationStatus:S}),C=await fetch(`/api/admin/users?${d}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!C.ok)throw new Error("Failed to fetch users");const A=await C.json();g(A.data.users),R(A.data.stats),D(A.data.pagination)}catch(d){console.error("Failed to fetch users:",d),t({title:"Error",description:d.message||"Network error occurred",variant:"destructive"})}finally{k(!1)}};c.useEffect(()=>{O()},[v.page,o,p,m,S]),c.useEffect(()=>{D(d=>({...d,page:1}))},[o,p,m,S]);const b=async d=>{if(n.length===0)return;const C=prompt(`Reason for ${d.toLowerCase()}:`);if(C)try{const A=await fetch("/api/admin/users/bulk-update",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:n,action:d,reason:C})});if(A.ok)t({title:"Success",description:`${d} applied to ${n.length} users`}),i([]),O();else{const M=await A.json();t({title:"Error",description:M.message||"Failed to perform bulk action",variant:"destructive"})}}catch(A){t({title:"Error",description:A.message||"Network error occurred",variant:"destructive"})}},P=async(d,C)=>{const A=prompt(`Reason for changing status to ${C}:`);if(A)try{const M=await fetch(`/api/admin/users/${d}/status`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:C,reason:A})});if(M.ok)t({title:"Success",description:`User status updated to ${C}`}),O();else{const H=await M.json();t({title:"Error",description:H.message||"Failed to update status",variant:"destructive"})}}catch(M){t({title:"Error",description:M.message||"Network error occurred",variant:"destructive"})}},N=async d=>{const C=prompt("Reason for verification:");if(C)try{const A=await fetch(`/api/admin/users/${d}/verify`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:C})});if(A.ok)t({title:"Success",description:"User verified successfully"}),O();else{const M=await A.json();t({title:"Error",description:M.message||"Failed to verify user",variant:"destructive"})}}catch(A){t({title:"Error",description:A.message||"Network error occurred",variant:"destructive"})}},_=d=>{D(C=>({...C,page:d}))},y=(d,C)=>{i(C?A=>[...A,d]:A=>A.filter(M=>M!==d))},j=d=>{i(d?x.map(C=>C.id):[])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"User Management"}),e.jsxs("p",{className:"text-gray-600",children:[T.totalUsers," total users • ",T.activeUsers," active"]})]}),n.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>b("activate"),disabled:w,children:[e.jsx(Ge,{className:"h-4 w-4 mr-1"}),"Activate (",n.length,")"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>b("deactivate"),disabled:w,children:[e.jsx(Fs,{className:"h-4 w-4 mr-1"}),"Deactivate (",n.length,")"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>b("verify"),disabled:w,children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"Verify (",n.length,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold",children:T.totalUsers})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Verified Users"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.verifiedUsers})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Merchants"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.merchants})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Drivers"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:T.drivers})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Je,{placeholder:"Search users by name or email...",value:o,onChange:d=>h(d.target.value),className:"pl-10"})]}),e.jsxs("select",{value:p,onChange:d=>u(d.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"CONSUMER",children:"Consumers"}),e.jsx("option",{value:"MERCHANT",children:"Merchants"}),e.jsx("option",{value:"DRIVER",children:"Drivers"}),e.jsx("option",{value:"ADMIN",children:"Admins"})]}),e.jsxs("select",{value:m,onChange:d=>f(d.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:S,onChange:d=>E(d.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Verification"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]}),e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:n.length===x.length&&x.length>0,onChange:d=>j(d.target.checked)})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-8",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading users..."})]})})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-8 text-gray-500",children:"No users found"})}):x.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:n.includes(d.id),onChange:C=>y(d.id,C.target.checked)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.fullName}),e.jsx("div",{className:"text-sm text-gray-500",children:d.email}),d.phoneNumber&&e.jsx("div",{className:"text-xs text-gray-400",children:d.phoneNumber})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(W,{variant:d.role==="ADMIN"?"destructive":d.role==="MERCHANT"?"default":d.role==="DRIVER"?"secondary":"outline",children:d.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(W,{variant:d.isActive?"default":"secondary",className:d.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:d.isActive?"Active":"Inactive"}),d.isVerified&&e.jsx(W,{variant:"outline",className:"bg-blue-100 text-blue-800",children:"Verified"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(d.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx(L,{size:"sm",variant:"outline",onClick:()=>l(d),children:e.jsx(et,{className:"h-4 w-4"})}),e.jsx(L,{size:"sm",variant:"outline",onClick:()=>P(d.id,d.isActive?"inactive":"active"),disabled:w,children:d.isActive?e.jsx(Fs,{className:"h-4 w-4"}):e.jsx(Ge,{className:"h-4 w-4"})}),!d.isVerified&&e.jsx(L,{size:"sm",variant:"outline",onClick:()=>N(d.id),disabled:w,children:e.jsx(se,{className:"h-4 w-4"})})]})]},d.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-6 px-6 py-4 bg-gray-50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(v.page-1)*v.limit+1," to ",Math.min(v.page*v.limit,v.total)," of ",v.total," users"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>_(Math.max(1,v.page-1)),disabled:v.page===1||w,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1",children:["Page ",v.page," of ",v.pages]}),e.jsx("button",{onClick:()=>_(Math.min(v.pages,v.page+1)),disabled:v.page===v.pages||w,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Details"}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>l(null),children:"×"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("div",{className:"text-sm",children:a.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("div",{className:"text-sm",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("div",{className:"text-sm",children:a.phoneNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),e.jsx("div",{className:"text-sm",children:a.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsxs("div",{className:"text-sm",children:[a.isActive?"Active":"Inactive"," •",a.isVerified?" Verified":" Unverified"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Member Since"}),e.jsx("div",{className:"text-sm",children:new Date(a.createdAt).toLocaleDateString()})]})]})]})})]})}function K(t,s,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return s?.(i)}}function nr(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Yr(...t){return s=>{let r=!1;const n=t.map(i=>{const a=nr(i,s);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():nr(t[i],null)}}}}function ae(...t){return c.useCallback(Yr(...t),t)}function uo(t,s){const r=c.createContext(s),n=a=>{const{children:l,...o}=a,h=c.useMemo(()=>o,Object.values(o));return e.jsx(r.Provider,{value:h,children:l})};n.displayName=t+"Provider";function i(a){const l=c.useContext(r);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,i]}function At(t,s=[]){let r=[];function n(a,l){const o=c.createContext(l),h=r.length;r=[...r,l];const p=m=>{const{scope:f,children:S,...E}=m,x=f?.[t]?.[h]||o,g=c.useMemo(()=>E,Object.values(E));return e.jsx(x.Provider,{value:g,children:S})};p.displayName=a+"Provider";function u(m,f){const S=f?.[t]?.[h]||o,E=c.useContext(S);if(E)return E;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[p,u]}const i=()=>{const a=r.map(l=>c.createContext(l));return function(o){const h=o?.[t]||a;return c.useMemo(()=>({[`__scope${t}`]:{...o,[t]:h}}),[o,h])}};return i.scopeName=t,[n,ho(i,...s)]}function ho(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((o,{useScope:h,scopeName:p})=>{const m=h(a)[`__scope${p}`];return{...o,...m}},{});return c.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}var Xe=globalThis?.document?c.useLayoutEffect:()=>{},mo=wr[" useId ".trim().toString()]||(()=>{}),fo=0;function Ke(t){const[s,r]=c.useState(mo());return Xe(()=>{r(n=>n??String(fo++))},[t]),s?`radix-${s}`:""}var po=wr[" useInsertionEffect ".trim().toString()]||Xe;function Ss({prop:t,defaultProp:s,onChange:r=()=>{},caller:n}){const[i,a,l]=xo({defaultProp:s,onChange:r}),o=t!==void 0,h=o?t:i;{const u=c.useRef(t!==void 0);c.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const p=c.useCallback(u=>{if(o){const m=go(u)?u(t):u;m!==t&&l.current?.(m)}else a(u)},[o,t,a,l]);return[h,p]}function xo({defaultProp:t,onChange:s}){const[r,n]=c.useState(t),i=c.useRef(r),a=c.useRef(s);return po(()=>{a.current=s},[s]),c.useEffect(()=>{i.current!==r&&(a.current?.(r),i.current=r)},[r,i]),[r,n,a]}function go(t){return typeof t=="function"}var Jr=Sr();const yo=Cr(Jr);function Ct(t){const s=vo(t),r=c.forwardRef((n,i)=>{const{children:a,...l}=n,o=c.Children.toArray(a),h=o.find(jo);if(h){const p=h.props.children,u=o.map(m=>m===h?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:m);return e.jsx(s,{...l,ref:i,children:c.isValidElement(p)?c.cloneElement(p,void 0,u):null})}return e.jsx(s,{...l,ref:i,children:a})});return r.displayName=`${t}.Slot`,r}function vo(t){const s=c.forwardRef((r,n)=>{const{children:i,...a}=r;if(c.isValidElement(i)){const l=wo(i),o=No(a,i.props);return i.type!==c.Fragment&&(o.ref=n?Yr(n,l):l),c.cloneElement(i,o)}return c.Children.count(i)>1?c.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var bo=Symbol("radix.slottable");function jo(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bo}function No(t,s){const r={...s};for(const n in s){const i=t[n],a=s[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const h=a(...o);return i(...o),h}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}function wo(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var So=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Q=So.reduce((t,s)=>{const r=Ct(`Primitive.${s}`),n=c.forwardRef((i,a)=>{const{asChild:l,...o}=i,h=l?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...o,ref:a})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function Co(t,s){t&&Jr.flushSync(()=>t.dispatchEvent(s))}function De(t){const s=c.useRef(t);return c.useEffect(()=>{s.current=t}),c.useMemo(()=>(...r)=>s.current?.(...r),[])}function Eo(t,s=globalThis?.document){const r=De(t);c.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var Ro="DismissableLayer",ls="dismissableLayer.update",ko="dismissableLayer.pointerDownOutside",To="dismissableLayer.focusOutside",ir,Xr=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zr=c.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:o,...h}=t,p=c.useContext(Xr),[u,m]=c.useState(null),f=u?.ownerDocument??globalThis?.document,[,S]=c.useState({}),E=ae(s,O=>m(O)),x=Array.from(p.layers),[g]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(g),k=u?x.indexOf(u):-1,T=p.layersWithOutsidePointerEventsDisabled.size>0,R=k>=w,v=_o(O=>{const b=O.target,P=[...p.branches].some(N=>N.contains(b));!R||P||(i?.(O),l?.(O),O.defaultPrevented||o?.())},f),D=Do(O=>{const b=O.target;[...p.branches].some(N=>N.contains(b))||(a?.(O),l?.(O),O.defaultPrevented||o?.())},f);return Eo(O=>{k===p.layers.size-1&&(n?.(O),!O.defaultPrevented&&o&&(O.preventDefault(),o()))},f),c.useEffect(()=>{if(u)return r&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(ir=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(u)),p.layers.add(u),ar(),()=>{r&&p.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ir)}},[u,f,r,p]),c.useEffect(()=>()=>{u&&(p.layers.delete(u),p.layersWithOutsidePointerEventsDisabled.delete(u),ar())},[u,p]),c.useEffect(()=>{const O=()=>S({});return document.addEventListener(ls,O),()=>document.removeEventListener(ls,O)},[]),e.jsx(Q.div,{...h,ref:E,style:{pointerEvents:T?R?"auto":"none":void 0,...t.style},onFocusCapture:K(t.onFocusCapture,D.onFocusCapture),onBlurCapture:K(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:K(t.onPointerDownCapture,v.onPointerDownCapture)})});Zr.displayName=Ro;var Ao="DismissableLayerBranch",Oo=c.forwardRef((t,s)=>{const r=c.useContext(Xr),n=c.useRef(null),i=ae(s,n);return c.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),e.jsx(Q.div,{...t,ref:i})});Oo.displayName=Ao;function _o(t,s=globalThis?.document){const r=De(t),n=c.useRef(!1),i=c.useRef(()=>{});return c.useEffect(()=>{const a=o=>{if(o.target&&!n.current){let h=function(){en(ko,r,p,{discrete:!0})};const p={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",i.current),i.current=h,s.addEventListener("click",i.current,{once:!0})):h()}else s.removeEventListener("click",i.current);n.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",a),s.removeEventListener("click",i.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function Do(t,s=globalThis?.document){const r=De(t),n=c.useRef(!1);return c.useEffect(()=>{const i=a=>{a.target&&!n.current&&en(To,r,{originalEvent:a},{discrete:!1})};return s.addEventListener("focusin",i),()=>s.removeEventListener("focusin",i)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ar(){const t=new CustomEvent(ls);document.dispatchEvent(t)}function en(t,s,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&i.addEventListener(t,s,{once:!0}),n?Co(i,a):i.dispatchEvent(a)}var Vt="focusScope.autoFocusOnMount",zt="focusScope.autoFocusOnUnmount",or={bubbles:!1,cancelable:!0},Po="FocusScope",tn=c.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=t,[o,h]=c.useState(null),p=De(i),u=De(a),m=c.useRef(null),f=ae(s,x=>h(x)),S=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(n){let x=function(T){if(S.paused||!o)return;const R=T.target;o.contains(R)?m.current=R:pe(m.current,{select:!0})},g=function(T){if(S.paused||!o)return;const R=T.relatedTarget;R!==null&&(o.contains(R)||pe(m.current,{select:!0}))},w=function(T){if(document.activeElement===document.body)for(const v of T)v.removedNodes.length>0&&pe(o)};document.addEventListener("focusin",x),document.addEventListener("focusout",g);const k=new MutationObserver(w);return o&&k.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",g),k.disconnect()}}},[n,o,S.paused]),c.useEffect(()=>{if(o){cr.add(S);const x=document.activeElement;if(!o.contains(x)){const w=new CustomEvent(Vt,or);o.addEventListener(Vt,p),o.dispatchEvent(w),w.defaultPrevented||(Io(Bo(sn(o)),{select:!0}),document.activeElement===x&&pe(o))}return()=>{o.removeEventListener(Vt,p),setTimeout(()=>{const w=new CustomEvent(zt,or);o.addEventListener(zt,u),o.dispatchEvent(w),w.defaultPrevented||pe(x??document.body,{select:!0}),o.removeEventListener(zt,u),cr.remove(S)},0)}}},[o,p,u,S]);const E=c.useCallback(x=>{if(!r&&!n||S.paused)return;const g=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(g&&w){const k=x.currentTarget,[T,R]=Mo(k);T&&R?!x.shiftKey&&w===R?(x.preventDefault(),r&&pe(T,{select:!0})):x.shiftKey&&w===T&&(x.preventDefault(),r&&pe(R,{select:!0})):w===k&&x.preventDefault()}},[r,n,S.paused]);return e.jsx(Q.div,{tabIndex:-1,...l,ref:f,onKeyDown:E})});tn.displayName=Po;function Io(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(pe(n,{select:s}),document.activeElement!==r)return}function Mo(t){const s=sn(t),r=lr(s,t),n=lr(s.reverse(),t);return[r,n]}function sn(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function lr(t,s){for(const r of t)if(!Fo(r,{upTo:s}))return r}function Fo(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Lo(t){return t instanceof HTMLInputElement&&"select"in t}function pe(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Lo(t)&&s&&t.select()}}var cr=Uo();function Uo(){let t=[];return{add(s){const r=t[0];s!==r&&r?.pause(),t=dr(t,s),t.unshift(s)},remove(s){t=dr(t,s),t[0]?.resume()}}}function dr(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function Bo(t){return t.filter(s=>s.tagName!=="A")}var $o="Portal",rn=c.forwardRef((t,s)=>{const{container:r,...n}=t,[i,a]=c.useState(!1);Xe(()=>a(!0),[]);const l=r||i&&globalThis?.document?.body;return l?yo.createPortal(e.jsx(Q.div,{...n,ref:s}),l):null});rn.displayName=$o;function qo(t,s){return c.useReducer((r,n)=>s[r][n]??r,t)}var st=t=>{const{present:s,children:r}=t,n=Vo(s),i=typeof r=="function"?r({present:n.isPresent}):c.Children.only(r),a=ae(n.ref,zo(i));return typeof r=="function"||n.isPresent?c.cloneElement(i,{ref:a}):null};st.displayName="Presence";function Vo(t){const[s,r]=c.useState(),n=c.useRef(null),i=c.useRef(t),a=c.useRef("none"),l=t?"mounted":"unmounted",[o,h]=qo(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const p=ot(n.current);a.current=o==="mounted"?p:"none"},[o]),Xe(()=>{const p=n.current,u=i.current;if(u!==t){const f=a.current,S=ot(p);t?h("MOUNT"):S==="none"||p?.display==="none"?h("UNMOUNT"):h(u&&f!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,h]),Xe(()=>{if(s){let p;const u=s.ownerDocument.defaultView??window,m=S=>{const x=ot(n.current).includes(CSS.escape(S.animationName));if(S.target===s&&x&&(h("ANIMATION_END"),!i.current)){const g=s.style.animationFillMode;s.style.animationFillMode="forwards",p=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=g)})}},f=S=>{S.target===s&&(a.current=ot(n.current))};return s.addEventListener("animationstart",f),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{u.clearTimeout(p),s.removeEventListener("animationstart",f),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[s,h]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:c.useCallback(p=>{n.current=p?getComputedStyle(p):null,r(p)},[])}}function ot(t){return t?.animationName||"none"}function zo(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Wt=0;function Wo(){c.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ur()),document.body.insertAdjacentElement("beforeend",t[1]??ur()),Wt++,()=>{Wt===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Wt--}},[])}function ur(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ne=function(){return ne=Object.assign||function(s){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ne.apply(this,arguments)};function nn(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ko(t,s,r){if(r||arguments.length===2)for(var n=0,i=s.length,a;n<i;n++)(a||!(n in s))&&(a||(a=Array.prototype.slice.call(s,0,n)),a[n]=s[n]);return t.concat(a||Array.prototype.slice.call(s))}var gt="right-scroll-bar-position",yt="width-before-scroll-bar",Ho="with-scroll-bars-hidden",Go="--removed-body-scroll-bar-size";function Kt(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function Qo(t,s){var r=c.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=s,r.facade}var Yo=typeof window<"u"?c.useLayoutEffect:c.useEffect,hr=new WeakMap;function Jo(t,s){var r=Qo(null,function(n){return t.forEach(function(i){return Kt(i,n)})});return Yo(function(){var n=hr.get(r);if(n){var i=new Set(n),a=new Set(t),l=r.current;i.forEach(function(o){a.has(o)||Kt(o,null)}),a.forEach(function(o){i.has(o)||Kt(o,l)})}hr.set(r,t)},[t]),r}function Xo(t){return t}function Zo(t,s){s===void 0&&(s=Xo);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var l=s(a,n);return r.push(l),function(){r=r.filter(function(o){return o!==l})}},assignSyncMedium:function(a){for(n=!0;r.length;){var l=r;r=[],l.forEach(a)}r={push:function(o){return a(o)},filter:function(){return r}}},assignMedium:function(a){n=!0;var l=[];if(r.length){var o=r;r=[],o.forEach(a),l=r}var h=function(){var u=l;l=[],u.forEach(a)},p=function(){return Promise.resolve().then(h)};p(),r={push:function(u){l.push(u),p()},filter:function(u){return l=l.filter(u),r}}}};return i}function el(t){t===void 0&&(t={});var s=Zo(null);return s.options=ne({async:!0,ssr:!1},t),s}var an=function(t){var s=t.sideCar,r=nn(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return c.createElement(n,ne({},r))};an.isSideCarExport=!0;function tl(t,s){return t.useMedium(s),an}var on=el(),Ht=function(){},Ot=c.forwardRef(function(t,s){var r=c.useRef(null),n=c.useState({onScrollCapture:Ht,onWheelCapture:Ht,onTouchMoveCapture:Ht}),i=n[0],a=n[1],l=t.forwardProps,o=t.children,h=t.className,p=t.removeScrollBar,u=t.enabled,m=t.shards,f=t.sideCar,S=t.noRelative,E=t.noIsolation,x=t.inert,g=t.allowPinchZoom,w=t.as,k=w===void 0?"div":w,T=t.gapMode,R=nn(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=f,D=Jo([r,s]),O=ne(ne({},R),i);return c.createElement(c.Fragment,null,u&&c.createElement(v,{sideCar:on,removeScrollBar:p,shards:m,noRelative:S,noIsolation:E,inert:x,setCallbacks:a,allowPinchZoom:!!g,lockRef:r,gapMode:T}),l?c.cloneElement(c.Children.only(o),ne(ne({},O),{ref:D})):c.createElement(k,ne({},O,{className:h,ref:D}),o))});Ot.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ot.classNames={fullWidth:yt,zeroRight:gt};var sl=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rl(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=sl();return s&&t.setAttribute("nonce",s),t}function nl(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function il(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var al=function(){var t=0,s=null;return{add:function(r){t==0&&(s=rl())&&(nl(s,r),il(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},ol=function(){var t=al();return function(s,r){c.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},ln=function(){var t=ol(),s=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return s},ll={left:0,top:0,right:0,gap:0},Gt=function(t){return parseInt(t||"",10)||0},cl=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],i=s[t==="padding"?"paddingRight":"marginRight"];return[Gt(r),Gt(n),Gt(i)]},dl=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ll;var s=cl(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},ul=ln(),Oe="data-scroll-locked",hl=function(t,s,r,n){var i=t.left,a=t.top,l=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(Ho,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(Oe,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gt,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(yt,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(gt," .").concat(gt,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(yt," .").concat(yt,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Oe,`] {
    `).concat(Go,": ").concat(o,`px;
  }
`)},mr=function(){var t=parseInt(document.body.getAttribute(Oe)||"0",10);return isFinite(t)?t:0},ml=function(){c.useEffect(function(){return document.body.setAttribute(Oe,(mr()+1).toString()),function(){var t=mr()-1;t<=0?document.body.removeAttribute(Oe):document.body.setAttribute(Oe,t.toString())}},[])},fl=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;ml();var a=c.useMemo(function(){return dl(i)},[i]);return c.createElement(ul,{styles:hl(a,!s,i,r?"":"!important")})},cs=!1;if(typeof window<"u")try{var lt=Object.defineProperty({},"passive",{get:function(){return cs=!0,!0}});window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{cs=!1}var Ee=cs?{passive:!1}:!1,pl=function(t){return t.tagName==="TEXTAREA"},cn=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!pl(t)&&r[s]==="visible")},xl=function(t){return cn(t,"overflowY")},gl=function(t){return cn(t,"overflowX")},fr=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=dn(t,n);if(i){var a=un(t,n),l=a[1],o=a[2];if(l>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},yl=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},vl=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},dn=function(t,s){return t==="v"?xl(s):gl(s)},un=function(t,s){return t==="v"?yl(s):vl(s)},bl=function(t,s){return t==="h"&&s==="rtl"?-1:1},jl=function(t,s,r,n,i){var a=bl(t,window.getComputedStyle(s).direction),l=a*n,o=r.target,h=s.contains(o),p=!1,u=l>0,m=0,f=0;do{if(!o)break;var S=un(t,o),E=S[0],x=S[1],g=S[2],w=x-g-a*E;(E||w)&&dn(t,o)&&(m+=w,f+=E);var k=o.parentNode;o=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!h&&o!==document.body||h&&(s.contains(o)||s===o));return(u&&Math.abs(m)<1||!u&&Math.abs(f)<1)&&(p=!0),p},ct=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},pr=function(t){return[t.deltaX,t.deltaY]},xr=function(t){return t&&"current"in t?t.current:t},Nl=function(t,s){return t[0]===s[0]&&t[1]===s[1]},wl=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Sl=0,Re=[];function Cl(t){var s=c.useRef([]),r=c.useRef([0,0]),n=c.useRef(),i=c.useState(Sl++)[0],a=c.useState(ln)[0],l=c.useRef(t);c.useEffect(function(){l.current=t},[t]),c.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=Ko([t.lockRef.current],(t.shards||[]).map(xr),!0).filter(Boolean);return x.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=c.useCallback(function(x,g){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var w=ct(x),k=r.current,T="deltaX"in x?x.deltaX:k[0]-w[0],R="deltaY"in x?x.deltaY:k[1]-w[1],v,D=x.target,O=Math.abs(T)>Math.abs(R)?"h":"v";if("touches"in x&&O==="h"&&D.type==="range")return!1;var b=fr(O,D);if(!b)return!0;if(b?v=O:(v=O==="v"?"h":"v",b=fr(O,D)),!b)return!1;if(!n.current&&"changedTouches"in x&&(T||R)&&(n.current=v),!v)return!0;var P=n.current||v;return jl(P,g,x,P==="h"?T:R)},[]),h=c.useCallback(function(x){var g=x;if(!(!Re.length||Re[Re.length-1]!==a)){var w="deltaY"in g?pr(g):ct(g),k=s.current.filter(function(v){return v.name===g.type&&(v.target===g.target||g.target===v.shadowParent)&&Nl(v.delta,w)})[0];if(k&&k.should){g.cancelable&&g.preventDefault();return}if(!k){var T=(l.current.shards||[]).map(xr).filter(Boolean).filter(function(v){return v.contains(g.target)}),R=T.length>0?o(g,T[0]):!l.current.noIsolation;R&&g.cancelable&&g.preventDefault()}}},[]),p=c.useCallback(function(x,g,w,k){var T={name:x,delta:g,target:w,should:k,shadowParent:El(w)};s.current.push(T),setTimeout(function(){s.current=s.current.filter(function(R){return R!==T})},1)},[]),u=c.useCallback(function(x){r.current=ct(x),n.current=void 0},[]),m=c.useCallback(function(x){p(x.type,pr(x),x.target,o(x,t.lockRef.current))},[]),f=c.useCallback(function(x){p(x.type,ct(x),x.target,o(x,t.lockRef.current))},[]);c.useEffect(function(){return Re.push(a),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",h,Ee),document.addEventListener("touchmove",h,Ee),document.addEventListener("touchstart",u,Ee),function(){Re=Re.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,Ee),document.removeEventListener("touchmove",h,Ee),document.removeEventListener("touchstart",u,Ee)}},[]);var S=t.removeScrollBar,E=t.inert;return c.createElement(c.Fragment,null,E?c.createElement(a,{styles:wl(i)}):null,S?c.createElement(fl,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function El(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const Rl=tl(on,Cl);var hn=c.forwardRef(function(t,s){return c.createElement(Ot,ne({},t,{ref:s,sideCar:Rl}))});hn.classNames=Ot.classNames;var kl=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},ke=new WeakMap,dt=new WeakMap,ut={},Qt=0,mn=function(t){return t&&(t.host||mn(t.parentNode))},Tl=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=mn(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Al=function(t,s,r,n){var i=Tl(s,Array.isArray(t)?t:[t]);ut[r]||(ut[r]=new WeakMap);var a=ut[r],l=[],o=new Set,h=new Set(i),p=function(m){!m||o.has(m)||(o.add(m),p(m.parentNode))};i.forEach(p);var u=function(m){!m||h.has(m)||Array.prototype.forEach.call(m.children,function(f){if(o.has(f))u(f);else try{var S=f.getAttribute(n),E=S!==null&&S!=="false",x=(ke.get(f)||0)+1,g=(a.get(f)||0)+1;ke.set(f,x),a.set(f,g),l.push(f),x===1&&E&&dt.set(f,!0),g===1&&f.setAttribute(r,"true"),E||f.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return u(s),o.clear(),Qt++,function(){l.forEach(function(m){var f=ke.get(m)-1,S=a.get(m)-1;ke.set(m,f),a.set(m,S),f||(dt.has(m)||m.removeAttribute(n),dt.delete(m)),S||m.removeAttribute(r)}),Qt--,Qt||(ke=new WeakMap,ke=new WeakMap,dt=new WeakMap,ut={})}},Ol=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=kl(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),Al(n,i,r,"aria-hidden")):function(){return null}},_t="Dialog",[fn,Rd]=At(_t),[_l,re]=fn(_t),pn=t=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,o=c.useRef(null),h=c.useRef(null),[p,u]=Ss({prop:n,defaultProp:i??!1,onChange:a,caller:_t});return e.jsx(_l,{scope:s,triggerRef:o,contentRef:h,contentId:Ke(),titleId:Ke(),descriptionId:Ke(),open:p,onOpenChange:u,onOpenToggle:c.useCallback(()=>u(m=>!m),[u]),modal:l,children:r})};pn.displayName=_t;var xn="DialogTrigger",Dl=c.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,i=re(xn,r),a=ae(s,i.triggerRef);return e.jsx(Q.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Rs(i.open),...n,ref:a,onClick:K(t.onClick,i.onOpenToggle)})});Dl.displayName=xn;var Cs="DialogPortal",[Pl,gn]=fn(Cs,{forceMount:void 0}),yn=t=>{const{__scopeDialog:s,forceMount:r,children:n,container:i}=t,a=re(Cs,s);return e.jsx(Pl,{scope:s,forceMount:r,children:c.Children.map(n,l=>e.jsx(st,{present:r||a.open,children:e.jsx(rn,{asChild:!0,container:i,children:l})}))})};yn.displayName=Cs;var Et="DialogOverlay",vn=c.forwardRef((t,s)=>{const r=gn(Et,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,a=re(Et,t.__scopeDialog);return a.modal?e.jsx(st,{present:n||a.open,children:e.jsx(Ml,{...i,ref:s})}):null});vn.displayName=Et;var Il=Ct("DialogOverlay.RemoveScroll"),Ml=c.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,i=re(Et,r);return e.jsx(hn,{as:Il,allowPinchZoom:!0,shards:[i.contentRef],children:e.jsx(Q.div,{"data-state":Rs(i.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),Ce="DialogContent",bn=c.forwardRef((t,s)=>{const r=gn(Ce,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,a=re(Ce,t.__scopeDialog);return e.jsx(st,{present:n||a.open,children:a.modal?e.jsx(Fl,{...i,ref:s}):e.jsx(Ll,{...i,ref:s})})});bn.displayName=Ce;var Fl=c.forwardRef((t,s)=>{const r=re(Ce,t.__scopeDialog),n=c.useRef(null),i=ae(s,r.contentRef,n);return c.useEffect(()=>{const a=n.current;if(a)return Ol(a)},[]),e.jsx(jn,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(t.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:K(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&a.preventDefault()}),onFocusOutside:K(t.onFocusOutside,a=>a.preventDefault())})}),Ll=c.forwardRef((t,s)=>{const r=re(Ce,t.__scopeDialog),n=c.useRef(!1),i=c.useRef(!1);return e.jsx(jn,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;r.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),jn=c.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...l}=t,o=re(Ce,r),h=c.useRef(null),p=ae(s,h);return Wo(),e.jsxs(e.Fragment,{children:[e.jsx(tn,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:e.jsx(Zr,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Rs(o.open),...l,ref:p,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Ul,{titleId:o.titleId}),e.jsx($l,{contentRef:h,descriptionId:o.descriptionId})]})]})}),Es="DialogTitle",Nn=c.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,i=re(Es,r);return e.jsx(Q.h2,{id:i.titleId,...n,ref:s})});Nn.displayName=Es;var wn="DialogDescription",Sn=c.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,i=re(wn,r);return e.jsx(Q.p,{id:i.descriptionId,...n,ref:s})});Sn.displayName=wn;var Cn="DialogClose",En=c.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,i=re(Cn,r);return e.jsx(Q.button,{type:"button",...n,ref:s,onClick:K(t.onClick,()=>i.onOpenChange(!1))})});En.displayName=Cn;function Rs(t){return t?"open":"closed"}var Rn="DialogTitleWarning",[kd,kn]=uo(Rn,{contentName:Ce,titleName:Es,docsSlug:"dialog"}),Ul=({titleId:t})=>{const s=kn(Rn),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return c.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Bl="DialogDescriptionWarning",$l=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kn(Bl).contentName}}.`;return c.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");s&&i&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},ql=pn,Vl=yn,Tn=vn,An=bn,On=Nn,_n=Sn,zl=En;const ks=ql,Wl=Vl,Dn=c.forwardRef(({className:t,...s},r)=>e.jsx(Tn,{ref:r,className:V("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Dn.displayName=Tn.displayName;const Pn=c.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Wl,{children:[e.jsx(Dn,{}),e.jsxs(An,{ref:n,className:V("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(zl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pn.displayName=An.displayName;const In=({className:t,...s})=>e.jsx("div",{className:V("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});In.displayName="DialogHeader";const Mn=c.forwardRef(({className:t,...s},r)=>e.jsx(On,{ref:r,className:V("text-lg font-semibold leading-none tracking-tight",t),...s}));Mn.displayName=On.displayName;const Kl=c.forwardRef(({className:t,...s},r)=>e.jsx(_n,{ref:r,className:V("text-sm text-muted-foreground",t),...s}));Kl.displayName=_n.displayName;const rt=c.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:V("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));rt.displayName="Textarea";function Hl({document:t,isOpen:s,onClose:r,onReview:n}){const[i,a]=c.useState(""),[l,o]=c.useState(!1),h=async p=>{o(!0);try{await n(t.id,p,i),r()}catch(u){console.error("Review failed:",u)}finally{o(!1)}};return e.jsx(ks,{open:s,onOpenChange:r,children:e.jsxs("div",{className:"p-6 max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Review KYC Document"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"User:"})," ",t.userName," (",t.userEmail,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Document Type:"})," ",t.documentType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Submitted:"})," ",new Date(t.submittedAt).toLocaleDateString()]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:t.documentUrl,alt:"KYC Document",className:"max-w-full h-auto border rounded"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Review Notes (required for rejection)"}),e.jsx(rt,{value:i,onChange:p=>a(p.target.value),placeholder:"Enter review notes...",rows:4})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{onClick:()=>h("approve"),disabled:l,className:"bg-green-600 hover:bg-green-700",children:"Approve"}),e.jsx(L,{onClick:()=>h("reject"),disabled:l||!i.trim(),variant:"destructive",children:"Reject"}),e.jsx(L,{variant:"outline",onClick:r,children:"Cancel"})]})]})})}function Gl({selectedCount:t,onBatchAction:s}){const[r,n]=c.useState(!1),[i,a]=c.useState(""),[l,o]=c.useState(!1),h=async()=>{o(!0);try{await s("approve")}catch(u){console.error("Batch approve failed:",u)}finally{o(!1)}},p=async()=>{if(i.trim()){o(!0);try{await s("reject",i),n(!1),a("")}catch(u){console.error("Batch reject failed:",u)}finally{o(!1)}}};return t===0?null:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[t," document(s) selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{size:"sm",onClick:h,disabled:l,className:"bg-green-600 hover:bg-green-700",children:"Approve All"}),e.jsx(L,{size:"sm",variant:"destructive",onClick:()=>n(!0),disabled:l,children:"Reject All"})]})]}),e.jsx(ks,{open:r,onOpenChange:n,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reject Selected Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rejection Reason (required)"}),e.jsx(rt,{value:i,onChange:u=>a(u.target.value),placeholder:"Enter reason for rejection...",rows:4})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{onClick:p,disabled:!i.trim()||l,variant:"destructive",children:"Confirm Reject"}),e.jsx(L,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]})})]})}function Ql(){const[t,s]=c.useState([]),[r,n]=c.useState(null),[i,a]=c.useState([]),[l,o]=c.useState(!0),[h,p]=c.useState("all"),[u,m]=c.useState([]),[f,S]=c.useState({total:0,pending:0,approved:0,rejected:0});c.useEffect(()=>{g(),E()},[]);const E=async()=>{try{const v=await fetch("/api/admin/merchant-kyc/pending",{credentials:"include",headers:{"Content-Type":"application/json"}});if(v.ok){const D=await v.json();m(D.data?.submissions||[]),S(D.data?.stats||{total:0,pending:0,approved:0,rejected:0})}}catch(v){console.error("Failed to fetch merchant KYC submissions:",v)}},x=async(v,D,O)=>{try{(await fetch(`/api/admin/merchant-kyc/${v}/review`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:D,reason:O})})).ok&&await E()}catch(b){console.error("Failed to review merchant KYC:",b)}},g=async()=>{try{const v=await fetch("/api/admin/kyc/documents",{credentials:"include",headers:{"Content-Type":"application/json"}});if(v.ok){const D=await v.json();s(D.documents||[])}}catch(v){console.error("Failed to fetch KYC documents:",v)}finally{o(!1)}},w=t.filter(v=>h==="all"?!0:v.status===h),k=t.filter(v=>v.status==="PENDING").length,T=async(v,D,O)=>{try{(await fetch(`/api/admin/kyc/documents/${v}/review`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:D==="approve"?"APPROVED":"REJECTED",reason:O})})).ok&&(await g(),n(null))}catch(b){console.error("Failed to review document:",b)}},R=async(v,D)=>{try{(await fetch("/api/admin/kyc/batch-review",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentIds:i,action:v,reason:D})})).ok&&await g()}catch(O){console.error("Batch action failed:",O)}};return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"KYC Verification"}),e.jsxs("p",{className:"text-gray-600",children:[k," consumer documents | ",f.pending||0," merchant submissions pending"]})]}),i.length>0&&e.jsx(Gl,{selectedCount:i.length,onBatchAction:R})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("select",{value:h,onChange:v=>p(v.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:i.length===w.length,onChange:v=>{v.target.checked?a(w.map(D=>D.id)):a([])}})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:i.includes(v.id),onChange:D=>{D.target.checked?a([...i,v.id]):a(i.filter(O=>O!==v.id))}})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.userName}),e.jsx("div",{className:"text-sm text-gray-500",children:v.userEmail})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:v.documentType.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.status==="PENDING"?"bg-yellow-100 text-yellow-800":v.status==="APPROVED"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(v.submittedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>n(v),className:"text-blue-600 hover:text-blue-900",children:"Review"})})]},v.id))})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden mt-8",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Merchant KYC Submissions"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[f.pending||0," pending submissions"]})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Business"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Business Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.businessRegistrationNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:v.businessEmail})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:v.businessType?.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.ownerFullName}),e.jsx("div",{className:"text-sm text-gray-500",children:v.ownerNationalId})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.status==="PENDING"?"bg-yellow-100 text-yellow-800":v.status==="APPROVED"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(v.submittedAt).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>x(v.id.toString(),"approve"),className:"text-green-600 hover:text-green-900",children:"Approve"}),e.jsx("button",{onClick:()=>x(v.id.toString(),"reject","Documents incomplete"),className:"text-red-600 hover:text-red-900",children:"Reject"})]})]},v.id))})]})]}),r&&e.jsx(Hl,{document:r,isOpen:!!r,onClose:()=>n(null),onReview:T})]})}function Yl({transactionId:t,onClose:s}){return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Transaction Details"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"×"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Transaction ID:"})," ",t]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," Processing"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ₦1,000"]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Close"})})]})}):null}function Jl({isOpen:t,onClose:s,transaction:r,onRefundProcess:n}){if(!t)return null;const i=async()=>{await n({transactionId:r.id,amount:r.amount,reason:"Admin initiated refund"}),s()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Process Refund"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"×"})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Transaction ID:"})," ",r.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Refund Amount:"})," ₦",r.amount]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Process Refund"})]})]})})}function Xl(){const[t,s]=c.useState([]),[r,n]=c.useState({successTotal:0,successCount:0,failedCount:0,pendingCount:0}),[i,a]=c.useState(!0),[l,o]=c.useState(null),[h,p]=c.useState([]),[u,m]=c.useState({status:"",type:"",channel:"",minAmount:"",maxAmount:"",startDate:"",endDate:"",search:""}),[f,S]=c.useState({page:1,limit:20,total:0,totalPages:0}),[E,x]=c.useState(!1),[g,w]=c.useState(!1),[k,T]=c.useState(null),[R,v]=c.useState(null),[D,O]=c.useState(null),b=async()=>{try{a(!0);const d=new URLSearchParams({page:f.page.toString(),limit:f.limit.toString(),...Object.fromEntries(Object.entries(u).filter(([M,H])=>H))}),C=await fetch(`/api/admin/transactions?${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}});if(!C.ok)throw new Error("Failed to fetch transactions");const A=await C.json();s(A.data.items),n(A.data.statistics),S(M=>({...M,total:A.data.total,totalPages:A.data.totalPages})),o(null)}catch(d){o(d instanceof Error?d.message:"Failed to fetch transactions")}finally{a(!1)}};c.useEffect(()=>{b()},[f.page,u]);const P=async(d,C,A)=>{try{if(T(`${C}-${d}`),!(await fetch(`/api/admin/transactions/${d}/${C}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"},body:JSON.stringify(A||{})})).ok)throw new Error(`Failed to ${C} transaction`);b(),console.log(`Transaction ${C}ed successfully`)}catch(M){console.error(`Failed to ${C} transaction:`,M)}finally{T(null)}},N=async(d,C)=>{if(h.length!==0)try{if(T(`bulk-${d}`),!(await fetch("/api/admin/transactions/bulk-action",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"},body:JSON.stringify({transactionIds:h,action:d,reason:C})})).ok)throw new Error(`Failed to ${d} transactions`);p([]),w(!1),b(),console.log(`Bulk ${d} completed successfully`)}catch(A){console.error(`Failed to ${d} transactions:`,A)}finally{T(null)}},_=({status:d})=>{const A=(H=>{switch(H.toUpperCase()){case"SUCCESS":return{color:"bg-green-100 text-green-800",icon:ge};case"PENDING":return{color:"bg-yellow-100 text-yellow-800",icon:je};case"PROCESSING":return{color:"bg-blue-100 text-blue-800",icon:be};case"FAILED":return{color:"bg-red-100 text-red-800",icon:Ve};case"CANCELLED":return{color:"bg-gray-100 text-gray-800",icon:Ve};case"REVERSED":return{color:"bg-purple-100 text-purple-800",icon:Us};default:return{color:"bg-gray-100 text-gray-800",icon:ue}}})(d),M=A.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.color}`,children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),d]})},y=(d,C="NGN")=>{const A=parseFloat(d);return new Intl.NumberFormat("en-NG",{style:"currency",currency:C==="NGN"?"NGN":"USD",minimumFractionDigits:2}).format(A)},j=d=>new Date(d).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transaction Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor and manage all financial transactions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>x(!E),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Filters"]}),e.jsxs("button",{onClick:b,disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(be,{className:`h-4 w-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Ci,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Qe,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Success"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:y(r.successTotal.toString())})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ge,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Successful"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.successCount.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(je,{className:"h-6 w-6 text-yellow-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.pendingCount.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ue,{className:"h-6 w-6 text-red-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Failed"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.failedCount.toLocaleString()})]})})]})})})]}),E&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search transactions...",value:u.search,onChange:d=>m(C=>({...C,search:d.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),e.jsx(kt,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:u.status,onChange:d=>m(C=>({...C,status:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"PROCESSING",children:"Processing"}),e.jsx("option",{value:"SUCCESS",children:"Success"}),e.jsx("option",{value:"FAILED",children:"Failed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"}),e.jsx("option",{value:"REVERSED",children:"Reversed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:u.type,onChange:d=>m(C=>({...C,type:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"DEPOSIT",children:"Deposit"}),e.jsx("option",{value:"WITHDRAWAL",children:"Withdrawal"}),e.jsx("option",{value:"TRANSFER",children:"Transfer"}),e.jsx("option",{value:"PAYMENT",children:"Payment"}),e.jsx("option",{value:"REFUND",children:"Refund"}),e.jsx("option",{value:"COMMISSION",children:"Commission"}),e.jsx("option",{value:"ESCROW_HOLD",children:"Escrow Hold"}),e.jsx("option",{value:"ESCROW_RELEASE",children:"Escrow Release"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel"}),e.jsxs("select",{value:u.channel,onChange:d=>m(C=>({...C,channel:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Channels"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"ussd",children:"USSD"}),e.jsx("option",{value:"qr",children:"QR Code"}),e.jsx("option",{value:"wallet",children:"Wallet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Amount"}),e.jsx("input",{type:"number",placeholder:"0",value:u.minAmount,onChange:d=>m(C=>({...C,minAmount:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Amount"}),e.jsx("input",{type:"number",placeholder:"999999999",value:u.maxAmount,onChange:d=>m(C=>({...C,maxAmount:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:u.startDate,onChange:d=>m(C=>({...C,startDate:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:u.endDate,onChange:d=>m(C=>({...C,endDate:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:e.jsx("button",{onClick:()=>m({status:"",type:"",channel:"",minAmount:"",maxAmount:"",startDate:"",endDate:"",search:""}),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all filters"})})]}),h.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[h.length," transaction(s) selected"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>N("hold","Bulk hold operation"),disabled:!!k,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-yellow-700 bg-yellow-100 hover:bg-yellow-200 disabled:opacity-50",children:[e.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Hold"]}),e.jsxs("button",{onClick:()=>N("release"),disabled:!!k,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-green-700 bg-green-100 hover:bg-green-200 disabled:opacity-50",children:[e.jsx(ft,{className:"h-4 w-4 mr-1"}),"Release"]}),e.jsxs("button",{onClick:()=>N("cancel","Bulk cancellation"),disabled:!!k,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 disabled:opacity-50",children:[e.jsx(Ve,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsx("button",{onClick:()=>p([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear selection"})]})]})}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-8 w-8 animate-spin text-gray-400"})}):l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ue,{className:"h-8 w-8 text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:l}),e.jsx("button",{onClick:b,className:"mt-2 text-blue-600 hover:text-blue-500",children:"Try again"})]})}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found"})]})}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(d=>e.jsx("li",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.includes(d.id),onChange:C=>{C.target.checked?p(A=>[...A,d.id]):p(A=>A.filter(M=>M!==d.id))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mr-4"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.user?.fullName||"Unknown User"}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[d.user?.email," • ",d.user?.userId]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y(d.amount,d.currency)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Fee: ",y(d.fee,d.currency)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{status:d.status}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:d.type})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{children:j(d.initiatedAt)}),d.channel&&e.jsxs("span",{className:"capitalize",children:["via ",d.channel]}),d.paystackReference&&e.jsxs("span",{className:"font-mono text-xs",children:["Ref: ",d.paystackReference]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>v(d.id),className:"p-1 text-gray-400 hover:text-gray-600",title:"View Details",children:e.jsx(et,{className:"h-4 w-4"})}),d.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P(d.id,"hold",{reason:"Manual hold"}),disabled:k===`hold-${d.id}`,className:"p-1 text-yellow-400 hover:text-yellow-600 disabled:opacity-50",title:"Hold Transaction",children:e.jsx(Ls,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(d.id,"release"),disabled:k===`release-${d.id}`,className:"p-1 text-green-400 hover:text-green-600 disabled:opacity-50",title:"Release Transaction",children:e.jsx(ft,{className:"h-4 w-4"})})]}),d.status==="PROCESSING"&&e.jsx("button",{onClick:()=>P(d.id,"release"),disabled:k===`release-${d.id}`,className:"p-1 text-green-400 hover:text-green-600 disabled:opacity-50",title:"Release Transaction",children:e.jsx(ft,{className:"h-4 w-4"})}),(d.status==="SUCCESS"||d.status==="COMPLETED")&&e.jsx("button",{onClick:()=>O(d),disabled:k===`refund-${d.id}`,className:"p-1 text-purple-400 hover:text-purple-600 disabled:opacity-50",title:"Refund Transaction",children:e.jsx(Us,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(ys,{className:"h-4 w-4"})})]})]}),d.description&&e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-xs text-gray-600",children:d.description})})]})]})})},d.id))}),f.totalPages>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>S(d=>({...d,page:Math.max(1,d.page-1)})),disabled:f.page<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>S(d=>({...d,page:Math.min(d.totalPages,d.page+1)})),disabled:f.page>=f.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(f.page-1)*f.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(f.page*f.limit,f.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:f.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>S(d=>({...d,page:Math.max(1,d.page-1)})),disabled:f.page<=1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(5,f.totalPages)},(d,C)=>{const A=C+1;return e.jsx("button",{onClick:()=>S(M=>({...M,page:A})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${f.page===A?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:A},A)}),e.jsx("button",{onClick:()=>S(d=>({...d,page:Math.min(d.totalPages,d.page+1)})),disabled:f.page>=f.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})})]}),e.jsx(Yl,{isOpen:!!R,onClose:()=>v(null),transactionId:R||""}),e.jsx(Jl,{isOpen:!!D,onClose:()=>O(null),transaction:D||{},onRefundProcess:async d=>{D&&await P(D.id,"refund",d)}})]})}const oe=Object.create(null);oe.open="0";oe.close="1";oe.ping="2";oe.pong="3";oe.message="4";oe.upgrade="5";oe.noop="6";const vt=Object.create(null);Object.keys(oe).forEach(t=>{vt[oe[t]]=t});const ds={type:"error",data:"parser error"},Fn=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ln=typeof ArrayBuffer=="function",Un=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Ts=({type:t,data:s},r,n)=>Fn&&s instanceof Blob?r?n(s):gr(s,n):Ln&&(s instanceof ArrayBuffer||Un(s))?r?n(s):gr(new Blob([s]),n):n(oe[t]+(s||"")),gr=(t,s)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];s("b"+(n||""))},r.readAsDataURL(t)};function yr(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Yt;function Zl(t,s){if(Fn&&t.data instanceof Blob)return t.data.arrayBuffer().then(yr).then(s);if(Ln&&(t.data instanceof ArrayBuffer||Un(t.data)))return s(yr(t.data));Ts(t,!1,r=>{Yt||(Yt=new TextEncoder),s(Yt.encode(r))})}const vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<vr.length;t++)qe[vr.charCodeAt(t)]=t;const ec=t=>{let s=t.length*.75,r=t.length,n,i=0,a,l,o,h;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const p=new ArrayBuffer(s),u=new Uint8Array(p);for(n=0;n<r;n+=4)a=qe[t.charCodeAt(n)],l=qe[t.charCodeAt(n+1)],o=qe[t.charCodeAt(n+2)],h=qe[t.charCodeAt(n+3)],u[i++]=a<<2|l>>4,u[i++]=(l&15)<<4|o>>2,u[i++]=(o&3)<<6|h&63;return p},tc=typeof ArrayBuffer=="function",As=(t,s)=>{if(typeof t!="string")return{type:"message",data:Bn(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:sc(t.substring(1),s)}:vt[r]?t.length>1?{type:vt[r],data:t.substring(1)}:{type:vt[r]}:ds},sc=(t,s)=>{if(tc){const r=ec(t);return Bn(r,s)}else return{base64:!0,data:t}},Bn=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},$n="",rc=(t,s)=>{const r=t.length,n=new Array(r);let i=0;t.forEach((a,l)=>{Ts(a,!1,o=>{n[l]=o,++i===r&&s(n.join($n))})})},nc=(t,s)=>{const r=t.split($n),n=[];for(let i=0;i<r.length;i++){const a=As(r[i],s);if(n.push(a),a.type==="error")break}return n};function ic(){return new TransformStream({transform(t,s){Zl(t,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),s.enqueue(i),s.enqueue(r)})}})}let Jt;function ht(t){return t.reduce((s,r)=>s+r.length,0)}function mt(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let n=0;for(let i=0;i<s;i++)r[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function ac(t,s){Jt||(Jt=new TextDecoder);const r=[];let n=0,i=-1,a=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(n===0){if(ht(r)<1)break;const h=mt(r,1);a=(h[0]&128)===128,i=h[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(ht(r)<2)break;const h=mt(r,2);i=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),n=3}else if(n===2){if(ht(r)<8)break;const h=mt(r,8),p=new DataView(h.buffer,h.byteOffset,h.length),u=p.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(ds);break}i=u*Math.pow(2,32)+p.getUint32(4),n=3}else{if(ht(r)<i)break;const h=mt(r,i);o.enqueue(As(a?h:Jt.decode(h),s)),n=0}if(i===0||i>t){o.enqueue(ds);break}}}})}const qn=4;function $(t){if(t)return oc(t)}function oc(t){for(var s in $.prototype)t[s]=$.prototype[s];return t}$.prototype.on=$.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};$.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};$.prototype.off=$.prototype.removeListener=$.prototype.removeAllListeners=$.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===s||n.fn===s){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};$.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)s[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,s)}return this};$.prototype.emitReserved=$.prototype.emit;$.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};$.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Dt=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),ee=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),lc="arraybuffer";function Vn(t,...s){return s.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const cc=ee.setTimeout,dc=ee.clearTimeout;function Pt(t,s){s.useNativeTimers?(t.setTimeoutFn=cc.bind(ee),t.clearTimeoutFn=dc.bind(ee)):(t.setTimeoutFn=ee.setTimeout.bind(ee),t.clearTimeoutFn=ee.clearTimeout.bind(ee))}const uc=1.33;function hc(t){return typeof t=="string"?mc(t):Math.ceil((t.byteLength||t.size)*uc)}function mc(t){let s=0,r=0;for(let n=0,i=t.length;n<i;n++)s=t.charCodeAt(n),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(n++,r+=4);return r}function zn(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function fc(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function pc(t){let s={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let a=r[n].split("=");s[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return s}class xc extends Error{constructor(s,r,n){super(s),this.description=r,this.context=n,this.type="TransportError"}}class Os extends ${constructor(s){super(),this.writable=!1,Pt(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,n){return super.emitReserved("error",new xc(s,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=As(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=fc(s);return r.length?"?"+r:""}}class gc extends Os{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};nc(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,rc(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=zn()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let Wn=!1;try{Wn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const yc=Wn;function vc(){}class bc extends gc{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||n!==s.port}}doWrite(s,r){const n=this.request({method:"POST",data:s});n.on("success",r),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=s}}class ie extends ${constructor(s,r,n){super(),this.createRequest=s,Pt(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var s;const r=Vn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ie.requestsCount++,ie.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=vc,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ie.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ie.requestsCount=0;ie.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",br);else if(typeof addEventListener=="function"){const t="onpagehide"in ee?"pagehide":"unload";addEventListener(t,br,!1)}}function br(){for(let t in ie.requests)ie.requests.hasOwnProperty(t)&&ie.requests[t].abort()}const jc=(function(){const t=Kn({xdomain:!1});return t&&t.responseType!==null})();class Nc extends bc{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=jc&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new ie(Kn,this.uri(),s)}}function Kn(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||yc))return new XMLHttpRequest}catch{}if(!s)try{return new ee[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Hn=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class wc extends Os{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,n=Hn?{}:Vn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const n=s[r],i=r===s.length-1;Ts(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}i&&Dt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=zn()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const Xt=ee.WebSocket||ee.MozWebSocket;class Sc extends wc{createSocket(s,r,n){return Hn?new Xt(s,r,n):r?new Xt(s,r):new Xt(s)}doWrite(s,r){this.ws.send(r)}}class Cc extends Os{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=ac(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=s.readable.pipeThrough(r).getReader(),i=ic();i.readable.pipeTo(s.writable),this._writer=i.writable.getWriter();const a=()=>{n.read().then(({done:o,value:h})=>{o||(this.onPacket(h),a())}).catch(o=>{})};a();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const n=s[r],i=r===s.length-1;this._writer.write(n).then(()=>{i&&Dt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const Ec={websocket:Sc,webtransport:Cc,polling:Nc},Rc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,kc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function us(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=Rc.exec(t||""),a={},l=14;for(;l--;)a[kc[l]]=i[l]||"";return r!=-1&&n!=-1&&(a.source=s,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=Tc(a,a.path),a.queryKey=Ac(a,a.query),a}function Tc(t,s){const r=/\/{2,9}/g,n=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&n.splice(0,1),s.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Ac(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(r[i]=a)}),r}const hs=typeof addEventListener=="function"&&typeof removeEventListener=="function",bt=[];hs&&addEventListener("offline",()=>{bt.forEach(t=>t())},!1);class ve extends ${constructor(s,r){if(super(),this.binaryType=lc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const n=us(s);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=us(r.host).host);Pt(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=pc(this.opts.query)),hs&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},bt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=qn,r.transport=s,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&ve.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",ve.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=hc(i)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,Dt(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,n){return this._sendPacket("message",s,r,n),this}send(s,r,n){return this._sendPacket("message",s,r,n),this}_sendPacket(s,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:s,data:r,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():s()}):this.upgrading?n():s()),this}_onError(s){if(ve.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hs&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=bt.indexOf(this._offlineEventListener);n!==-1&&bt.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}ve.protocol=qn;class Oc extends ve{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),n=!1;ve.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;ve.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function a(){n||(n=!0,u(),r.close(),r=null)}const l=m=>{const f=new Error("probe error: "+m);f.transport=r.name,a(),this.emitReserved("upgradeError",f)};function o(){l("transport closed")}function h(){l("socket closed")}function p(m){r&&m.name!==r.name&&a()}const u=()=>{r.removeListener("open",i),r.removeListener("error",l),r.removeListener("close",o),this.off("close",h),this.off("upgrading",p)};r.once("open",i),r.once("error",l),r.once("close",o),this.once("close",h),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let n=0;n<s.length;n++)~this.transports.indexOf(s[n])&&r.push(s[n]);return r}}let _c=class extends Oc{constructor(s,r={}){const n=typeof s=="object"?s:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>Ec[i]).filter(i=>!!i)),super(s,n)}};function Dc(t,s="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=us(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+s,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}const Pc=typeof ArrayBuffer=="function",Ic=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Gn=Object.prototype.toString,Mc=typeof Blob=="function"||typeof Blob<"u"&&Gn.call(Blob)==="[object BlobConstructor]",Fc=typeof File=="function"||typeof File<"u"&&Gn.call(File)==="[object FileConstructor]";function _s(t){return Pc&&(t instanceof ArrayBuffer||Ic(t))||Mc&&t instanceof Blob||Fc&&t instanceof File}function jt(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(jt(t[r]))return!0;return!1}if(_s(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return jt(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&jt(t[r]))return!0;return!1}function Lc(t){const s=[],r=t.data,n=t;return n.data=ms(r,s),n.attachments=s.length,{packet:n,buffers:s}}function ms(t,s){if(!t)return t;if(_s(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=ms(t[n],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=ms(t[n],s));return r}return t}function Uc(t,s){return t.data=fs(t.data,s),delete t.attachments,t}function fs(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=fs(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=fs(t[r],s));return t}const Bc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$c=5;var F;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(F||(F={}));class qc{constructor(s){this.replacer=s}encode(s){return(s.type===F.EVENT||s.type===F.ACK)&&jt(s)?this.encodeAsBinary({type:s.type===F.EVENT?F.BINARY_EVENT:F.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===F.BINARY_EVENT||s.type===F.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=Lc(s),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}function jr(t){return Object.prototype.toString.call(t)==="[object Object]"}class Ds extends ${constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const n=r.type===F.BINARY_EVENT;n||r.type===F.BINARY_ACK?(r.type=n?F.EVENT:F.ACK,this.reconstructor=new Vc(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(_s(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const n={type:Number(s.charAt(0))};if(F[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===F.BINARY_EVENT||n.type===F.BINARY_ACK){const a=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const l=s.substring(a,r);if(l!=Number(l)||s.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(s.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););n.nsp=s.substring(a,r)}else n.nsp="/";const i=s.charAt(r+1);if(i!==""&&Number(i)==i){const a=r+1;for(;++r;){const l=s.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===s.length)break}n.id=Number(s.substring(a,r+1))}if(s.charAt(++r)){const a=this.tryParse(s.substr(r));if(Ds.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case F.CONNECT:return jr(r);case F.DISCONNECT:return r===void 0;case F.CONNECT_ERROR:return typeof r=="string"||jr(r);case F.EVENT:case F.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Bc.indexOf(r[0])===-1);case F.ACK:case F.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Vc{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=Uc(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ds,Encoder:qc,get PacketType(){return F},protocol:$c},Symbol.toStringTag,{value:"Module"}));function te(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const Wc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Qn extends ${constructor(s,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[te(s,"open",this.onopen.bind(this)),te(s,"packet",this.onpacket.bind(this)),te(s,"error",this.onerror.bind(this)),te(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var n,i,a;if(Wc.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:F.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,m=r.pop();this._registerAckCallback(u,m),l.id=u}const o=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,h=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!o||(h?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[s]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},i),l=(...o)=>{this.io.clearTimeoutFn(a),r.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...r){return new Promise((n,i)=>{const a=(l,o)=>l?i(l):n(o);a.withError=!0,r.push(a),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((i,...a)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:F.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(n=>String(n.id)===s)){const n=this.acks[s];delete this.acks[s],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case F.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case F.EVENT:case F.BINARY_EVENT:this.onevent(s);break;case F.ACK:case F.BINARY_ACK:this.onack(s);break;case F.DISCONNECT:this.ondisconnect();break;case F.CONNECT_ERROR:this.destroy();const n=new Error(s.data.message);n.data=s.data.data,this.emitReserved("connect_error",n);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:F.ACK,id:s,data:i}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:F.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(s===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(s===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,s.data)}}}function Me(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Me.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=(Math.floor(s*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};Me.prototype.reset=function(){this.attempts=0};Me.prototype.setMin=function(t){this.ms=t};Me.prototype.setMax=function(t){this.max=t};Me.prototype.setJitter=function(t){this.jitter=t};class ps extends ${constructor(s,r){var n;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Pt(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Me({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const i=r.parser||zc;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new _c(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=te(r,"open",function(){n.onopen(),s&&s()}),a=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=te(r,"error",a);if(this._timeout!==!1){const o=this._timeout,h=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),r.close()},o);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(i),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(te(s,"ping",this.onping.bind(this)),te(s,"data",this.ondata.bind(this)),te(s,"error",this.onerror.bind(this)),te(s,"close",this.onclose.bind(this)),te(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){Dt(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let n=this.nsps[s];return n?this._autoConnect&&!n.active&&n.connect():(n=new Qn(this,s,r),this.nsps[s]=n),n}_destroy(s){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let n=0;n<r.length;n++)this.engine.write(r[n],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(i=>{i?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",i)):s.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Be={};function _e(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=Dc(t,s.path||"/socket.io"),n=r.source,i=r.id,a=r.path,l=Be[i]&&a in Be[i].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let h;return o?h=new ps(n,s):(Be[i]||(Be[i]=new ps(n,s)),h=Be[i]),r.query&&!s.query&&(s.query=r.queryKey),h.socket(r.path,s)}Object.assign(_e,{Manager:ps,Socket:Qn,io:_e,connect:_e});function Kc(){const[t,s]=c.useState([]),[r,n]=c.useState({cpu:0,memory:0,database:0,activeConnections:0,requestsPerSecond:0,responseTime:0,uptime:0,errors:0}),[i,a]=c.useState({activeUsers:0,onlineDrivers:0,activeOrders:0,completedOrdersToday:0,totalRevenue:0,systemHealth:"HEALTHY"}),[l,o]=c.useState(null),[h,p]=c.useState(null),[u,m]=c.useState(!1),[f,S]=c.useState(!0),[E,x]=c.useState("roadmap"),[g,w]=c.useState({status:"",showBattery:!0,showSignal:!0}),k=c.useRef(null);c.useEffect(()=>{const b=_e("ws://localhost:5000",{path:"/ws",transports:["websocket"]});return b.on("connect",()=>{console.log("Monitoring dashboard connected"),m(!0),b.emit("join_admin_room","monitoring")}),b.on("disconnect",()=>{m(!1)}),b.on("driver_location_update",P=>{s(N=>{const _=N.findIndex(j=>j.driverId===P.driverId),y={driverId:P.driverId,driverName:P.driverName||`Driver ${P.driverId}`,latitude:P.latitude,longitude:P.longitude,status:P.status,lastUpdate:new Date(P.timestamp).toISOString(),orderId:P.orderId,batteryLevel:P.batteryLevel,signalStrength:P.signalStrength};if(_>=0){const j=[...N];return j[_]=y,j}else return[y,...N]})}),b.on("system_metric_update",P=>{n(P.metrics)}),p(b),()=>{b.disconnect()}},[]);const T=async()=>{try{S(!0);const[b,P,N]=await Promise.all([fetch("/api/admin/monitoring/drivers",{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),fetch("/api/admin/monitoring/system-metrics",{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),fetch("/api/admin/monitoring/live-metrics",{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}})]);if(b.ok){const _=await b.json();s(_.data)}if(P.ok){const _=await P.json();n(_.data)}if(N.ok){const _=await N.json();a(_.data)}}catch(b){console.error("Failed to fetch monitoring data:",b)}finally{S(!1)}};c.useEffect(()=>{T();const b=setInterval(T,3e4);return()=>clearInterval(b)},[]);const R=b=>{switch(b){case"ONLINE":return"bg-green-500";case"BUSY":return"bg-blue-500";case"IDLE":return"bg-yellow-500";case"OFFLINE":return"bg-gray-500";default:return"bg-gray-500"}},v=b=>{switch(b){case"HEALTHY":return"text-green-600 bg-green-100";case"WARNING":return"text-yellow-600 bg-yellow-100";case"CRITICAL":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},D=t.filter(b=>!(g.status&&b.status!==g.status)),O=b=>{const P=Math.floor(b/86400),N=Math.floor(b%86400/3600),_=Math.floor(b%3600/60);return`${P}d ${N}h ${_}m`};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ne,{className:"h-6 w-6 mr-2 text-blue-600"}),"Real-time Monitoring"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Live system monitoring and driver tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${u?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm text-gray-500",children:u?"Connected":"Disconnected"})]}),e.jsxs("button",{onClick:T,disabled:f,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(be,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.activeUsers.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Lt,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Online Drivers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.onlineDrivers.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-orange-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"h-8 w-8 text-orange-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Orders"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.activeOrders.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rt,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completed Today"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.completedOrdersToday.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-indigo-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-indigo-500 text-2xl font-bold",children:"₦"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Revenue Today"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["₦",i.totalRevenue.toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"System Health"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(i.systemHealth)}`,children:i.systemHealth})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(es,{className:"h-5 w-5 mr-2 text-gray-500"}),"System Metrics"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ar,{className:"h-4 w-4 text-blue-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"CPU Usage"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r.cpu>80?"bg-red-500":r.cpu>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${r.cpu}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.cpu,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ts,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Memory Usage"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r.memory>80?"bg-red-500":r.memory>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${r.memory}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.memory,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ei,{className:"h-4 w-4 text-purple-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Database"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r.database>80?"bg-red-500":r.database>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${r.database}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.database,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Connections"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.activeConnections})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Requests/sec"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.requestsPerSecond})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Response Time"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[r.responseTime,"ms"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Uptime"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O(r.uptime)})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(Lt,{className:"h-5 w-5 mr-2 text-gray-500"}),"Driver Status Overview"]}),e.jsxs("select",{value:g.status,onChange:b=>w(P=>({...P,status:b.target.value})),className:"text-sm border border-gray-300 rounded-md px-3 py-1",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"ONLINE",children:"Online"}),e.jsx("option",{value:"BUSY",children:"Busy"}),e.jsx("option",{value:"IDLE",children:"Idle"}),e.jsx("option",{value:"OFFLINE",children:"Offline"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Online"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(b=>b.status==="ONLINE").length})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Busy"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(b=>b.status==="BUSY").length})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Idle"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(b=>b.status==="IDLE").length})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Offline"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(b=>b.status==="OFFLINE").length})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(Bs,{className:"h-5 w-5 mr-2 text-red-500"}),"Driver Location Tracking"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(E==="roadmap"?"satellite":"roadmap"),className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:E==="roadmap"?"Satellite":"Roadmap"}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Ri,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"relative h-96",children:e.jsxs("div",{ref:k,className:"w-full h-full bg-gray-100 rounded-b-lg flex items-center justify-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Bs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500",children:["Interactive map showing ",D.length," drivers"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Map integration would show real locations here"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:D.slice(0,5).map((b,P)=>e.jsx("div",{className:"absolute",style:{left:`${20+P*15}%`,top:`${30+P*10}%`},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white shadow-md ${R(b.status)}`}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-90 whitespace-nowrap",children:b.driverName})]})},b.driverId))})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(ki,{className:"h-5 w-5 mr-2 text-blue-500"}),"Active Drivers (",D.length,")"]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:D.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(Lt,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No drivers found"})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:D.map(b=>e.jsxs("li",{className:`p-4 cursor-pointer hover:bg-gray-50 ${l?.driverId===b.driverId?"bg-blue-50":""}`,onClick:()=>o(b),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${R(b.status)}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.driverName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",b.driverId]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b.status==="ONLINE"?"bg-green-100 text-green-800":b.status==="BUSY"?"bg-blue-100 text-blue-800":b.status==="IDLE"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:b.status})})]}),g.showBattery&&b.batteryLevel&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(Ti,{className:"h-3 w-3 text-gray-400"}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${b.batteryLevel>50?"bg-green-500":b.batteryLevel>20?"bg-yellow-500":"bg-red-500"}`,style:{width:`${b.batteryLevel}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[b.batteryLevel,"%"]})]}),g.showSignal&&b.signalStrength&&e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx(Ai,{className:"h-3 w-3 text-gray-400"}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(P=>e.jsx("div",{className:`w-1 h-2 rounded-sm ${P<=(b.signalStrength||0)/25?"bg-green-500":"bg-gray-300"}`},P))}),e.jsxs("span",{className:"text-xs text-gray-500",children:[b.signalStrength,"%"]})]}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Last update: ",new Date(b.lastUpdate).toLocaleTimeString()]})]},b.driverId))})})]})})]})]})}function Hc(){const[t,s]=c.useState([]),[r,n]=c.useState([]),[i,a]=c.useState({totalAlerts:0,criticalAlerts:0,resolvedToday:0,falsePositiveRate:0,avgResolutionTime:0,blockedTransactions:0,flaggedAccounts:0,totalRiskReduction:0}),[l,o]=c.useState(!0),[h,p]=c.useState(null),[u,m]=c.useState([]),[f,S]=c.useState({severity:"",status:"",type:"",search:"",startDate:"",endDate:""}),[E,x]=c.useState(!1),[g,w]=c.useState(null);c.useEffect(()=>{const N=_e("ws://localhost:5000",{path:"/ws",transports:["websocket"]});return N.on("connect",()=>{console.log("Fraud dashboard connected"),N.emit("join_admin_room","fraud")}),N.on("fraud_alert",_=>{_.type==="fraud_alert"&&(s(y=>[_.alert,...y]),T())}),N.on("suspicious_activity",_=>{_.type==="suspicious_activity"&&n(y=>[_.activity,...y.slice(0,49)])}),N.on("fraud_alert_updated",_=>{_.type==="fraud_alert_updated"&&k()}),()=>N.disconnect()},[]);const k=async()=>{try{o(!0);const N=new URLSearchParams({...Object.fromEntries(Object.entries(f).filter(([M,H])=>H))}),[_,y,j]=await Promise.all([fetch(`/api/admin/fraud/alerts?${N}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),fetch("/api/admin/fraud/activities",{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),fetch("/api/admin/fraud/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}})]);if(!_.ok||!y.ok||!j.ok)throw new Error("Failed to fetch fraud data");const[d,C,A]=await Promise.all([_.json(),y.json(),j.json()]);s(d.data),n(C.data),a(A.data),p(null)}catch(N){p(N instanceof Error?N.message:"Failed to fetch fraud data")}finally{o(!1)}},T=async()=>{try{const N=await fetch("/api/admin/fraud/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}});if(N.ok){const _=await N.json();a(_.data)}}catch(N){console.error("Failed to fetch stats:",N)}};c.useEffect(()=>{k()},[f]);const R=async(N,_,y)=>{try{if(w(`${_}-${N}`),!(await fetch(`/api/admin/fraud/alerts/${N}/${_}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"},body:JSON.stringify({reason:y})})).ok)throw new Error(`Failed to ${_} alert`);k(),console.log(`Alert ${_}ed successfully`)}catch(j){console.error(`Failed to ${_} alert:`,j)}finally{w(null)}},v=async(N,_)=>{if(u.length!==0)try{if(w(`bulk-${N}`),!(await fetch("/api/admin/fraud/alerts/bulk-action",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"},body:JSON.stringify({alertIds:u,action:N,reason:_})})).ok)throw new Error(`Failed to ${N} alerts`);m([]),k(),console.log(`Bulk ${N} completed successfully`)}catch(y){console.error(`Failed to ${N} alerts:`,y)}finally{w(null)}},D=async(N,_,y)=>{try{if(!(await fetch(`/api/admin/fraud/users/${N}/${_}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"},body:JSON.stringify({reason:y})})).ok)throw new Error(`Failed to ${_} user`);k(),console.log(`User ${_}ged successfully`)}catch(j){console.error(`Failed to ${_} user:`,j)}},O=N=>{switch(N){case"CRITICAL":return"bg-red-100 text-red-800 border-red-200";case"HIGH":return"bg-orange-100 text-orange-800 border-orange-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"LOW":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},b=N=>{switch(N){case"ACTIVE":return"bg-red-100 text-red-800";case"INVESTIGATING":return"bg-blue-100 text-blue-800";case"RESOLVED":return"bg-green-100 text-green-800";case"FALSE_POSITIVE":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},P=N=>new Date(N).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(se,{className:"h-6 w-6 mr-2 text-red-600"}),"Fraud Detection Dashboard"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor and manage suspicious activities in real-time"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>x(!E),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Filters"]}),e.jsxs("button",{onClick:k,disabled:l,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[e.jsx(be,{className:`h-4 w-4 mr-2 ${l?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg border-l-4 border-red-500",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ue,{className:"h-6 w-6 text-red-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Alerts"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.totalAlerts.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg border-l-4 border-orange-500",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Rt,{className:"h-6 w-6 text-orange-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Critical Alerts"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.criticalAlerts.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg border-l-4 border-green-500",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ge,{className:"h-6 w-6 text-green-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Resolved Today"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.resolvedToday.toLocaleString()})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg border-l-4 border-blue-500",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ze,{className:"h-6 w-6 text-blue-400"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Flagged Accounts"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.flaggedAccounts.toLocaleString()})]})})]})})})]}),E&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search alerts...",value:f.search,onChange:N=>S(_=>({..._,search:N.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm"}),e.jsx(kt,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity"}),e.jsxs("select",{value:f.severity,onChange:N=>S(_=>({..._,severity:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Severities"}),e.jsx("option",{value:"CRITICAL",children:"Critical"}),e.jsx("option",{value:"HIGH",children:"High"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"LOW",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:f.status,onChange:N=>S(_=>({..._,status:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INVESTIGATING",children:"Investigating"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"FALSE_POSITIVE",children:"False Positive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:f.type,onChange:N=>S(_=>({..._,type:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"SUSPICIOUS_LOGIN",children:"Suspicious Login"}),e.jsx("option",{value:"UNUSUAL_TRANSACTION",children:"Unusual Transaction"}),e.jsx("option",{value:"VELOCITY_CHECK",children:"Velocity Check"}),e.jsx("option",{value:"DEVICE_MISMATCH",children:"Device Mismatch"}),e.jsx("option",{value:"LOCATION_ANOMALY",children:"Location Anomaly"}),e.jsx("option",{value:"PATTERN_MATCHING",children:"Pattern Matching"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:f.startDate,onChange:N=>S(_=>({..._,startDate:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:f.endDate,onChange:N=>S(_=>({..._,endDate:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>S({severity:"",status:"",type:"",search:"",startDate:"",endDate:""}),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all filters"})})]}),u.length>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium text-red-800",children:[u.length," alert(s) selected"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>v("investigate"),disabled:!!g,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 disabled:opacity-50",children:[e.jsx(ft,{className:"h-4 w-4 mr-1"}),"Investigate"]}),e.jsxs("button",{onClick:()=>v("resolve","Bulk resolution"),disabled:!!g,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-green-700 bg-green-100 hover:bg-green-200 disabled:opacity-50",children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Resolve"]}),e.jsxs("button",{onClick:()=>v("false_positive","Marked as false positive"),disabled:!!g,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-gray-700 bg-gray-100 hover:bg-gray-200 disabled:opacity-50",children:[e.jsx(Ve,{className:"h-4 w-4 mr-1"}),"False Positive"]}),e.jsx("button",{onClick:()=>m([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear selection"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fraud Alerts"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:l?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(be,{className:"h-6 w-6 animate-spin text-gray-400"})}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No fraud alerts found"})]})}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(N=>e.jsx("li",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:u.includes(N.id),onChange:_=>{_.target.checked?m(y=>[...y,N.id]):m(y=>y.filter(j=>j!==N.id))},className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${O(N.severity)}`,children:N.severity}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(N.status)}`,children:N.status}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Risk Score: ",N.riskScore,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>R(N.id,"investigate"),disabled:g===`investigate-${N.id}`,className:"p-1 text-blue-400 hover:text-blue-600 disabled:opacity-50",title:"Investigate",children:e.jsx(et,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(N.userId,"flag","Flagged due to fraud alert"),className:"p-1 text-orange-400 hover:text-orange-600",title:"Flag Account",children:e.jsx(Oi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(N.id,"resolve","Manual resolution"),disabled:g===`resolve-${N.id}`,className:"p-1 text-green-400 hover:text-green-600 disabled:opacity-50",title:"Resolve",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(ys,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.title}),e.jsx("p",{className:"text-sm text-gray-600",children:N.description})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["User: ",N.user.fullName]}),e.jsxs("span",{children:["(",N.user.userId,")"]}),e.jsx("span",{children:P(N.detectedAt)})]}),N.metadata.relatedAlerts&&e.jsxs("span",{className:"text-red-600 font-medium",children:["+",N.metadata.relatedAlerts," related"]})]})]})]})},N.id))})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 mr-2 text-green-500"}),"Live Activity Monitor"]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.length===0?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activities"})]})}):e.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(N=>e.jsx("li",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full mt-2 animate-pulse"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.activityType}),e.jsx("p",{className:"text-xs text-gray-600",children:N.description}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:N.riskIndicators.map((_,y)=>e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:_},y))}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[e.jsx("div",{children:N.user.fullName}),e.jsx("div",{children:P(N.timestamp)})]})]})]})},N.id))})})]})})]})]})}const U=c.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:V("curved-card border bg-card text-card-foreground shadow-sm",t),...s}));U.displayName="Card";const Y=c.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:V("flex flex-col space-y-1.5 p-6",t),...s}));Y.displayName="CardHeader";const J=c.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:V("text-2xl font-semibold leading-none tracking-tight",t),...s}));J.displayName="CardTitle";const He=c.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:V("text-sm text-muted-foreground",t),...s}));He.displayName="CardDescription";const z=c.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:V("p-6 pt-0",t),...s}));z.displayName="CardContent";const Gc=c.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:V("flex items-center p-6 pt-0",t),...s}));Gc.displayName="CardFooter";function Qc(t){const s=t+"CollectionProvider",[r,n]=At(s),[i,a]=r(s,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:g,children:w}=x,k=de.useRef(null),T=de.useRef(new Map).current;return e.jsx(i,{scope:g,itemMap:T,collectionRef:k,children:w})};l.displayName=s;const o=t+"CollectionSlot",h=Ct(o),p=de.forwardRef((x,g)=>{const{scope:w,children:k}=x,T=a(o,w),R=ae(g,T.collectionRef);return e.jsx(h,{ref:R,children:k})});p.displayName=o;const u=t+"CollectionItemSlot",m="data-radix-collection-item",f=Ct(u),S=de.forwardRef((x,g)=>{const{scope:w,children:k,...T}=x,R=de.useRef(null),v=ae(g,R),D=a(u,w);return de.useEffect(()=>(D.itemMap.set(R,{ref:R,...T}),()=>void D.itemMap.delete(R))),e.jsx(f,{[m]:"",ref:v,children:k})});S.displayName=u;function E(x){const g=a(t+"CollectionConsumer",x);return de.useCallback(()=>{const k=g.collectionRef.current;if(!k)return[];const T=Array.from(k.querySelectorAll(`[${m}]`));return Array.from(g.itemMap.values()).sort((D,O)=>T.indexOf(D.ref.current)-T.indexOf(O.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:l,Slot:p,ItemSlot:S},E,n]}var Yc=c.createContext(void 0);function Yn(t){const s=c.useContext(Yc);return t||s||"ltr"}var Zt="rovingFocusGroup.onEntryFocus",Jc={bubbles:!1,cancelable:!0},nt="RovingFocusGroup",[xs,Jn,Xc]=Qc(nt),[Zc,Xn]=At(nt,[Xc]),[ed,td]=Zc(nt),Zn=c.forwardRef((t,s)=>e.jsx(xs.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(xs.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(sd,{...t,ref:s})})}));Zn.displayName=nt;var sd=c.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:u=!1,...m}=t,f=c.useRef(null),S=ae(s,f),E=Yn(a),[x,g]=Ss({prop:l,defaultProp:o??null,onChange:h,caller:nt}),[w,k]=c.useState(!1),T=De(p),R=Jn(r),v=c.useRef(!1),[D,O]=c.useState(0);return c.useEffect(()=>{const b=f.current;if(b)return b.addEventListener(Zt,T),()=>b.removeEventListener(Zt,T)},[T]),e.jsx(ed,{scope:r,orientation:n,dir:E,loop:i,currentTabStopId:x,onItemFocus:c.useCallback(b=>g(b),[g]),onItemShiftTab:c.useCallback(()=>k(!0),[]),onFocusableItemAdd:c.useCallback(()=>O(b=>b+1),[]),onFocusableItemRemove:c.useCallback(()=>O(b=>b-1),[]),children:e.jsx(Q.div,{tabIndex:w||D===0?-1:0,"data-orientation":n,...m,ref:S,style:{outline:"none",...t.style},onMouseDown:K(t.onMouseDown,()=>{v.current=!0}),onFocus:K(t.onFocus,b=>{const P=!v.current;if(b.target===b.currentTarget&&P&&!w){const N=new CustomEvent(Zt,Jc);if(b.currentTarget.dispatchEvent(N),!N.defaultPrevented){const _=R().filter(A=>A.focusable),y=_.find(A=>A.active),j=_.find(A=>A.id===x),C=[y,j,..._].filter(Boolean).map(A=>A.ref.current);si(C,u)}}v.current=!1}),onBlur:K(t.onBlur,()=>k(!1))})})}),ei="RovingFocusGroupItem",ti=c.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,children:l,...o}=t,h=Ke(),p=a||h,u=td(ei,r),m=u.currentTabStopId===p,f=Jn(r),{onFocusableItemAdd:S,onFocusableItemRemove:E,currentTabStopId:x}=u;return c.useEffect(()=>{if(n)return S(),()=>E()},[n,S,E]),e.jsx(xs.ItemSlot,{scope:r,id:p,focusable:n,active:i,children:e.jsx(Q.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:s,onMouseDown:K(t.onMouseDown,g=>{n?u.onItemFocus(p):g.preventDefault()}),onFocus:K(t.onFocus,()=>u.onItemFocus(p)),onKeyDown:K(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const w=id(g,u.orientation,u.dir);if(w!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let T=f().filter(R=>R.focusable).map(R=>R.ref.current);if(w==="last")T.reverse();else if(w==="prev"||w==="next"){w==="prev"&&T.reverse();const R=T.indexOf(g.currentTarget);T=u.loop?ad(T,R+1):T.slice(R+1)}setTimeout(()=>si(T))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:x!=null}):l})})});ti.displayName=ei;var rd={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nd(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function id(t,s,r){const n=nd(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return rd[n]}function si(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function ad(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var od=Zn,ld=ti,It="Tabs",[cd,Ad]=At(It,[Xn]),ri=Xn(),[dd,Ps]=cd(It),ni=c.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:o,activationMode:h="automatic",...p}=t,u=Yn(o),[m,f]=Ss({prop:n,onChange:i,defaultProp:a??"",caller:It});return e.jsx(dd,{scope:r,baseId:Ke(),value:m,onValueChange:f,orientation:l,dir:u,activationMode:h,children:e.jsx(Q.div,{dir:u,"data-orientation":l,...p,ref:s})})});ni.displayName=It;var ii="TabsList",ai=c.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,a=Ps(ii,r),l=ri(r);return e.jsx(od,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:n,children:e.jsx(Q.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:s})})});ai.displayName=ii;var oi="TabsTrigger",li=c.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=t,l=Ps(oi,r),o=ri(r),h=ui(l.baseId,n),p=hi(l.baseId,n),u=n===l.value;return e.jsx(ld,{asChild:!0,...o,focusable:!i,active:u,children:e.jsx(Q.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":p,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...a,ref:s,onMouseDown:K(t.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?l.onValueChange(n):m.preventDefault()}),onKeyDown:K(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(n)}),onFocus:K(t.onFocus,()=>{const m=l.activationMode!=="manual";!u&&!i&&m&&l.onValueChange(n)})})})});li.displayName=oi;var ci="TabsContent",di=c.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...l}=t,o=Ps(ci,r),h=ui(o.baseId,n),p=hi(o.baseId,n),u=n===o.value,m=c.useRef(u);return c.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(st,{present:i||u,children:({present:f})=>e.jsx(Q.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":h,hidden:!f,id:p,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:f&&a})})});di.displayName=ci;function ui(t,s){return`${t}-trigger-${s}`}function hi(t,s){return`${t}-content-${s}`}var ud=ni,mi=ai,fi=li,pi=di;const Is=ud,Mt=c.forwardRef(({className:t,...s},r)=>e.jsx(mi,{ref:r,className:V("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));Mt.displayName=mi.displayName;const X=c.forwardRef(({className:t,...s},r)=>e.jsx(fi,{ref:r,className:V("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));X.displayName=fi.displayName;const xe=c.forwardRef(({className:t,...s},r)=>e.jsx(pi,{ref:r,className:V("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));xe.displayName=pi.displayName;const hd=c.createContext(null);function md(){const t=c.useContext(hd);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function fd(){const[t,s]=c.useState(null),[r,n]=c.useState(!1),{user:i}=md(),a=c.useRef(0),l=5;return c.useEffect(()=>{if(!i){t&&(t.disconnect(),s(null),n(!1));return}const u=window.location.origin,m=_e(u,{transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:l,reconnectionDelay:1e3});return m.on("connect",()=>{console.log("WebSocket connected"),n(!0),a.current=0,m.emit("join_user_room",i.id),i.role==="ADMIN"&&(m.emit("join_admin_room","user_management"),m.emit("join_admin_room","transaction_monitoring"),m.emit("join_admin_room","kyc_verification"))}),m.on("disconnect",()=>{console.log("WebSocket disconnected"),n(!1)}),m.on("connect_error",f=>{console.error("WebSocket connection error:",f),a.current+=1,a.current>=l&&console.error("Max reconnection attempts reached")}),m.on("CONNECTION_ACK",f=>{console.log("Connection acknowledged:",f)}),s(m),()=>{m.disconnect()}},[i]),{socket:t,connected:r,emit:(u,m)=>{t&&r?t.emit(u,m):console.warn("Socket not connected, cannot emit event:",u)},on:(u,m)=>{t&&t.on(u,m)},off:(u,m)=>{t&&(m?t.off(u,m):t.off(u))}}}const pd=()=>{const[t,s]=c.useState([]),[r,n]=c.useState({totalTickets:0,openTickets:0,inProgressTickets:0,resolvedTickets:0,urgentTickets:0,unassignedTickets:0}),[i,a]=c.useState([]),[l,o]=c.useState(!0),[h,p]=c.useState([]),[u,m]=c.useState(null),[f,S]=c.useState(null),[E,x]=c.useState({status:"",priority:"",search:"",page:1}),[g,w]=c.useState(""),[k,T]=c.useState(""),{toast:R}=Tt(),{socket:v}=fd();c.useEffect(()=>{D(),O()},[E]),c.useEffect(()=>{if(v)return v.on("new_support_ticket",d=>{n(C=>({...C,totalTickets:C.totalTickets+1,openTickets:C.openTickets+1})),O(),R({title:"New Support Ticket",description:`New ${d.priority} priority ticket: ${d.subject}`})}),v.on("ticket_response",d=>{u===d.ticketId&&b(d.ticketId),R({title:"New Response",description:`User responded to ticket ${d.ticketNumber}`})}),()=>{v.off("new_support_ticket"),v.off("ticket_response")}},[v,u,R]);const D=async()=>{try{const C=await(await fetch("/api/admin-support/dashboard/stats",{credentials:"include"})).json();C.success&&(n(C.stats),a(C.recentTickets))}catch(d){console.error("Failed to fetch dashboard stats:",d)}},O=async()=>{try{const d=new URLSearchParams;E.status&&d.append("status",E.status),E.priority&&d.append("priority",E.priority),E.search&&d.append("search",E.search),d.append("page",E.page.toString());const A=await(await fetch(`/api/admin-support/tickets?${d}`,{credentials:"include"})).json();A.success?s(A.tickets):R({title:"Error",description:A.message||"Failed to fetch tickets",variant:"destructive"})}catch{R({title:"Error",description:"Failed to fetch support tickets",variant:"destructive"})}finally{o(!1)}},b=async d=>{try{const A=await(await fetch(`/api/admin-support/tickets/${d}`,{credentials:"include"})).json();A.success&&S(A)}catch{R({title:"Error",description:"Failed to fetch ticket details",variant:"destructive"})}},P=async(d,C)=>{try{const M=await(await fetch(`/api/admin-support/tickets/${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(C)})).json();M.success?(O(),D(),u===d&&b(d),R({title:"Success",description:"Ticket updated successfully"})):R({title:"Error",description:M.message||"Failed to update ticket",variant:"destructive"})}catch{R({title:"Error",description:"Failed to update ticket",variant:"destructive"})}},N=async d=>{if(d.preventDefault(),!(!u||!g.trim()))try{const A=await(await fetch(`/api/admin-support/tickets/${u}/responses`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({message:g,changeStatus:k||void 0})})).json();A.success?(w(""),T(""),b(u),O(),D(),R({title:"Success",description:"Response added successfully"})):R({title:"Error",description:A.message||"Failed to add response",variant:"destructive"})}catch{R({title:"Error",description:"Failed to add response",variant:"destructive"})}},_=async(d,C)=>{if(h.length===0){R({title:"Warning",description:"Please select tickets to perform bulk actions",variant:"destructive"});return}try{const M=await(await fetch("/api/admin-support/tickets/bulk",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({ticketIds:h,action:d,value:C})})).json();M.success?(p([]),O(),D(),R({title:"Success",description:M.message})):R({title:"Error",description:M.message||"Failed to perform bulk action",variant:"destructive"})}catch{R({title:"Error",description:"Failed to perform bulk action",variant:"destructive"})}},y=d=>{switch(d){case"OPEN":return"bg-blue-100 text-blue-800";case"IN_PROGRESS":return"bg-yellow-100 text-yellow-800";case"RESOLVED":return"bg-green-100 text-green-800";case"CLOSED":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},j=d=>{switch(d){case"LOW":return"bg-gray-100 text-gray-800";case"NORMAL":return"bg-blue-100 text-blue-800";case"HIGH":return"bg-orange-100 text-orange-800";case"URGENT":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return l?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading support dashboard..."})]})}):e.jsx("div",{className:"flex-1 p-6 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Support Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer support tickets and responses"})]})}),e.jsxs(Is,{defaultValue:"dashboard",className:"w-full",children:[e.jsxs(Mt,{className:"grid w-full grid-cols-3",children:[e.jsx(X,{value:"dashboard",children:"Dashboard"}),e.jsx(X,{value:"tickets",children:"All Tickets"}),e.jsx(X,{value:"details",children:"Ticket Details"})]}),e.jsxs(xe,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(U,{className:"p-4 rounded-brill",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.totalTickets})]}),e.jsxs(U,{className:"p-4 rounded-brill",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Open"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.openTickets})]}),e.jsxs(U,{className:"p-4 rounded-brill",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.inProgressTickets})]}),e.jsxs(U,{className:"p-4 rounded-brill",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.resolvedTickets})]}),e.jsxs(U,{className:"p-4 rounded-brill",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Urgent"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.urgentTickets})]}),e.jsxs(U,{className:"p-4 rounded-brill",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Unassigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.unassignedTickets})]})]}),e.jsx(U,{className:"rounded-brill",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Tickets"}),e.jsx("div",{className:"space-y-3",children:i.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["#",d.ticketNumber]}),e.jsx("p",{className:"text-sm text-gray-600",children:d.subject})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:j(d.priority),children:d.priority}),e.jsx(W,{className:y(d.status),children:d.status})]})]},d.id))})]})})]}),e.jsxs(xe,{value:"tickets",className:"space-y-6",children:[e.jsx(U,{className:"p-4 rounded-brill",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(Je,{placeholder:"Search tickets...",value:E.search,onChange:d=>x({...E,search:d.target.value,page:1}),className:"max-w-xs rounded-brill"}),e.jsxs("select",{value:E.status,onChange:d=>x({...E,status:d.target.value,page:1}),className:"px-3 py-2 border border-gray-300 rounded-brill focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"OPEN",children:"Open"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]}),e.jsxs("select",{value:E.priority,onChange:d=>x({...E,priority:d.target.value,page:1}),className:"px-3 py-2 border border-gray-300 rounded-brill focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Priority"}),e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"NORMAL",children:"Normal"}),e.jsx("option",{value:"HIGH",children:"High"}),e.jsx("option",{value:"URGENT",children:"Urgent"})]})]})}),h.length>0&&e.jsx(U,{className:"p-4 rounded-brill",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[h.length," ticket(s) selected"]}),e.jsx(L,{size:"sm",onClick:()=>_("status","IN_PROGRESS"),className:"rounded-brill",children:"Mark In Progress"}),e.jsx(L,{size:"sm",onClick:()=>_("status","RESOLVED"),className:"rounded-brill",children:"Mark Resolved"}),e.jsx(L,{size:"sm",variant:"outline",onClick:()=>p([]),className:"rounded-brill",children:"Clear Selection"})]})}),e.jsx(U,{className:"rounded-brill",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:t.map(d=>e.jsxs("div",{className:"flex items-start gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:h.includes(d.id),onChange:C=>{C.target.checked?p([...h,d.id]):p(h.filter(A=>A!==d.id))},className:"mt-1"}),e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>{m(d.id),b(d.id)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["#",d.ticketNumber," - ",d.subject]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[d.name," (",d.email,") - ",d.userRole]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Created: ",new Date(d.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:j(d.priority),children:d.priority}),e.jsx(W,{className:y(d.status),children:d.status})]})]})})]},d.id))})})})]}),e.jsx(xe,{value:"details",children:e.jsx(U,{className:"rounded-brill",children:e.jsx("div",{className:"p-6",children:u&&f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold",children:["#",f.ticket.ticketNumber]}),e.jsx("h4",{className:"text-lg text-gray-900 mt-1",children:f.ticket.subject}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[f.ticket.name," (",f.ticket.email,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:j(f.ticket.priority),children:f.ticket.priority}),e.jsx(W,{className:y(f.ticket.status),children:f.ticket.status})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{size:"sm",onClick:()=>P(u,{status:"IN_PROGRESS"}),disabled:f.ticket.status==="IN_PROGRESS",className:"rounded-brill",children:"In Progress"}),e.jsx(L,{size:"sm",onClick:()=>P(u,{status:"RESOLVED"}),disabled:f.ticket.status==="RESOLVED",className:"rounded-brill",children:"Resolve"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Original Message"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-700",children:f.ticket.message})})]}),f.responses.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Conversation"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.responses.map(d=>e.jsxs("div",{className:`p-4 rounded-lg ${d.responderType==="ADMIN"?"bg-blue-50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(W,{variant:d.responderType==="ADMIN"?"default":"secondary",children:d.responderType==="ADMIN"?"Support Agent":"Customer"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(d.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-gray-700",children:d.message})]},d.id))})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Response"}),e.jsx(rt,{value:g,onChange:d=>w(d.target.value),placeholder:"Type your response to the customer...",rows:4,className:"rounded-brill"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:k,onChange:d=>T(d.target.value),className:"px-3 py-2 border border-gray-300 rounded-brill focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Keep current status"}),e.jsx("option",{value:"IN_PROGRESS",children:"Mark In Progress"}),e.jsx("option",{value:"RESOLVED",children:"Mark Resolved"}),e.jsx("option",{value:"CLOSED",children:"Mark Closed"})]}),e.jsx(L,{type:"submit",disabled:!g.trim(),className:"rounded-brill",children:"Send Response"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Select a ticket from the tickets tab to view details"})})})})})]})]})})},xd=()=>{const[t,s]=c.useState("all"),[r,n]=c.useState(null),[i,a]=c.useState(!1),[l,o]=c.useState(""),[h,p]=c.useState(""),[u,m]=c.useState(null),f=tt();c.useEffect(()=>{const d=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}`,C=new WebSocket(d);return C.onopen=()=>{console.log("WebSocket connected for admin escrow management"),C.send(JSON.stringify({type:"join_room",room:"admin_dashboard"}))},C.onmessage=A=>{switch(JSON.parse(A.data).type){case"escrow_dispute_resolved":case"escrow_status_update":case"dispute_escalated":f.invalidateQueries({queryKey:["admin-escrow"]}),f.invalidateQueries({queryKey:["escrow-analytics"]}),toast({title:"Escrow Update",description:"Escrow transaction status has been updated"});break}},C.onclose=()=>{console.log("WebSocket disconnected")},m(C),()=>{C.close()}},[f]);const{data:S,isLoading:E}=Te({queryKey:["admin-escrow",t],queryFn:async()=>{const j=await fetch(`/api/admin/escrow?status=${t}&limit=50&offset=0`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch escrow transactions");return j.json()},refetchInterval:3e4}),{data:x}=Te({queryKey:["escrow-analytics"],queryFn:async()=>{const j=await fetch("/api/admin/escrow/analytics",{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch analytics");return j.json()},refetchInterval:6e4}),{data:g}=Te({queryKey:["dispute-evidence",r?.id],queryFn:async()=>{if(!r)return null;const j=await fetch(`/api/admin/escrow/${r.id}/evidence`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch evidence");return j.json()},enabled:!!r&&r.status==="DISPUTED"}),w=ze({mutationFn:async({action:j,notes:d,partialAmount:C})=>{const A=await fetch("/api/admin/escrow/resolve-dispute",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({escrowId:r?.id,action:j,notes:d,partialAmount:C})});if(!A.ok)throw new Error("Failed to resolve dispute");return A.json()},onSuccess:()=>{toast({title:"Dispute Resolved",description:"The dispute has been successfully resolved"}),a(!1),o(""),p(""),f.invalidateQueries({queryKey:["admin-escrow"]}),f.invalidateQueries({queryKey:["escrow-analytics"]})},onError:j=>{toast({title:"Error",description:j.message||"Failed to resolve dispute",variant:"destructive"})}}),k=ze({mutationFn:async j=>{const d=await fetch("/api/admin/escrow/release",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({escrowId:j,reason:"Admin early release"})});if(!d.ok)throw new Error("Failed to release escrow");return d.json()},onSuccess:()=>{toast({title:"Escrow Released",description:"Escrow funds have been released successfully"}),f.invalidateQueries({queryKey:["admin-escrow"]}),f.invalidateQueries({queryKey:["escrow-analytics"]})},onError:j=>{toast({title:"Error",description:j.message||"Failed to release escrow",variant:"destructive"})}}),T=j=>{switch(j){case"HELD":return e.jsx(W,{className:"bg-green-100 text-green-800",children:"ACTIVE"});case"DISPUTED":return e.jsx(W,{className:"bg-red-100 text-red-800",children:"DISPUTED"});case"RELEASED_TO_SELLER":case"RELEASED_TO_DRIVER":return e.jsx(W,{className:"bg-gray-100 text-gray-800",children:"RELEASED"});case"REFUNDED":return e.jsx(W,{className:"bg-blue-100 text-blue-800",children:"REFUNDED"});default:return e.jsx(W,{className:"bg-yellow-100 text-yellow-800",children:"PENDING"})}},R=j=>{switch(j){case"DISPUTED":return"border-red-500";case"HELD":return"border-green-500";default:return"border-gray-200"}},v=j=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(parseFloat(j)),D=j=>{const d=new Date(j),A=new Date().getTime()-d.getTime(),M=Math.round(A/6e4),H=Math.round(A/36e5),he=Math.round(A/864e5);return M<60?`${M} min ago`:H<24?`${H} hour${H>1?"s":""} ago`:`${he} day${he>1?"s":""} ago`},O=j=>{if(!l.trim()){toast({title:"Error",description:"Please enter resolution notes",variant:"destructive"});return}if(j==="partial"&&(!h||parseFloat(h)<=0)){toast({title:"Error",description:"Please enter a valid partial refund amount",variant:"destructive"});return}w.mutate({action:j,notes:l,partialAmount:j==="partial"?parseFloat(h):void 0})},b=j=>{window.confirm("Are you sure you want to release this escrow?")&&k.mutate(j)};if(E)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});const P=S?.data?.transactions||[],N=S?.data?.totalCount||0,_=S?.data?.escrowBalance||"0",y=S?.data?.disputedCount||0;return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsxs("div",{className:"w-16 bg-white shadow-lg flex flex-col items-center py-4 space-y-4",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),children:e.jsx(_i,{className:"w-6 h-6"})}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white shadow-sm border-b p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Escrow Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monitor and manage payment escrow transactions"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-black",children:v(_)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Escrow Balance"})]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-red-600",children:y}),e.jsx("p",{className:"text-xs text-gray-600",children:"Pending Disputes"})]})]})]})}),e.jsx("div",{className:"p-6 bg-white border-b",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(U,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qe,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Escrow"}),e.jsx("p",{className:"text-2xl font-bold",children:x?.data?.activeEscrowing||0})]})]})})}),e.jsx(U,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disputed"}),e.jsx("p",{className:"text-2xl font-bold",children:x?.data?.disputedCount||0})]})]})})}),e.jsx(U,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Release"}),e.jsx("p",{className:"text-2xl font-bold",children:x?.data?.pendingReleaseCount||0})]})]})})}),e.jsx(U,{children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Released"}),e.jsx("p",{className:"text-2xl font-bold",children:x?.data?.releasedCount||0})]})]})})})]})}),e.jsx("div",{className:"bg-white px-6 py-4 border-b",children:e.jsx(Is,{value:t,onValueChange:j=>s(j),children:e.jsxs(Mt,{children:[e.jsxs(X,{value:"all",children:["All Escrow (",N,")"]}),e.jsx(X,{value:"active",children:"Active"}),e.jsx(X,{value:"disputed",children:"Disputed"}),e.jsx(X,{value:"pending",children:"Pending Release"}),e.jsx(X,{value:"released",children:"Released"})]})})}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsx("div",{className:"space-y-4",children:P.map(j=>e.jsx(U,{className:`${R(j.status)} border-l-4 ${j.status==="DISPUTED"?"shadow-lg":"shadow-sm"}`,children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold mr-3",children:["ESC-",j.id]}),T(j.status),j.status==="DISPUTED"&&e.jsx(W,{className:"ml-2 bg-red-100 text-red-800 font-bold",children:"CRITICAL"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Customer:"})," ",j.buyerName," → ",e.jsx("strong",{children:"Merchant:"})," ",j.sellerName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order #",j.orderId.slice(-4)," • ",j.orderTitle," • Created ",D(j.createdAt)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-bold",children:v(j.totalAmount)}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Held since ",D(j.createdAt)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[j.status==="DISPUTED"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"📁 Evidence available"}),e.jsxs("span",{children:["🔄 Last activity: ",D(j.updatedAt)]})]}),j.status==="HELD"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"✅ Transaction active"}),j.autoReleaseAt&&e.jsxs("span",{children:["⏰ Auto-release: ",D(j.autoReleaseAt)]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[j.status==="DISPUTED"&&e.jsx(L,{onClick:()=>{n(j),a(!0)},className:"bg-red-500 hover:bg-red-600",size:"sm",children:"Resolve Dispute"}),j.status==="HELD"&&e.jsx(L,{onClick:()=>b(j.id),className:"bg-green-600 hover:bg-green-700",size:"sm",children:"Release Early"}),e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>n(j),children:[e.jsx(et,{className:"w-4 h-4 mr-1"}),"View Details"]})]})]})]})},j.id))}),P.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No escrow transactions"}),e.jsx("p",{className:"text-gray-600",children:"No escrow transactions found for the selected filter."})]})]})]}),e.jsx(ks,{open:i,onOpenChange:a,children:e.jsxs(Pn,{className:"max-w-2xl max-h-screen overflow-y-auto",children:[e.jsx(In,{children:e.jsxs(Mn,{children:["Dispute Resolution - ESC-",r?.id]})}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Escrow ID"}),e.jsxs("p",{className:"text-lg font-bold",children:["ESC-",r.id]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Amount"}),e.jsx("p",{className:"text-lg font-bold",children:v(r.totalAmount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customer"}),e.jsx("p",{className:"font-medium",children:r.buyerName}),e.jsx("p",{className:"text-xs text-gray-600",children:r.buyerEmail})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Merchant"}),e.jsx("p",{className:"font-medium",children:r.sellerName}),e.jsx("p",{className:"text-xs text-gray-600",children:r.sellerEmail})]})]}),g?.data&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Evidence"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(U,{children:[e.jsx(Y,{children:e.jsx(J,{className:"text-sm",children:"Customer Evidence"})}),e.jsx(z,{children:e.jsx("div",{className:"space-y-2",children:g.data.customerEvidence.map((j,d)=>e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 rounded",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 text-gray-600"}),e.jsx("span",{className:"text-xs",children:j.filename})]},d))})})]}),e.jsxs(U,{children:[e.jsx(Y,{children:e.jsx(J,{className:"text-sm",children:"Merchant Evidence"})}),e.jsx(z,{children:e.jsx("div",{className:"space-y-2",children:g.data.merchantEvidence.map((j,d)=>e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 rounded",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 text-gray-600"}),e.jsx("span",{className:"text-xs",children:j.filename})]},d))})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Resolution Actions"}),e.jsx(rt,{value:l,onChange:j=>o(j.target.value),placeholder:"Enter admin notes and resolution details...",className:"mb-4",rows:4}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(L,{onClick:()=>O("refund"),className:"bg-red-500 hover:bg-red-600",disabled:w.isPending,children:"Refund Customer"}),e.jsx(L,{onClick:()=>O("release"),className:"bg-green-600 hover:bg-green-700",disabled:w.isPending,children:"Release to Merchant"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"number",value:h,onChange:j=>p(j.target.value),placeholder:"Partial refund amount",className:"flex-1 px-3 py-2 border rounded-md"}),e.jsx(L,{onClick:()=>O("partial"),className:"bg-blue-500 hover:bg-blue-600",disabled:w.isPending,children:"Partial Refund"})]})]})]})]})]})})]})},gd="http://localhost:5000/api/admin";async function $e(t,s,r){const n=localStorage.getItem("adminToken"),i=await fetch(`${gd}${s}`,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:r?JSON.stringify(r):void 0});if(!i.ok)throw new Error(`Request failed: ${i.statusText}`);return i.json()}function yd(){const t=tt(),[s,r]=c.useState([]),[n,i]=c.useState(null),[a,l]=c.useState(!1),[o,h]=c.useState({status:"",contentType:"",priority:"",search:"",startDate:"",endDate:""});c.useEffect(()=>{const y=new WebSocket("ws://localhost:5000/ws");return y.onopen=()=>{console.log("Connected to moderation WebSocket"),y.send(JSON.stringify({type:"join_admin_room",roomType:"moderation"}))},y.onmessage=j=>{const d=JSON.parse(j.data);(d.type==="new_content_report"||d.type==="content_action_taken"||d.type==="bulk_content_action"||d.type==="report_escalated")&&(t.invalidateQueries({queryKey:["moderation-reports"]}),t.invalidateQueries({queryKey:["moderation-stats"]}),d.type==="new_content_report"&&x(`New content report: ${d.contentType}`,"info"))},()=>y.close()},[t]);const{data:p,isLoading:u}=Te({queryKey:["moderation-reports",o],queryFn:()=>{const y=new URLSearchParams;return Object.entries(o).forEach(([j,d])=>{d&&y.append(j,d)}),$e("GET",`/moderation/reports?${y.toString()}`)},refetchInterval:3e4}),{data:m}=Te({queryKey:["moderation-stats"],queryFn:()=>$e("GET","/moderation/stats"),refetchInterval:6e4}),f=ze({mutationFn:({reportId:y,action:j,reason:d})=>$e("POST",`/moderation/reports/${y}/action`,{action:j,reason:d}),onSuccess:()=>{t.invalidateQueries({queryKey:["moderation-reports"]}),t.invalidateQueries({queryKey:["moderation-stats"]}),x("Action completed successfully","success"),i(null),l(!1)},onError:()=>{x("Failed to complete action","error")}}),S=ze({mutationFn:({reportIds:y,action:j,reason:d})=>$e("POST","/moderation/reports/bulk-action",{reportIds:y,action:j,reason:d}),onSuccess:()=>{t.invalidateQueries({queryKey:["moderation-reports"]}),t.invalidateQueries({queryKey:["moderation-stats"]}),r([]),x("Bulk action completed successfully","success")},onError:()=>{x("Failed to complete bulk action","error")}}),E=ze({mutationFn:({reportId:y,reason:j,priority:d})=>$e("POST",`/moderation/reports/${y}/escalate`,{reason:j,priority:d}),onSuccess:()=>{t.invalidateQueries({queryKey:["moderation-reports"]}),x("Report escalated successfully","success")},onError:()=>{x("Failed to escalate report","error")}}),x=(y,j)=>{const d=document.createElement("div");d.className=`fixed top-4 right-4 px-4 py-2 rounded-md text-white z-50 ${j==="success"?"bg-green-500":j==="error"?"bg-red-500":"bg-blue-500"}`,d.textContent=y,document.body.appendChild(d),setTimeout(()=>document.body.removeChild(d),3e3)},g=(y,j)=>{h(d=>({...d,[y]:j}))},w=y=>{i(y),l(!0)},k=y=>{r(j=>j.includes(y)?j.filter(d=>d!==y):[...j,y])},T=(y,j)=>{n&&f.mutate({reportId:n.id,action:y,reason:j})},R=(y,j)=>{s.length!==0&&S.mutate({reportIds:s,action:y,reason:j})},v=(y,j="HIGH")=>{n&&E.mutate({reportId:n.id,reason:y,priority:j})},D=y=>{switch(y){case"POST":return e.jsx(Nt,{className:"h-4 w-4"});case"COMMENT":return e.jsx(Er,{className:"h-4 w-4"});case"PRODUCT":return e.jsx(Di,{className:"h-4 w-4"});case"USER":return e.jsx($s,{className:"h-4 w-4"});default:return e.jsx(Nt,{className:"h-4 w-4"})}},O=y=>{switch(y){case"PENDING":return"bg-yellow-100 text-yellow-800";case"REVIEWED":return"bg-blue-100 text-blue-800";case"RESOLVED":return"bg-green-100 text-green-800";case"DISMISSED":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},b=y=>{switch(y){case"CRITICAL":return"bg-red-100 text-red-800 border-red-200";case"HIGH":return"bg-orange-100 text-orange-800 border-orange-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"LOW":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},P=y=>{const j=new Date(y),C=Math.floor((new Date().getTime()-j.getTime())/(1e3*60*60));return C<1?"Just now":C<24?`${C}h ago`:`${Math.floor(C/24)}d ago`},N=p?.data?.reports||[],_=m?.data||{overview:{pending:0,resolved:0},performance:{avgResolutionTime:0,moderatorEfficiency:0}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Content Moderation"}),e.jsx("p",{className:"text-gray-600",children:"Review and manage reported content"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_.overview.pending}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Reports"})]}),e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(je,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_.overview.resolved}),e.jsx("div",{className:"text-sm text-gray-600",children:"Resolved Today"})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ge,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[_.performance.avgResolutionTime,"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Resolution"})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(je,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[_.performance.moderatorEfficiency,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Efficiency Rate"})]}),e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(se,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:o.search,onChange:y=>g("search",y.target.value),placeholder:"Search reports...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:o.status,onChange:y=>g("status",y.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"REVIEWED",children:"Reviewed"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"DISMISSED",children:"Dismissed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content Type"}),e.jsxs("select",{value:o.contentType,onChange:y=>g("contentType",y.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"POST",children:"Posts"}),e.jsx("option",{value:"COMMENT",children:"Comments"}),e.jsx("option",{value:"PRODUCT",children:"Products"}),e.jsx("option",{value:"USER",children:"Users"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:o.priority,onChange:y=>g("priority",y.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"CRITICAL",children:"Critical"}),e.jsx("option",{value:"HIGH",children:"High"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"LOW",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:o.startDate,onChange:y=>g("startDate",y.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:o.endDate,onChange:y=>g("endDate",y.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),s.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[s.length," reports selected"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R("REMOVE","Bulk content removal"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700",children:"Remove All"}),e.jsx("button",{onClick:()=>R("WARNING","Bulk warning issued"),className:"px-3 py-1 bg-orange-600 text-white text-sm rounded-md hover:bg-orange-700",children:"Warn All"}),e.jsx("button",{onClick:()=>R("NO_ACTION","Bulk dismissal"),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded-md hover:bg-gray-700",children:"Dismiss All"}),e.jsx("button",{onClick:()=>r([]),className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-400",children:"Clear Selection"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Content Reports"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t.invalidateQueries({queryKey:["moderation-reports"]}),className:"p-2 text-gray-500 hover:text-gray-700",title:"Refresh",children:e.jsx(be,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-500",children:[N.length," reports"]})]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:u?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading reports..."}):N.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No reports found"}):N.map(y=>e.jsx("div",{onClick:()=>w(y),className:`p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors ${n?.id===y.id?"bg-blue-50 border-blue-200":""} ${b(y.priority).includes("red")?"border-l-4 border-l-red-500":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("input",{type:"checkbox",checked:s.includes(y.id),onChange:j=>{j.stopPropagation(),k(y.id)},className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D(y.contentType),e.jsxs("span",{className:"font-medium text-sm text-gray-900",children:[y.contentType," Report #",y.id]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(y.status)}`,children:y.status}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${b(y.priority)}`,children:y.priority}),y.reportCount>1&&e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:[y.reportCount," reports"]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:y.reason}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),y.reporter.fullName]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),P(y.createdAt)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.status==="PENDING"&&e.jsxs("button",{onClick:j=>{j.stopPropagation(),v("Urgent escalation required","HIGH")},className:"text-xs text-orange-600 hover:text-orange-800 flex items-center",children:[e.jsx(kr,{className:"h-3 w-3 mr-1"}),"Escalate"]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(ys,{className:"h-4 w-4"})})]})]})},y.id))})]}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Report Details"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Report Information"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",n.contentType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Content ID:"})," ",n.contentId]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Priority:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium border ${b(n.priority)}`,children:n.priority})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${O(n.status)}`,children:n.status})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Reporter"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",n.reporter.fullName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",n.reporter.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Role:"})," ",n.reporter.role]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Reason"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-md border text-sm",children:n.reason})]}),n.status==="PENDING"&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Take Action"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>T("REMOVE","Content removed for policy violation"),disabled:f.isPending,className:"w-full bg-red-600 text-white px-4 py-2 rounded-md text-sm hover:bg-red-700 disabled:bg-gray-300",children:"Remove Content"}),e.jsx("button",{onClick:()=>T("WARNING","Warning issued to user"),disabled:f.isPending,className:"w-full bg-orange-600 text-white px-4 py-2 rounded-md text-sm hover:bg-orange-700 disabled:bg-gray-300",children:"Issue Warning"}),e.jsx("button",{onClick:()=>T("BAN","User banned for repeated violations"),disabled:f.isPending,className:"w-full bg-gray-800 text-white px-4 py-2 rounded-md text-sm hover:bg-gray-900 disabled:bg-gray-300",children:"Ban User"}),e.jsx("button",{onClick:()=>T("NO_ACTION","No violation found"),disabled:f.isPending,className:"w-full bg-gray-600 text-white px-4 py-2 rounded-md text-sm hover:bg-gray-700 disabled:bg-gray-300",children:"No Action Needed"})]})]}),n.status==="PENDING"&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Escalate Report"}),e.jsx("button",{onClick:()=>v("Requires senior review","HIGH"),disabled:E.isPending,className:"w-full bg-yellow-600 text-white px-4 py-2 rounded-md text-sm hover:bg-yellow-700 disabled:bg-gray-300",children:"Escalate to Senior Moderator"})]})]})]}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(se,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{children:"Select a report to view details and take action"})]})})]})]})}const vd=()=>{const[t,s]=c.useState("overview"),[r,n]=c.useState(!0),{data:i,isLoading:a,refetch:l}=Te({queryKey:["system-metrics"],queryFn:async()=>{const h=await fetch("/api/admin/system/metrics",{credentials:"include"});if(!h.ok)throw new Error("Failed to fetch system metrics");return h.json()},refetchInterval:r?5e3:!1}),o=h=>{switch(h){case"healthy":return e.jsx(ge,{className:"h-4 w-4 text-green-600"});case"warning":return e.jsx(ue,{className:"h-4 w-4 text-yellow-600"});case"critical":return e.jsx(Mi,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Ii,{className:"h-4 w-4 text-gray-600"})}};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Monitoring"}),e.jsx("p",{className:"text-gray-600",children:"Real-time system health and performance monitoring"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(L,{variant:r?"default":"outline",onClick:()=>n(!r),size:"sm",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),r?"Auto Refresh On":"Auto Refresh Off"]}),e.jsx(L,{variant:"outline",onClick:()=>l(),size:"sm",children:"Refresh Now"})]})]}),e.jsxs(Is,{value:t,onValueChange:s,children:[e.jsxs(Mt,{className:"grid w-full grid-cols-4",children:[e.jsx(X,{value:"overview",children:"Overview"}),e.jsx(X,{value:"server",children:"Server"}),e.jsx(X,{value:"database",children:"Database"}),e.jsx(X,{value:"realtime",children:"Real-time"})]}),e.jsxs(xe,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(U,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(J,{className:"text-sm font-medium",children:"Server Status"}),e.jsx(es,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o("healthy"),e.jsx("div",{className:"text-2xl font-bold",children:"Online"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uptime: ",Math.floor((i?.server.uptime||0)/3600),"h"]})]})]}),e.jsxs(U,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(J,{className:"text-sm font-medium",children:"Database"}),e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o(i?.database.status||"healthy"),e.jsx("div",{className:"text-2xl font-bold capitalize",children:i?.database.status||"Healthy"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i?.database.connections||0," active connections"]})]})]}),e.jsxs(U,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(J,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i?.realTime.activeUsers||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i?.realTime.activeConnections||0," WebSocket connections"]})]})]}),e.jsxs(U,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(J,{className:"text-sm font-medium",children:"Response Time"}),e.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(z,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[i?.performance.responseTime||0,"ms"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Error rate: ",(i?.performance.errorRate||0).toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(U,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center",children:[e.jsx(Ar,{className:"h-5 w-5 mr-2"}),"System Resources"]})}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:"CPU Usage"}),e.jsxs("span",{className:"text-sm font-medium",children:[i?.server.cpu||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${i?.server.cpu||0}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:"Memory Usage"}),e.jsxs("span",{className:"text-sm font-medium",children:[i?.server.memory||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${i?.server.memory||0}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:"Disk Usage"}),e.jsxs("span",{className:"text-sm font-medium",children:[i?.server.disk||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:`${i?.server.disk||0}%`}})})]})]})})]}),e.jsxs(U,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center",children:[e.jsx(Pi,{className:"h-5 w-5 mr-2"}),"Network & Performance"]})}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Throughput"}),e.jsxs("span",{className:"text-sm font-medium",children:[i?.performance.throughput||0," req/min"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Avg Response Time"}),e.jsxs("span",{className:"text-sm font-medium",children:[i?.performance.responseTime||0,"ms"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Error Rate"}),e.jsxs("span",{className:"text-sm font-medium",children:[(i?.performance.errorRate||0).toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Messages Sent"}),e.jsx("span",{className:"text-sm font-medium",children:i?.realTime.messagesSent||0})]})]})})]})]})]}),e.jsx(xe,{value:"server",children:e.jsxs(U,{children:[e.jsxs(Y,{children:[e.jsxs(J,{className:"flex items-center",children:[e.jsx(es,{className:"h-5 w-5 mr-2"}),"Server Monitoring"]}),e.jsx(He,{children:"Detailed server performance and health metrics"})]}),e.jsx(z,{children:e.jsx("div",{className:"h-96 flex items-center justify-center text-gray-500",children:"Detailed server monitoring charts would be implemented here"})})]})}),e.jsx(xe,{value:"database",children:e.jsxs(U,{children:[e.jsxs(Y,{children:[e.jsxs(J,{className:"flex items-center",children:[e.jsx(ts,{className:"h-5 w-5 mr-2"}),"Database Monitoring"]}),e.jsx(He,{children:"Database performance, connections, and query analytics"})]}),e.jsx(z,{children:e.jsx("div",{className:"h-96 flex items-center justify-center text-gray-500",children:"Database monitoring and query performance analytics would be implemented here"})})]})}),e.jsx(xe,{value:"realtime",children:e.jsxs(U,{children:[e.jsxs(Y,{children:[e.jsxs(J,{className:"flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 mr-2"}),"Real-time System Monitoring"]}),e.jsx(He,{children:"Live WebSocket connections and real-time features monitoring"})]}),e.jsx(z,{children:e.jsx("div",{className:"h-96 flex items-center justify-center text-gray-500",children:"Real-time monitoring dashboard with live connections and message flow would be implemented here"})})]})})]})]})};function Nr(){const{isAuthenticated:t,isLoading:s}=ka(),[r,n]=c.useState("dashboard");if(s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})});if(!t)return window.location.href="/admin",null;const i=()=>{switch(r){case"dashboard":return e.jsx(tr,{});case"users":return e.jsx(co,{});case"kyc":return e.jsx(Ql,{});case"transactions":return e.jsx(Xl,{});case"monitoring":return e.jsx(Kc,{});case"fraud":return e.jsx(Hc,{});case"support":return e.jsx(pd,{});case"escrow":return e.jsx(xd,{});case"moderation":return e.jsx(yd,{});case"system":return e.jsx(vd,{});case"analytics":return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Platform Analytics"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Advanced analytics and reporting tools coming soon..."})]});case"security":return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Security Center"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Security monitoring and threat detection tools coming soon..."})]});default:return e.jsx(tr,{})}},a=l=>{n(l)};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(Ta,{currentPage:r,onPageChange:a,children:i()})})}const gs=c.forwardRef(({className:t,...s},r)=>e.jsx("label",{ref:r,className:V("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...s}));gs.displayName="Label";function bd(){const[,t]=xi(),[s,r]=c.useState({email:"",password:""}),[n,i]=c.useState(!1),[a,l]=c.useState(!1),{toast:o}=Tt(),h=u=>{r(m=>({...m,[u.target.name]:u.target.value}))},p=async u=>{u.preventDefault(),l(!0);try{const f=await(await fetch("/api/auth/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();f.success?(localStorage.setItem("adminToken",f.data.token),localStorage.setItem("adminUser",JSON.stringify(f.data.user)),o({title:"Login Successful",description:"Welcome to the admin panel"}),t("/dashboard")):o({title:"Login Failed",description:f.message||"Invalid credentials",variant:"destructive"})}catch(m){console.error("Login error:",m),o({title:"Error",description:"Failed to connect to server",variant:"destructive"})}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs(U,{className:"w-full max-w-md",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-blue-100 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(se,{className:"h-6 w-6 text-blue-600"})}),e.jsx(J,{className:"text-2xl font-bold",children:"Admin Panel"}),e.jsx(He,{children:"Sign in to access the BrillPrime admin dashboard"})]}),e.jsxs(z,{children:[e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(gs,{htmlFor:"email",children:"Email"}),e.jsx(Je,{id:"email",name:"email",type:"email",placeholder:"admin@brillprime.com",value:s.email,onChange:h,required:!0,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gs,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{id:"password",name:"password",type:n?"text":"password",placeholder:"Enter your password",value:s.password,onChange:h,required:!0,disabled:a}),e.jsx(L,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!n),disabled:a,children:n?e.jsx(Fi,{className:"h-4 w-4"}):e.jsx(et,{className:"h-4 w-4"})})]})]}),e.jsx(L,{type:"submit",className:"w-full",disabled:a,children:a?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Authorized access only"}),e.jsx("p",{className:"text-xs mt-1",children:"This system is monitored and logged"})]})]})]})})}const jd=new na({defaultOptions:{queries:{staleTime:300*1e3,refetchOnWindowFocus:!1}}});function Nd(){return de.useEffect(()=>{const t=document.getElementById("loading");t&&(t.style.display="none")},[]),e.jsx(ca,{client:jd,children:e.jsxs(Ra,{children:[e.jsxs(gi,{base:"/admin",children:[e.jsx(Ft,{path:"/login",component:bd}),e.jsx(Ft,{path:"/*",component:Nr}),e.jsx(Ft,{path:"/",component:Nr})]}),e.jsx(Ea,{})]})})}qi.createRoot(document.getElementById("admin-root")).render(e.jsx(de.StrictMode,{children:e.jsx(Nd,{})}));export{na as Q,$i as c,e as j,md as u};
//# sourceMappingURL=admin-osZiRqog.js.map
