{"version":3,"file":"wallet-fund-callback-DrACGQD9.js","sources":["../../src/pages/wallet-fund-callback.tsx"],"sourcesContent":["\nimport { useEffect, useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { CheckCircle, XCircle, Loader2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\nexport default function WalletFundCallback() {\n  const [, setLocation] = useLocation();\n  const [status, setStatus] = useState<'loading' | 'success' | 'failed'>('loading');\n  const [amount, setAmount] = useState<number>(0);\n  const [message, setMessage] = useState<string>('');\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const reference = urlParams.get('reference');\n    \n    if (reference) {\n      verifyPayment(reference);\n    } else {\n      setStatus('failed');\n      setMessage('No payment reference found');\n    }\n  }, []);\n\n  const verifyPayment = async (reference: string) => {\n    try {\n      const response = await fetch('/api/wallet/fund/verify', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ reference }),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        setStatus('success');\n        setAmount(result.data.amount);\n        setMessage(result.data.message);\n      } else {\n        setStatus('failed');\n        setMessage(result.error || 'Payment verification failed');\n      }\n    } catch (error) {\n      console.error('Payment verification error:', error);\n      setStatus('failed');\n      setMessage('Failed to verify payment');\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-NG', {\n      style: 'currency',\n      currency: 'NGN',\n      minimumFractionDigits: 0\n    }).format(amount);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardContent className=\"p-6 text-center\">\n          {status === 'loading' && (\n            <>\n              <Loader2 className=\"w-16 h-16 animate-spin text-[#4682b4] mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold mb-2\">Verifying Payment</h2>\n              <p className=\"text-gray-600\">Please wait while we confirm your payment...</p>\n            </>\n          )}\n\n          {status === 'success' && (\n            <>\n              <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold text-green-700 mb-2\">Payment Successful!</h2>\n              <p className=\"text-gray-600 mb-4\">{message}</p>\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6\">\n                <p className=\"text-green-800 font-semibold\">\n                  {formatCurrency(amount)} has been added to your wallet\n                </p>\n              </div>\n            </>\n          )}\n\n          {status === 'failed' && (\n            <>\n              <XCircle className=\"w-16 h-16 text-red-500 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold text-red-700 mb-2\">Payment Failed</h2>\n              <p className=\"text-gray-600 mb-6\">{message}</p>\n            </>\n          )}\n\n          <div className=\"space-y-3\">\n            <Button\n              className=\"w-full bg-[#4682b4] hover:bg-[#0b1a51]\"\n              onClick={() => setLocation(\"/consumer-home\")}\n            >\n              {status === 'success' ? 'Continue to Home' : 'Back to Home'}\n            </Button>\n            \n            {status === 'failed' && (\n              <Button\n                variant=\"outline\"\n                className=\"w-full border-[#4682b4] text-[#4682b4]\"\n                onClick={() => setLocation(\"/wallet-fund\")}\n              >\n                Try Again\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":["WalletFundCallback","setLocation","useLocation","status","setStatus","useState","amount","setAmount","message","setMessage","useEffect","reference","verifyPayment","result","error","formatCurrency","jsx","Card","jsxs","CardContent","Fragment","Loader2","CheckCircle","XCircle","Button"],"mappings":"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"}