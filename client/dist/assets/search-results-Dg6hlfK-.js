import{u as f,r as l,e as g,j as e,B as n,A as N,S as y,I as v,aR as x,g as i,m as w,n as C,k as d}from"./index-CVqmz7v7.js";import{M as k}from"./menu-DCy-GwzZ.js";function P(){const[,a]=f(),[r,m]=l.useState(""),[c,o]=l.useState([]);l.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("q")||"";m(t)},[]);const{data:h=[]}=g({queryKey:["/api/search",r],queryFn:async()=>{if(!r.trim())return[];const s=await fetch(`/api/search?q=${encodeURIComponent(r)}`);if(!s.ok)throw new Error("Search failed");return s.json()},enabled:!!r.trim()});l.useEffect(()=>{o(h)},[h]);const u=s=>{s.type==="area"?a(`/merchant-search?area=${s.id}`):s.type==="station"?a(`/fuel-ordering/station/${s.id}`):a(`/merchants/${s.id}`)},b=()=>{const s=new URLSearchParams;s.set("q",r),window.history.replaceState({},"",`${window.location.pathname}?${s}`)},j=s=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(s),p=s=>{switch(s){case"area":return"🏢";case"station":return"⛽";case"merchant":return"🏪";default:return"📍"}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"h-64 bg-gradient-to-br from-blue-100 to-green-100 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"grid grid-cols-8 grid-rows-6 h-full w-full",children:Array.from({length:48}).map((s,t)=>e.jsx("div",{className:"border border-gray-300"},t))})}),c.slice(0,6).map((s,t)=>e.jsx("div",{className:`absolute w-4 h-4 ${s.type==="area"?"bg-blue-500":"bg-red-500"} rounded-full animate-pulse`,style:{top:`${20+t*15}%`,left:`${25+t*12}%`}},s.id)),e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-white/95 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>a("/map-home"),children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(v,{placeholder:"Search locations, fuel stations...",value:r,onChange:s=>m(s.target.value),onKeyPress:s=>s.key==="Enter"&&b(),className:"pl-10 border-[#4682b4]/30 focus:border-[#4682b4]"})]}),e.jsx(n,{onClick:()=>a("/search-filter"),variant:"outline",size:"icon",className:"border-[#4682b4] text-[#4682b4]",children:e.jsx(x,{className:"w-4 h-4"})})]})}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>a("/side-menu"),children:e.jsx(k,{className:"w-5 h-5"})})]})})]}),e.jsx("div",{className:"bg-white rounded-t-3xl -mt-6 relative z-10 min-h-[60vh]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full mx-auto mb-4"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-[#131313]",children:"Search Results"}),e.jsxs(i,{variant:"outline",className:"text-[#4682b4] border-[#4682b4]",children:[c.length," found"]})]}),e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsx(w,{className:"cursor-pointer transition-transform hover:scale-[1.02]",onClick:()=>u(s),children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-[#4682b4]/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:p(s.type)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-[#131313] mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.address}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(d,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.distance," km away"]})]}),s.type==="area"&&s.stationCount&&e.jsxs("span",{children:[s.stationCount," stations"]}),s.type==="station"&&s.rating&&e.jsxs("span",{children:["⭐ ",s.rating]})]})]})]}),e.jsxs("div",{className:"text-right",children:[s.type==="area"&&s.averagePrice&&e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-[#4682b4]",children:[j(s.averagePrice),"/L"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"avg. price"})]}),s.type==="station"&&e.jsx(i,{className:s.isOpen?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:s.isOpen?"Open":"Closed"}),s.type==="merchant"&&e.jsx(i,{className:"bg-purple-100 text-purple-800",children:"Merchant"})]})]})})},s.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No locations found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search terms or browse by area"}),e.jsx(n,{onClick:()=>a("/map-home"),className:"bg-[#4682b4] hover:bg-[#0b1a51]",children:"Back to Map"})]}),c.length>0&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>a("/search-filter"),className:"border-[#4682b4] text-[#4682b4] hover:bg-[#4682b4]/10",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Filter Results"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>a("/map-home"),className:"border-[#4682b4] text-[#4682b4] hover:bg-[#4682b4]/10",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"Back to Map"]})]})]})]})})]})}export{P as default};
//# sourceMappingURL=search-results-Dg6hlfK-.js.map
