import{u as h,r as l,j as e,m as y,n as b,a_ as g,C as j,aQ as N,B as m}from"./index-CPIh2kaR.js";function w(){const[,i]=h(),[s,t]=l.useState("loading"),[d,u]=l.useState(0),[o,n]=l.useState("");l.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("reference");a?x(a):(t("failed"),n("No payment reference found"))},[]);const x=async r=>{try{const c=await(await fetch("/api/wallet/fund/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reference:r})})).json();c.success?(t("success"),u(c.data.amount),n(c.data.message)):(t("failed"),n(c.error||"Payment verification failed"))}catch(a){console.error("Payment verification error:",a),t("failed"),n("Failed to verify payment")}},f=r=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(r);return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx(y,{className:"w-full max-w-md",children:e.jsxs(b,{className:"p-6 text-center",children:[s==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-16 h-16 animate-spin text-[#4682b4] mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Verifying Payment"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your payment..."})]}),s==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-green-700 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:o}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-green-800 font-semibold",children:[f(d)," has been added to your wallet"]})})]}),s==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-red-700 mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:o})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{className:"w-full bg-[#4682b4] hover:bg-[#0b1a51]",onClick:()=>i("/consumer-home"),children:s==="success"?"Continue to Home":"Back to Home"}),s==="failed"&&e.jsx(m,{variant:"outline",className:"w-full border-[#4682b4] text-[#4682b4]",onClick:()=>i("/wallet-fund"),children:"Try Again"})]})]})})})}export{w as default};
//# sourceMappingURL=wallet-fund-callback-ByQXm0IU.js.map
