{"version":3,"file":"merchants-bVEzPV9N.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/badge-check.js","../../src/pages/merchants.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.453.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BadgeCheck = createLucideIcon(\"BadgeCheck\", [\n  [\n    \"path\",\n    {\n      d: \"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z\",\n      key: \"3c2336\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { BadgeCheck as default };\n//# sourceMappingURL=badge-check.js.map\n","import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { ArrowLeft, Search, Star, MapPin, Filter, Verified } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\ninterface Merchant {\n  id: number;\n  userId: string;\n  fullName: string;\n  businessName: string;\n  businessType: string;\n  businessDescription: string;\n  businessAddress: string;\n  businessLogo: string;\n  rating: number;\n  reviewCount: number;\n  isVerified: boolean;\n  distance?: number;\n}\n\nexport default function MerchantsPage() {\n  const [, setLocation] = useLocation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [userLocation, setUserLocation] = useState<{lat: number, lng: number} | null>(null);\n\n  // Business categories\n  const categories = [\n    \"RESTAURANT\",\n    \"SUPERMARKET\", \n    \"APPAREL\",\n    \"BEAUTY_COSMETICS\",\n    \"ELECTRONICS\",\n    \"MEDICAL_HEALTH\",\n    \"VEHICLE_SERVICE\",\n    \"OTHER\"\n  ];\n\n  // Get user location\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setUserLocation({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          });\n        },\n        (error) => {\n          console.log(\"Location access denied:\", error);\n          // Use default Lagos coordinates\n          setUserLocation({ lat: 6.5244, lng: 3.3792 });\n        }\n      );\n    } else {\n      // Use default Lagos coordinates\n      setUserLocation({ lat: 6.5244, lng: 3.3792 });\n    }\n  }, []);\n\n  // Fetch merchants from API\n  const { data: merchantsData, isLoading, error } = useQuery({\n    queryKey: ['/api/merchants/search', userLocation, selectedCategory, searchTerm],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (userLocation) {\n        params.append('lat', userLocation.lat.toString());\n        params.append('lng', userLocation.lng.toString());\n      }\n      if (selectedCategory) params.append('category', selectedCategory);\n      if (searchTerm) params.append('searchTerm', searchTerm);\n      params.append('radius', '10');\n\n      const response = await fetch(`/api/merchants/search?${params}`);\n      if (!response.ok) throw new Error('Failed to fetch merchants');\n      return response.json();\n    },\n    enabled: !!userLocation\n  });\n\n  const merchants: Merchant[] = merchantsData?.merchants || [];\n\n  const handleMerchantClick = (merchant: Merchant) => {\n    setLocation(`/merchants/${merchant.id}`);\n  };\n\n  const handleSearch = () => {\n    // Query will automatically refetch due to dependency\n  };\n\n  const formatBusinessType = (type: string) => {\n    return type.split('_').map(word => \n      word.charAt(0) + word.slice(1).toLowerCase()\n    ).join(' ');\n  };\n\n  return (\n    <div className=\"w-full max-w-md mx-auto min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200 p-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            onClick={() => setLocation(\"/consumer-home\")}\n            className=\"p-2\"\n          >\n            <ArrowLeft className=\"h-5 w-5\" />\n          </Button>\n          <h1 className=\"text-lg font-semibold\">Find Merchants</h1>\n          <Button variant=\"ghost\" size=\"sm\" className=\"p-2\">\n            <Filter className=\"h-5 w-5\" />\n          </Button>\n        </div>\n\n        {/* Search Bar */}\n        <div className=\"flex space-x-2 mb-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n            <Input\n              placeholder=\"Search merchants...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10\"\n              onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n            />\n          </div>\n          <Button onClick={handleSearch} className=\"bg-blue-600 hover:bg-blue-700\">\n            Search\n          </Button>\n        </div>\n\n        {/* Category Filter */}\n        <div className=\"flex space-x-2 overflow-x-auto pb-2\">\n          <Button\n            variant={selectedCategory === \"\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setSelectedCategory(\"\")}\n            className=\"whitespace-nowrap\"\n          >\n            All\n          </Button>\n          {categories.map((category) => (\n            <Button\n              key={category}\n              variant={selectedCategory === category ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setSelectedCategory(category)}\n              className=\"whitespace-nowrap\"\n            >\n              {formatBusinessType(category)}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      {/* Loading State */}\n      {isLoading && (\n        <div className=\"p-4 text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-2 text-gray-600\">Finding merchants near you...</p>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && (\n        <div className=\"p-4 text-center\">\n          <p className=\"text-red-600\">Failed to load merchants. Please try again.</p>\n          <Button onClick={() => window.location.reload()} className=\"mt-2\">\n            Retry\n          </Button>\n        </div>\n      )}\n\n      {/* Merchants List */}\n      <div className=\"p-4 space-y-4\">\n        {merchants.length === 0 && !isLoading && (\n          <div className=\"text-center py-8\">\n            <p className=\"text-gray-600\">No merchants found in your area.</p>\n            <p className=\"text-sm text-gray-500 mt-1\">Try adjusting your search or location.</p>\n          </div>\n        )}\n\n        {merchants.map((merchant) => (\n          <Card \n            key={merchant.id} \n            className=\"cursor-pointer hover:shadow-md transition-shadow\"\n            onClick={() => handleMerchantClick(merchant)}\n          >\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-start space-x-3\">\n                <Avatar className=\"h-12 w-12\">\n                  <AvatarImage src={merchant.businessLogo} />\n                  <AvatarFallback>\n                    {merchant.businessName.charAt(0)}\n                  </AvatarFallback>\n                </Avatar>\n                \n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center space-x-2 mb-1\">\n                    <h3 className=\"font-semibold text-gray-900 truncate\">\n                      {merchant.businessName}\n                    </h3>\n                    {merchant.isVerified && (\n                      <Verified className=\"h-4 w-4 text-blue-600\" />\n                    )}\n                  </div>\n                  \n                  <Badge variant=\"secondary\" className=\"text-xs mb-2\">\n                    {formatBusinessType(merchant.businessType)}\n                  </Badge>\n                  \n                  <p className=\"text-sm text-gray-600 line-clamp-2 mb-2\">\n                    {merchant.businessDescription}\n                  </p>\n                  \n                  <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                      <span>{merchant.rating}</span>\n                      <span>({merchant.reviewCount})</span>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-1\">\n                      <MapPin className=\"h-4 w-4\" />\n                      <span className=\"truncate\">{merchant.businessAddress}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n}"],"names":["BadgeCheck","createLucideIcon","MerchantsPage","setLocation","useLocation","searchTerm","setSearchTerm","useState","selectedCategory","setSelectedCategory","userLocation","setUserLocation","categories","useEffect","position","error","merchantsData","isLoading","useQuery","params","response","merchants","handleMerchantClick","merchant","handleSearch","formatBusinessType","type","word","jsxs","jsx","Button","ArrowLeft","Filter","Search","Input","e","category","Card","CardContent","Avatar","AvatarImage","AvatarFallback","Verified","Badge","Star","MapPin"],"mappings":"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","x_google_ignoreList":[0]}