import{r as i,ah as g,j as e,u as y,ai as w,B as f,A as C,g as v,ag as I,aj as E,V as R,k as T,N as k,m as D,n as A,a9 as P}from"./index-CVqmz7v7.js";import{a as S}from"./account_circle-ChEtdL0c.js";import{m as M}from"./map_background-ButcEiCP.js";import{M as Y}from"./message-circle-CqxJZh1m.js";import{P as V}from"./phone-0BJ47FE1.js";import{R as L}from"./ruler-B14oAyqu.js";const b=i.createContext(void 0);function U({children:c}){const[n,d]=i.useState([]),[o,j]=i.useState(!1),[t,u]=i.useState("default");i.useEffect(()=>{j("Notification"in window&&"serviceWorker"in navigator),"Notification"in window&&u(Notification.permission)},[]);const h=i.useCallback(async()=>{if(!o)return console.log("Notifications not supported"),!1;try{const a=await Notification.requestPermission();return u(a),a==="granted"?(console.log("Notification permission granted"),!0):!1}catch(a){return console.error("Error requesting notification permission:",a),!1}},[o]),N=i.useCallback(a=>{const r={...a,id:Math.random().toString(36).substr(2,9),timestamp:new Date};if(d(l=>[r,...l.slice(0,99)]),t==="granted"&&o)try{const l=new window.Notification(r.title,{body:r.message,icon:"/logo192.png",badge:"/badge-icon.png",tag:r.id,requireInteraction:r.type==="error",data:r.data});l.onclick=()=>{r.actionUrl&&(window.focus(),window.location.href=r.actionUrl),l.close()},r.type!=="error"&&setTimeout(()=>{l.close()},5e3)}catch(l){console.error("Error showing browser notification:",l)}g({title:r.title,description:r.message,variant:r.type==="error"?"destructive":"default"})},[t,o]),x=i.useCallback(a=>{d(r=>r.filter(l=>l.id!==a))},[]),m=i.useCallback(()=>{d([])},[]),p={notifications:n,addNotification:N,removeNotification:x,clearAllNotifications:m,requestPermission:h,isSupported:o};return e.jsx(b.Provider,{value:p,children:c})}function W(){const c=i.useContext(b);if(c===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return c}const s={PRIMARY:"#4682b4",SECONDARY:"#0b1a51",ACTIVE:"#010e42",TEXT:"#131313",WHITE:"#ffffff"};function X(){const[,c]=y(),{addNotification:n}=W(),{connected:d,deliveryUpdates:o,connectionError:j}=w(),[t,u]=i.useState({id:"job-1",customerName:"Mike Johnson",customerPhone:"+234 801 234 5678",orderType:"FUEL",orderItems:[{name:"Petrol",quantity:"1 litre",price:15e3}],pickupAddress:"Shell Gas Station, Rayfield, Jos",deliveryAddress:"Rayfield, Jos",distance:"10km",estimatedTime:"15 minutes",deliveryFee:2500,status:"ASSIGNED",specialInstructions:"Customer will meet at the main gate"});i.useEffect(()=>{if(Object.keys(o).length>0&&o[t.id]){const a=o[t.id];console.log(`Updating delivery ${t.id} status to ${a.status}`),u(r=>({...r,status:a.status})),n({type:"info",title:"Delivery Update",message:`Delivery status updated to ${a.status}`,duration:4e3})}},[o,t.id,n]);const h=()=>{n({type:"success",title:"Navigation Started",message:"GPS navigation to pickup location has been activated",duration:4e3})},N=()=>{n({type:"info",title:"Issue Report",message:"Issue reporting form has been opened",duration:3e3})},x=a=>{a==="chat"?c("/chat"):n({type:"info",title:"Calling Customer",message:`Initiating call to ${t.customerName}`,duration:3e3})},m=a=>{switch(a){case"ASSIGNED":return"#f59e0b";case"PICKED_UP":return s.PRIMARY;case"IN_TRANSIT":return"#8b5cf6";case"DELIVERED":return"#10b981";default:return s.TEXT}},p=a=>{switch(a){case"ASSIGNED":return"Assigned to You";case"PICKED_UP":return"Picked Up";case"IN_TRANSIT":return"In Transit";case"DELIVERED":return"Delivered";default:return a}};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:s.WHITE},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"#D4D4D4"},children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>c("/driver-dashboard"),className:"p-2",children:e.jsx(C,{className:"h-6 w-6",style:{color:s.TEXT}})}),e.jsx("h1",{className:"text-xl font-bold",style:{color:s.TEXT},children:"Delivery Detail"}),e.jsx("div",{className:"w-10 flex items-center justify-center",children:d?e.jsxs(v,{className:"bg-green-500 hover:bg-green-600",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Live"})]}):e.jsxs(v,{className:"bg-gray-500 hover:bg-gray-600",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Offline"})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:S,alt:"Customer",className:"w-full h-full object-cover",style:{filter:"brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(2878%) hue-rotate(176deg) brightness(102%) contrast(97%)"}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-medium",style:{color:s.TEXT},children:t.customerName}),e.jsx("p",{className:"text-sm",style:{color:s.TEXT+"80"},children:t.customerPhone})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>x("chat"),className:"w-12 h-12 p-0 rounded-full border-2",style:{borderColor:s.PRIMARY,backgroundColor:s.PRIMARY},children:e.jsx(Y,{className:"h-6 w-6",style:{color:s.WHITE}})}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>x("call"),className:"w-12 h-12 p-0 rounded-full border-2",style:{borderColor:s.PRIMARY,backgroundColor:s.PRIMARY},children:e.jsx(V,{className:"h-6 w-6",style:{color:s.WHITE}})})]})]}),e.jsx("div",{className:"w-full h-px mb-6",style:{backgroundColor:"#D4D4D4"}}),e.jsx("div",{className:"mb-6",children:t.orderItems.map((a,r)=>e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center",style:{backgroundColor:s.PRIMARY},children:e.jsx("div",{className:"w-10 h-10",style:{background:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6v2h8c1.1 0 2-.9 2-2V9c0-.69-.28-1.32-.73-1.77zM12 10H6V6h6v4z'/%3E%3C/svg%3E")`,backgroundSize:"cover"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:s.ACTIVE},children:a.name}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsx("div",{className:"px-3 py-1 rounded border",style:{borderColor:s.PRIMARY,backgroundColor:s.WHITE},children:e.jsx("span",{className:"text-xs font-medium",style:{color:s.PRIMARY},children:a.quantity})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-semibold",style:{color:s.SECONDARY},children:["â‚¦",a.price.toLocaleString()]})})]})]})]},r))}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{className:"h-5 w-5",style:{color:s.PRIMARY}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xl font-medium",style:{color:s.TEXT},children:t.estimatedTime}),e.jsx(v,{className:"rounded-full px-3 py-1",style:{backgroundColor:`${m(t.status)}20`,color:m(t.status)},children:p(t.status)})]}),e.jsx("div",{className:"w-full h-1 rounded-full mt-2",style:{backgroundColor:"#D9D9D9"},children:e.jsx("div",{className:"h-1 rounded-full transition-all duration-500",style:{backgroundColor:m(t.status),width:t.status==="ASSIGNED"?"25%":t.status==="PICKED_UP"?"50%":t.status==="IN_TRANSIT"?"75%":t.status==="DELIVERED"?"100%":"0%"}})})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),e.jsx("div",{className:"w-px h-8 ml-2.5 border-l-2 border-dashed",style:{borderColor:s.PRIMARY}})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{className:"h-5 w-5",style:{color:s.PRIMARY}}),e.jsx("p",{className:"text-base font-medium",style:{color:s.TEXT},children:t.distance})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),e.jsx("div",{className:"w-px h-8 ml-2.5 border-l-2 border-dashed",style:{borderColor:s.PRIMARY}})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"h-5 w-5",style:{color:s.PRIMARY}}),e.jsx("p",{className:"text-base font-medium",style:{color:s.TEXT},children:t.deliveryAddress})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-full h-64 rounded-2xl border relative overflow-hidden",style:{borderColor:s.ACTIVE,backgroundImage:`url(${M})`,backgroundSize:"cover",backgroundPosition:"center"},children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10 rounded-2xl"})}),e.jsxs("div",{className:"relative -mt-16 mx-4 p-4 rounded-b-2xl flex items-center justify-center cursor-pointer",style:{backgroundColor:"rgba(255, 255, 255, 0.9)"},onClick:h,children:[e.jsx(k,{className:"h-5 w-5 mr-2",style:{color:s.ACTIVE}}),e.jsx("span",{className:"font-medium",style:{color:s.ACTIVE},children:"Start Navigation"})]})]}),t.specialInstructions&&e.jsx(D,{className:"mb-6 border rounded-2xl",style:{borderColor:"#FCD34D",backgroundColor:"#FFFBEB"},children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(P,{className:"h-5 w-5 mt-0.5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Special Instructions"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:t.specialInstructions})]})]})})}),e.jsx("div",{className:"space-y-3",children:e.jsx(f,{onClick:N,className:"w-full rounded-3xl py-4 font-normal text-base",style:{backgroundColor:s.PRIMARY,color:s.WHITE},children:"Report Issue"})})]})]})}function G(){return e.jsx(U,{children:e.jsx(X,{})})}export{G as default};
//# sourceMappingURL=delivery-detail-DKak5Ssz.js.map
