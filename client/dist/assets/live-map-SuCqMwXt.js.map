{"version":3,"file":"live-map-SuCqMwXt.js","sources":["../../src/components/ui/live-map.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { Card, CardContent } from './card';\nimport { Button } from './button';\nimport { Badge } from './badge';\nimport { MapPin, Navigation, Truck, Clock } from 'lucide-react';\n\ninterface Location {\n  latitude: number;\n  longitude: number;\n  address?: string;\n}\n\ninterface LiveMapProps {\n  driverLocation?: Location;\n  customerLocation?: Location;\n  merchantLocation?: Location;\n  orderId?: string;\n  className?: string;\n}\n\nexport default function LiveMap({\n  driverLocation,\n  customerLocation,\n  merchantLocation,\n  orderId,\n  className = ''\n}: LiveMapProps) {\n  const [mapCenter, setMapCenter] = useState({\n    latitude: driverLocation?.latitude || 6.5244,\n    longitude: driverLocation?.longitude || 3.3792\n  });\n\n  const calculateDistance = (point1: Location, point2: Location): number => {\n    const R = 6371; // Earth's radius in kilometers\n    const dLat = ((point2.latitude - point1.latitude) * Math.PI) / 180;\n    const dLon = ((point2.longitude - point1.longitude) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((point1.latitude * Math.PI) / 180) *\n        Math.cos((point2.latitude * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  const getEstimatedTime = (distance: number): string => {\n    const averageSpeed = 30; // km/h in city traffic\n    const timeInHours = distance / averageSpeed;\n    const timeInMinutes = Math.round(timeInHours * 60);\n    return `${timeInMinutes} min`;\n  };\n\n  useEffect(() => {\n    if (driverLocation) {\n      setMapCenter({\n        latitude: driverLocation.latitude,\n        longitude: driverLocation.longitude\n      });\n    }\n  }, [driverLocation]);\n\n  return (\n    <Card className={`overflow-hidden ${className}`}>\n      <CardContent className=\"p-0\">\n        {/* Status bar */}\n        <div className=\"flex items-center justify-between p-3 bg-blue-50 border-b\">\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"outline\" className=\"bg-green-100 text-green-700 border-green-300\">\n              Live Tracking\n            </Badge>\n            {orderId && (\n              <span className=\"text-sm text-gray-600\">Order #{orderId.slice(-6)}</span>\n            )}\n          </div>\n          <div className=\"flex items-center gap-1 text-sm text-blue-600\">\n            <Clock className=\"h-4 w-4\" />\n            <span>Real-time</span>\n          </div>\n        </div>\n\n        {/* Map container */}\n        <div className=\"relative h-64 bg-gradient-to-br from-blue-100 to-blue-200\">\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"text-center space-y-4 p-4\">\n              <div className=\"relative\">\n                <div className=\"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-2\">\n                  <Truck className=\"h-8 w-8 text-white\" />\n                </div>\n                <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full animate-pulse\"></div>\n              </div>\n              <div className=\"space-y-1\">\n                <div className=\"font-medium text-gray-800\">Driver Location</div>\n                <div className=\"text-sm text-gray-600\">\n                  {mapCenter.latitude.toFixed(4)}, {mapCenter.longitude.toFixed(4)}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Location markers */}\n          {driverLocation && (\n            <div className=\"absolute top-4 left-4\">\n              <div className=\"flex items-center gap-2 bg-white px-3 py-1 rounded-full shadow-sm\">\n                <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\n                <span className=\"text-sm font-medium\">Driver</span>\n              </div>\n            </div>\n          )}\n\n          {customerLocation && (\n            <div className=\"absolute top-4 right-4\">\n              <div className=\"flex items-center gap-2 bg-white px-3 py-1 rounded-full shadow-sm\">\n                <MapPin className=\"h-4 w-4 text-green-500\" />\n                <span className=\"text-sm font-medium\">Customer</span>\n              </div>\n            </div>\n          )}\n\n          {merchantLocation && (\n            <div className=\"absolute bottom-4 left-4\">\n              <div className=\"flex items-center gap-2 bg-white px-3 py-1 rounded-full shadow-sm\">\n                <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\n                <span className=\"text-sm font-medium\">Merchant</span>\n              </div>\n            </div>\n          )}\n\n          {/* Animated route line */}\n          {driverLocation && customerLocation && (\n            <svg className=\"absolute inset-0 w-full h-full pointer-events-none\">\n              <defs>\n                <linearGradient id=\"routeGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                  <stop offset=\"0%\" stopColor=\"#3B82F6\" stopOpacity=\"0.8\" />\n                  <stop offset=\"100%\" stopColor=\"#10B981\" stopOpacity=\"0.8\" />\n                </linearGradient>\n              </defs>\n              <path\n                d=\"M 50 50 Q 150 100 200 150\"\n                stroke=\"url(#routeGradient)\"\n                strokeWidth=\"3\"\n                fill=\"none\"\n                strokeDasharray=\"5,5\"\n                className=\"animate-pulse\"\n              />\n            </svg>\n          )}\n        </div>\n\n        {/* Map info bar */}\n        <div className=\"p-3 bg-white border-t\">\n          <div className=\"flex justify-between items-center text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <Navigation className=\"h-4 w-4 text-blue-500\" />\n              <span className=\"font-medium\">\n                {mapCenter.latitude.toFixed(4)}, {mapCenter.longitude.toFixed(4)}\n              </span>\n            </div>\n            {driverLocation && customerLocation && (\n              <div className=\"text-right\">\n                <div className=\"font-medium text-green-600\">\n                  {getEstimatedTime(calculateDistance(driverLocation, customerLocation))} away\n                </div>\n                <div className=\"text-xs text-gray-500\">\n                  {calculateDistance(driverLocation, customerLocation).toFixed(1)} km\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}"],"names":["LiveMap","driverLocation","customerLocation","merchantLocation","orderId","className","mapCenter","setMapCenter","useState","calculateDistance","point1","point2","dLat","dLon","a","getEstimatedTime","distance","timeInHours","useEffect","jsx","Card","jsxs","CardContent","Badge","Clock","Truck","MapPin","Navigation"],"mappings":"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"}