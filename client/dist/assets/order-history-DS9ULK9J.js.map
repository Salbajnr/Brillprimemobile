{"version":3,"file":"order-history-DS9ULK9J.js","sources":["../../src/pages/order-history.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  ArrowLeft, \n  MapPin, \n  Ruler,\n  Clock,\n  Package,\n  Fuel,\n  ShoppingCart,\n  Truck,\n  Wifi,\n  WifiOff\n} from \"lucide-react\";\nimport { useWebSocketOrders, useWebSocketNotifications } from \"@/hooks/use-websocket\";\nimport { ClientRole, MessageType } from \"../../../server/websocket\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport accountCircleIcon from \"../assets/images/account_circle.svg\";\n\n// Color constants\nconst COLORS = {\n  PRIMARY: \"#4682b4\",\n  SECONDARY: \"#0b1a51\", \n  ACTIVE: \"#010e42\",\n  TEXT: \"#131313\",\n  WHITE: \"#ffffff\"\n};\n\ninterface OrderHistoryItem {\n  id: string;\n  type: 'FUEL' | 'COMMODITY' | 'DELIVERY' | 'FOOD';\n  productName: string;\n  quantity: string;\n  price: number;\n  customerName?: string;\n  driverName?: string;\n  merchantName?: string;\n  pickupLocation: string;\n  deliveryLocation: string;\n  distance: string;\n  status: 'COMPLETED' | 'CANCELLED' | 'PENDING' | 'IN_PROGRESS';\n  date: string;\n  time: string;\n  profileImage?: string;\n}\n\n// Sample order history data for different user types\nconst getSampleOrderHistory = (userRole: string): OrderHistoryItem[] => {\n  if (userRole === 'CONSUMER') {\n    return [\n      {\n        id: '1',\n        type: 'FUEL',\n        productName: 'Petrol',\n        quantity: '20 litres',\n        price: 50000,\n        driverName: 'Mike Johnson',\n        pickupLocation: 'Shell Station, Bukuru',\n        deliveryLocation: 'Rayfield, Jos',\n        distance: '12km',\n        status: 'COMPLETED',\n        date: 'Friday, 13th November 2024',\n        time: '05:00pm'\n      },\n      {\n        id: '2',\n        type: 'COMMODITY',\n        productName: 'Rice (50kg)',\n        quantity: '2 bags',\n        price: 85000,\n        merchantName: 'Fatima Store',\n        pickupLocation: 'Market Square, Jos',\n        deliveryLocation: 'Angwan Rogo, Jos',\n        distance: '8km',\n        status: 'CANCELLED',\n        date: 'Thursday, 12th November 2024',\n        time: '02:30pm'\n      },\n      {\n        id: '3',\n        type: 'FOOD',\n        productName: 'Jollof Rice & Chicken',\n        quantity: '3 portions',\n        price: 15000,\n        merchantName: 'Mama Adanna Kitchen',\n        pickupLocation: 'Terminus Market',\n        deliveryLocation: 'University of Jos',\n        distance: '5km',\n        status: 'COMPLETED',\n        date: 'Wednesday, 11th November 2024',\n        time: '07:45pm'\n      }\n    ];\n  } else if (userRole === 'MERCHANT') {\n    return [\n      {\n        id: '1',\n        type: 'COMMODITY',\n        productName: 'Yam Tubers',\n        quantity: '10 pieces',\n        price: 25000,\n        customerName: 'Sarah Ibrahim',\n        driverName: 'David Yakubu',\n        pickupLocation: 'My Store, Jos Main Market',\n        deliveryLocation: 'Angwan Rukuba',\n        distance: '15km',\n        status: 'COMPLETED',\n        statusColor: 'text-green-600 bg-green-50',\n        date: 'Friday, 13th November 2024',\n        time: '11:30am'\n      },\n      {\n        id: '2',\n        type: 'FOOD',\n        productName: 'Pepper Soup',\n        quantity: '5 bowls',\n        price: 12500,\n        customerName: 'John Musa',\n        pickupLocation: 'My Restaurant',\n        deliveryLocation: 'Plateau University',\n        distance: '7km',\n        status: 'IN_PROGRESS',\n        statusColor: 'text-blue-600 bg-blue-50',\n        date: 'Friday, 13th November 2024',\n        time: '01:15pm'\n      },\n      {\n        id: '3',\n        type: 'COMMODITY',\n        productName: 'Palm Oil',\n        quantity: '5 litres',\n        price: 18000,\n        customerName: 'Grace Danjuma',\n        driverName: 'Ahmed Hassan',\n        pickupLocation: 'My Store',\n        deliveryLocation: 'Rayfield Estate',\n        distance: '9km',\n        status: 'CANCELLED',\n        statusColor: 'text-red-600 bg-red-50',\n        date: 'Thursday, 12th November 2024',\n        time: '04:20pm'\n      }\n    ];\n  } else if (userRole === 'DRIVER') {\n    return [\n      {\n        id: '1',\n        type: 'FUEL',\n        productName: 'Diesel',\n        quantity: '50 litres',\n        price: 75000,\n        customerName: 'Construction Co. Ltd',\n        pickupLocation: 'Total Station, Jos',\n        deliveryLocation: 'Construction Site, Vom',\n        distance: '25km',\n        status: 'COMPLETED',\n        date: 'Friday, 13th November 2024',\n        time: '09:00am'\n      },\n      {\n        id: '2',\n        type: 'DELIVERY',\n        productName: 'Electronics Package',\n        quantity: '1 package',\n        price: 5000,\n        customerName: 'Tech Solutions Ltd',\n        pickupLocation: 'Computer Village, Jos',\n        deliveryLocation: 'Government House',\n        distance: '18km',\n        status: 'COMPLETED',\n        date: 'Thursday, 12th November 2024',\n        time: '03:45pm'\n      },\n      {\n        id: '3',\n        type: 'COMMODITY',\n        productName: 'Fresh Vegetables',\n        quantity: '10 crates',\n        price: 8000,\n        customerName: 'Restaurant Chain',\n        pickupLocation: 'Vegetable Market',\n        deliveryLocation: 'Multiple Restaurants',\n        distance: '22km',\n        status: 'CANCELLED',\n        date: 'Wednesday, 11th November 2024',\n        time: '06:30am'\n      }\n    ];\n  }\n  return [];\n};\n\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'COMPLETED':\n      return {\n        bg: '#31D45D',\n        text: '#31D45D',\n        label: 'Completed'\n      };\n    case 'CANCELLED':\n      return {\n        bg: '#FF4141',\n        text: '#FF4141',\n        label: 'Cancelled'\n      };\n    case 'IN_PROGRESS':\n      return {\n        bg: '#FF8C00',\n        text: '#FF8C00',\n        label: 'In Progress'\n      };\n    case 'PENDING':\n      return {\n        bg: '#FFC107',\n        text: '#FFC107',\n        label: 'Pending'\n      };\n    default:\n      return {\n        bg: COLORS.PRIMARY,\n        text: COLORS.PRIMARY,\n        label: status\n      };\n  }\n};\n\nconst getProductIcon = (type: string) => {\n  switch (type) {\n    case 'FUEL':\n      return <Fuel className=\"h-5 w-5\" style={{ color: COLORS.PRIMARY }} />;\n    case 'COMMODITY':\n    case 'FOOD':\n      return <ShoppingCart className=\"h-5 w-5\" style={{ color: COLORS.PRIMARY }} />;\n    case 'DELIVERY':\n      return <Package className=\"h-5 w-5\" style={{ color: COLORS.PRIMARY }} />;\n    default:\n      return <Package className=\"h-5 w-5\" style={{ color: COLORS.PRIMARY }} />;\n  }\n};\n\nconst getPageTitle = (userRole: string) => {\n  if (userRole === 'DRIVER') return 'Pickup & Delivery History';\n  return 'Order History';\n};\n\nconst getReturnPath = (userRole: string) => {\n  switch (userRole) {\n    case 'CONSUMER':\n      return '/consumer-home';\n    case 'MERCHANT':\n      return '/merchant-dashboard';\n    case 'DRIVER':\n      return '/driver-dashboard';\n    default:\n      return '/dashboard';\n  }\n};\n\nexport default function OrderHistory() {\n  const { user } = useAuth();\n  const [, setLocation] = useLocation();\n\n  const userRole = user?.role || 'CONSUMER';\n  const [orderHistory, setOrderHistory] = useState(getSampleOrderHistory(userRole));\n  const pageTitle = getPageTitle(userRole);\n  const returnPath = getReturnPath(userRole);\n\n  // Initialize WebSocket hooks\n  const { \n    connected: ordersConnected, \n    orderUpdates, \n    connectionError: ordersError \n  } = useWebSocketOrders();\n\n  const { \n    connected: notificationsConnected, \n    notifications, \n    connectionError: notificationsError \n  } = useWebSocketNotifications();\n\n  const handleBackNavigation = () => {\n    setLocation(returnPath);\n  };\n\n  // Process real-time order updates\n  useEffect(() => {\n    if (Object.keys(orderUpdates).length > 0) {\n      // Update order history with real-time updates\n      setOrderHistory(prevOrders => {\n        return prevOrders.map(order => {\n          // If we have an update for this order\n          if (orderUpdates[order.id]) {\n            const update = orderUpdates[order.id];\n            return {\n              ...order,\n              status: update.status\n            };\n          }\n          return order;\n        });\n      });\n    }\n  }, [orderUpdates]);\n\n  // Process notifications related to orders\n  useEffect(() => {\n    if (notifications.length > 0) {\n      // Filter notifications related to orders\n      const orderNotifications = notifications.filter(\n        notification => notification.payload.type === 'ORDER_UPDATE'\n      );\n\n      if (orderNotifications.length > 0) {\n        // Process order notifications if needed\n        console.log('Received order notifications:', orderNotifications);\n      }\n    }\n  }, [notifications]);\n\n  // Fetch order history from API\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchOrderHistory = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await fetch('/api/orders', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n\n        if (data.success) {\n          setOrders(data.data || []);\n        } else {\n          throw new Error(data.message || 'Failed to fetch orders');\n        }\n      } catch (error) {\n        console.error('Error fetching order history:', error);\n        setError(error.message);\n        setOrders([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchOrderHistory();\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl mx-auto px-2 sm:px-4\">{/*Responsive container*/}\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-40\">\n        <div className=\"max-w-md mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <Button \n              onClick={handleBackNavigation}\n              variant=\"ghost\" \n              size=\"sm\"\n              className=\"p-2 rounded-full hover:bg-gray-100\"\n            >\n              <ArrowLeft className=\"h-6 w-6\" style={{ color: COLORS.TEXT }} />\n            </Button>\n            <h1 className=\"text-xl font-bold\" style={{ color: COLORS.TEXT }}>\n              {pageTitle}\n            </h1>\n            <div className=\"w-10 flex items-center justify-center\">\n              {ordersConnected ? (\n                <Badge className=\"bg-green-500 hover:bg-green-600\">\n                  <Wifi className=\"h-3 w-3 mr-1\" />\n                  <span className=\"text-xs\">Live</span>\n                </Badge>\n              ) : (\n                <Badge className=\"bg-gray-500 hover:bg-gray-600\">\n                  <WifiOff className=\"h-3 w-3 mr-1\" />\n                  <span className=\"text-xs\">Offline</span>\n                </Badge>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Order History List */}\n      <div className=\"max-w-md mx-auto p-5 space-y-4\">\n        {loading && <p>Loading orders...</p>}\n        {error && <p className=\"text-red-500\">Error: {error}</p>}\n        {orders.length === 0 && !loading && !error ? (\n          <Card className=\"rounded-3xl border\" style={{ borderColor: COLORS.PRIMARY }}>\n            <CardContent className=\"text-center py-16\">\n              <div className=\"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mx-auto mb-6 flex items-center justify-center\">\n                <Clock className=\"h-10 w-10 text-gray-400\" />\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">No Order History</h3>\n              <p className=\"text-gray-500 mb-6\">\n                {userRole === 'DRIVER' \n                  ? 'Complete your first delivery to see history here' \n                  : 'Place your first order to see history here'\n                }\n              </p>\n              <Button \n                onClick={handleBackNavigation}\n                className=\"rounded-full\"\n                style={{ \n                  backgroundColor: COLORS.PRIMARY,\n                  color: COLORS.WHITE\n                }}\n              >\n                {userRole === 'DRIVER' ? 'View Available Orders' : 'Start Shopping'}\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          orders.map((order) => {\n            const statusConfig = getStatusColor(order.status);\n\n            return (\n              <Card \n                key={order.id}\n                className=\"rounded-3xl border shadow-lg cursor-pointer hover:shadow-xl transition-shadow\"\n                style={{ borderColor: COLORS.PRIMARY }}\n                onClick={() => setLocation(`/order-history-detail?status=${order.status}`)}\n              >\n                <CardContent className=\"p-6\">\n                  {/* Header with profile and price */}\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"w-12 h-12 rounded-full overflow-hidden border-2\" style={{ borderColor: COLORS.PRIMARY }}>\n                        <img \n                          src={order.profileImage || accountCircleIcon} \n                          alt=\"Profile\" \n                          className=\"w-full h-full object-cover\"\n                          style={{ filter: `brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(2878%) hue-rotate(176deg) brightness(102%) contrast(97%)` }}\n                        />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-600\">\n                          {userRole === 'CONSUMER' && (order.driverName || order.merchantName)}\n                          {userRole === 'MERCHANT' && order.customerName}\n                          {userRole === 'DRIVER' && order.customerName}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"text-lg font-semibold\" style={{ color: COLORS.SECONDARY }}>\n                        â‚¦{order.price.toLocaleString()}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Product Details */}\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      {getProductIcon(order.type)}\n                      <h3 className=\"text-xl font-semibold\" style={{ color: COLORS.ACTIVE }}>\n                        {order.productName}\n                      </h3>\n                    </div>\n\n                    <Badge \n                      variant=\"outline\"\n                      className=\"px-3 py-1 rounded-lg border text-xs font-medium\"\n                      style={{ \n                        borderColor: COLORS.PRIMARY,\n                        color: COLORS.PRIMARY,\n                        backgroundColor: 'transparent'\n                      }}\n                    >\n                      {order.quantity}\n                    </Badge>\n                  </div>\n\n                  {/* Divider */}\n                  <div className=\"w-full h-px mb-6 bg-gray-300\"></div>\n\n                  {/* Route Information */}\n                  <div className=\"space-y-4 mb-6\">\n                    {/* Pickup Location */}\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"flex items-center justify-center\">\n                        <div \n                          className=\"w-5 h-5 rounded-full border-2 flex items-center justify-center\"\n                          style={{ borderColor: COLORS.PRIMARY }}\n                        >\n                          <div \n                            className=\"w-2.5 h-2.5 rounded-full\"\n                            style={{ backgroundColor: COLORS.ACTIVE }}\n                          ></div>\n                        </div>\n                      </div>\n                      <p className=\"text-base font-medium\" style={{ color: COLORS.ACTIVE }}>\n                        {order.pickupLocation}\n                      </p>\n                    </div>\n\n                    {/* Dotted connector lines */}\n                    <div className=\"flex items-center\">\n                      <div className=\"w-5 h-5 flex-shrink-0\"></div>\n                      <div \n                        className=\"w-px h-8 ml-2.5 border-l-2 border-dashed\" \n                        style={{ borderColor: COLORS.PRIMARY }}\n                      ></div>\n                    </div>\n\n                    {/* Distance */}\n                    <div className=\"flex items-center space-x-3\">\n                      <Ruler className=\"h-5 w-5\" style={{ color: COLORS.PRIMARY }} />\n                      <p className=\"text-base font-medium\" style={{ color: COLORS.TEXT }}>\n                        {order.distance}\n                      </p>\n                    </div>\n\n                    {/* Dotted connector lines */}\n                    <div className=\"flex items-center\">\n                      <div className=\"w-5 h-5 flex-shrink-0\"></div>\n                      <div \n                        className=\"w-px h-8 ml-2.5 border-l-2 border-dashed\" \n                        style={{ borderColor: COLORS.PRIMARY }}\n                      ></div>\n                    </div>\n\n                    {/* Delivery Location */}\n                    <div className=\"flex items-center space-x-3\">\n                      <MapPin className=\"h-5 w-5\" style={{ color: COLORS.PRIMARY }} />\n                      <p className=\"text-base font-medium\" style={{ color: COLORS.ACTIVE }}>\n                        {order.deliveryLocation}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Status and Date */}\n                  <div className=\"flex items-center justify-between\">\n                    <Badge \n                      className=\"px-3 py-1 rounded-lg text-xs font-medium border\"\n                      style={{ \n                        borderColor: statusConfig.bg,\n                        color: statusConfig.text,\n                        backgroundColor: 'transparent'\n                      }}\n                    >\n                      {statusConfig.label}\n                    </Badge>\n\n                    <div className=\"text-right\">\n                      <p className=\"text-xs font-light\" style={{ color: COLORS.ACTIVE }}>\n                        {order.date}\n                      </p>\n                      <p className=\"text-xs font-light\" style={{ color: COLORS.ACTIVE }}>\n                        {order.time}\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}"],"names":["COLORS","getSampleOrderHistory","userRole","getStatusColor","status","getProductIcon","type","jsx","Fuel","ShoppingCart","Package","getPageTitle","getReturnPath","OrderHistory","user","useAuth","setLocation","useLocation","orderHistory","setOrderHistory","useState","pageTitle","returnPath","ordersConnected","orderUpdates","useWebSocketOrders","notifications","useWebSocketNotifications","handleBackNavigation","useEffect","prevOrders","order","update","orderNotifications","notification","orders","setOrders","loading","setLoading","error","setError","response","data","jsxs","Button","ArrowLeft","Badge","Wifi","WifiOff","Card","CardContent","Clock","statusConfig","accountCircleIcon","Ruler","MapPin"],"mappings":"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"}