import{u as g,r as c,j as e,B as d,A as y,m,n as x,I as w,a6 as v,a1 as C}from"./index-CVqmz7v7.js";import{L as A}from"./label-FpSljPAT.js";import{v as P}from"./visa_card_logo-BnxB165C.js";import{P as S}from"./plus-CPiTij5A.js";const L=[1e3,2500,5e3,1e4,25e3,5e4];function $(){const[,o]=g(),[n,u]=c.useState(null),[r,h]=c.useState(""),[a,f]=c.useState(null),[F,b]=c.useState(!1),j=[{id:"card1",type:"Mastercard",number:"**** **** **** 4532",logo:v},{id:"card2",type:"Visa",number:"**** **** **** 8901",logo:P}],l=s=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(s),i=()=>r?parseInt(r):n||0,p=async()=>{const s=i();if(s>0&&a)try{b(!0);const t=await fetch("/api/wallet/fund",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:s,paymentMethod:a,reference:`fund_${Date.now()}`})}),N=await t.json();if(t.ok)alert(`Wallet funding initiated! Amount: ${l(s)}`),o("/wallet-fund/callback?status=success&amount="+s);else throw new Error(N.message||"Payment initialization failed")}catch(t){console.error("Payment error:",t),alert(t.message||"Payment failed. Please try again.")}finally{b(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl mx-auto px-2 sm:px-4",children:[e.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>o("/consumer-home"),children:e.jsx(y,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-[#131313]",children:"Add Money"})]})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(m,{children:e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-[#131313] mb-4",children:"Select Amount"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:L.map(s=>e.jsx(d,{variant:n===s?"default":"outline",className:`h-12 ${n===s?"bg-[#4682b4] text-white":"border-[#4682b4] text-[#4682b4] hover:bg-[#4682b4]/10"}`,onClick:()=>{u(s),h("")},children:l(s)},s))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"custom-amount",className:"text-sm font-medium",children:"Or enter custom amount"}),e.jsx(w,{id:"custom-amount",type:"number",placeholder:"Enter amount",value:r,onChange:s=>{h(s.target.value),u(null)},className:"border-[#4682b4]/30 focus:border-[#4682b4]"})]})]})}),e.jsx(m,{children:e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-[#131313] mb-4",children:"Payment Method"}),e.jsxs("div",{className:"space-y-3",children:[j.map(s=>e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${a===s.id?"border-[#4682b4] bg-[#4682b4]/5":"border-gray-200 hover:border-[#4682b4]/50"}`,onClick:()=>f(s.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.logo,alt:s.type,className:"w-8 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[#131313]",children:s.type}),e.jsx("p",{className:"text-sm text-gray-600",children:s.number})]})]}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${a===s.id?"border-[#4682b4] bg-[#4682b4]":"border-gray-300"}`,children:a===s.id&&e.jsx("div",{className:"w-full h-full rounded-full bg-white transform scale-50"})})]})},s.id)),e.jsxs(d,{variant:"outline",className:"w-full h-16 border-dashed border-[#4682b4] text-[#4682b4] hover:bg-[#4682b4]/10",onClick:()=>o("/payment-methods/add"),children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Add New Card"]})]})]})}),(n||r)&&e.jsx(m,{children:e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-[#131313] mb-4",children:"Transaction Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount"}),e.jsx("span",{className:"font-medium",children:l(i())})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Transaction Fee"}),e.jsx("span",{className:"font-medium",children:"â‚¦0.00"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-[#4682b4]",children:l(i())})]})]})]})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t",children:e.jsxs(d,{className:"w-full h-12 bg-[#4682b4] hover:bg-[#0b1a51]",onClick:p,disabled:!i()||!a,children:[e.jsx(C,{className:"w-5 h-5 mr-2"}),"Fund Wallet"]})})]})}export{$ as default};
//# sourceMappingURL=wallet-fund-D4hTaRMM.js.map
