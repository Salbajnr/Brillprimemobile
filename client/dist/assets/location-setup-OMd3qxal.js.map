{"version":3,"file":"location-setup-OMd3qxal.js","sources":["../../src/assets/images/globe_img.png","../../src/pages/location-setup.tsx"],"sourcesContent":["export default \"__VITE_ASSET__DxaXO6VN__\"","import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { MapPin, Navigation, ArrowLeft } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport logo from \"../assets/images/logo.png\";\nimport globeIcon from \"../assets/images/globe_img.png\";\nimport mapBackground from \"../assets/images/map_background.png\";\n\ninterface LocationData {\n  latitude: number;\n  longitude: number;\n  address: string;\n  isAutomatic: boolean;\n}\n\nexport default function LocationSetup() {\n  const [, setLocation] = useLocation();\n  const [isLoading, setIsLoading] = useState(false);\n  const [manualAddress, setManualAddress] = useState(\"\");\n  const [showManualInput, setShowManualInput] = useState(false);\n\n  const handleAutomaticLocation = async () => {\n    setIsLoading(true);\n    \n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const locationData: LocationData = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            address: await reverseGeocode(position.coords.latitude, position.coords.longitude),\n            isAutomatic: true\n          };\n          \n          localStorage.setItem(\"userLocation\", JSON.stringify(locationData));\n          setIsLoading(false);\n          setLocation(\"/map-home\");\n        },\n        (error) => {\n          console.error(\"Error getting location:\", error);\n          setIsLoading(false);\n          setShowManualInput(true);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 60000\n        }\n      );\n    } else {\n      setIsLoading(false);\n      setShowManualInput(true);\n    }\n  };\n\n  const handleManualLocation = () => {\n    if (manualAddress.trim()) {\n      const locationData: LocationData = {\n        latitude: 9.0765, // Default Abuja coordinates\n        longitude: 7.3986,\n        address: manualAddress,\n        isAutomatic: false\n      };\n      \n      localStorage.setItem(\"userLocation\", JSON.stringify(locationData));\n      setLocation(\"/map-home\");\n    }\n  };\n\n  const handleSetLater = () => {\n    // Set default location and proceed\n    const locationData: LocationData = {\n      latitude: 9.0765, // Abuja coordinates\n      longitude: 7.3986,\n      address: \"Abuja, Nigeria\",\n      isAutomatic: false\n    };\n    \n    localStorage.setItem(\"userLocation\", JSON.stringify(locationData));\n    setLocation(\"/map-home\");\n  };\n\n  // Mock reverse geocoding - would use real service in production\n  const reverseGeocode = async (lat: number, lng: number): Promise<string> => {\n    // Simulate API call delay\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    // Mock address based on coordinates\n    if (lat > 9 && lat < 10 && lng > 7 && lng < 8) {\n      return \"Wuse II, Abuja, Nigeria\";\n    } else if (lat > 6 && lat < 7 && lng > 3 && lng < 4) {\n      return \"Victoria Island, Lagos, Nigeria\";\n    } else {\n      return `${lat.toFixed(4)}, ${lng.toFixed(4)}`;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-100 to-green-100 relative\">\n      {/* Map Background Pattern */}\n      <div className=\"absolute inset-0 opacity-20\">\n        <div className=\"grid grid-cols-8 grid-rows-12 h-full w-full\">\n          {Array.from({ length: 96 }).map((_, i) => (\n            <div key={i} className=\"border border-gray-300\"></div>\n          ))}\n        </div>\n      </div>\n\n      {/* Header */}\n      <div className=\"relative z-10 bg-white/95 backdrop-blur-sm shadow-sm\">\n        <div className=\"flex items-center justify-between p-4\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/onboarding\")}\n          >\n            <ArrowLeft className=\"w-5 h-5\" />\n          </Button>\n          \n          <div className=\"flex items-center space-x-2\">\n            <img src={logo} alt=\"Brillprime\" className=\"w-8 h-8\" />\n            <span className=\"font-semibold text-[#131313]\">Location Setup</span>\n          </div>\n          \n          <div className=\"w-10\" /> {/* Spacer */}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div \n        className=\"relative z-10 flex items-center justify-center min-h-[80vh] p-4 pt-20\"\n        style={{\n          backgroundImage: `url(${mapBackground})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat'\n        }}\n      >\n        {/* Background overlay for better text readability - gradient from transparent to semi-opaque */}\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-white/40 to-white/80\"></div>\n        <div className=\"relative z-10 w-full max-w-lg space-y-4\">\n          {/* Location Icon */}\n          <div className=\"text-center mb-4\">\n            <div className=\"w-20 h-20 bg-[#4682b4] rounded-full flex items-center justify-center mx-auto mb-3 shadow-xl overflow-hidden\">\n              <img src={globeIcon} alt=\"Globe\" className=\"w-14 h-14\" />\n            </div>\n            <h1 className=\"text-xl font-bold text-[#131313] mb-2\">\n              Where are you?\n            </h1>\n            <p className=\"text-gray-600 text-sm\">\n              We need your location to find nearby fuel stations and provide accurate delivery services\n            </p>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"space-y-3\">\n            <Button\n              onClick={handleAutomaticLocation}\n              disabled={isLoading}\n              className=\"w-full h-12 bg-[#4682b4] hover:bg-[#0b1a51] text-white rounded-xl shadow-lg\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <Navigation className=\"w-6 h-6\" />\n                <div className=\"text-left\">\n                  <div className=\"font-semibold\">\n                    {isLoading ? \"Getting Location...\" : \"Set Automatically\"}\n                  </div>\n                  <div className=\"text-sm opacity-90\">Use GPS location</div>\n                </div>\n              </div>\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowManualInput(!showManualInput)}\n              className=\"w-full h-12 border-[#4682b4] text-[#4682b4] hover:bg-[#4682b4]/10 rounded-xl shadow-lg\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <MapPin className=\"w-6 h-6\" />\n                <div className=\"text-left\">\n                  <div className=\"font-semibold\">Set Manually</div>\n                  <div className=\"text-sm opacity-75\">Enter address</div>\n                </div>\n              </div>\n            </Button>\n\n            {/* Manual Location Input */}\n            {showManualInput && (\n              <Card className=\"shadow-lg\">\n                <CardContent className=\"p-4\">\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"address\" className=\"text-sm font-medium text-[#131313]\">\n                        Enter your address\n                      </Label>\n                      <Input\n                        id=\"address\"\n                        placeholder=\"e.g., Wuse II, Abuja, Nigeria\"\n                        value={manualAddress}\n                        onChange={(e) => setManualAddress(e.target.value)}\n                        className=\"mt-2 border-[#4682b4]/30 focus:border-[#4682b4]\"\n                      />\n                    </div>\n                    <Button\n                      onClick={handleManualLocation}\n                      disabled={!manualAddress.trim()}\n                      className=\"w-full bg-[#4682b4] hover:bg-[#0b1a51]\"\n                    >\n                      Save Location\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            <Button\n              variant=\"ghost\"\n              onClick={handleSetLater}\n              className=\"w-full text-gray-600 hover:text-[#4682b4]\"\n            >\n              Set Later (Use Default: Abuja)\n            </Button>\n          </div>\n\n          {/* Benefits */}\n          <Card className=\"bg-white/95 backdrop-blur-sm shadow-lg\">\n            <CardContent className=\"p-4\">\n              <h3 className=\"font-semibold text-[#131313] mb-3\">Why we need location:</h3>\n              <ul className=\"space-y-2 text-sm text-gray-600\">\n                <li className=\"flex items-start space-x-2\">\n                  <span className=\"text-[#4682b4] mt-1\">•</span>\n                  <span>Find nearby fuel stations</span>\n                </li>\n                <li className=\"flex items-start space-x-2\">\n                  <span className=\"text-[#4682b4] mt-1\">•</span>\n                  <span>Calculate accurate delivery times</span>\n                </li>\n                <li className=\"flex items-start space-x-2\">\n                  <span className=\"text-[#4682b4] mt-1\">•</span>\n                  <span>Show relevant merchants and services</span>\n                </li>\n                <li className=\"flex items-start space-x-2\">\n                  <span className=\"text-[#4682b4] mt-1\">•</span>\n                  <span>Provide personalized recommendations</span>\n                </li>\n              </ul>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["globeIcon","LocationSetup","setLocation","useLocation","isLoading","setIsLoading","useState","manualAddress","setManualAddress","showManualInput","setShowManualInput","handleAutomaticLocation","position","locationData","reverseGeocode","error","handleManualLocation","handleSetLater","lat","lng","resolve","jsxs","jsx","_","i","Button","ArrowLeft","logo","mapBackground","Navigation","MapPin","Card","CardContent","Label","Input","e"],"mappings":"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"}