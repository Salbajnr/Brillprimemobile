import{c as q,r as y,a8 as E,e as m,f as A,j as e,g as h,G as T,B as o,a4 as M,m as t,s as n,t as i,U as F,n as l,v as O,a9 as H,T as P,o as _,p as x,q as p,E as N,a2 as z,aa as K,F as L,ab as V,ac as $,ad as Q,ae as J,af as W}from"./index-CPIh2kaR.js";import{a as C}from"./queryClient-CN8qbYBa.js";import{S as X,a as Y,b as Z,c as ee,d as v}from"./select-DaEbXPmH.js";import"./check-D6cbRviz.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=q("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);function re(){var b;const[S,D]=y.useState("overview"),[j,g]=y.useState(null),[R,u]=y.useState(!1),{toast:w}=E(),{data:s,refetch:B}=m({queryKey:["/api/admin/system-metrics"],refetchInterval:3e4}),{data:c}=m({queryKey:["/api/admin/escrow-overview"],refetchInterval:6e4}),{data:ae}=m({queryKey:["/api/admin/pending-verifications"],refetchInterval:3e4}),{data:f}=m({queryKey:["/api/admin/disputes"],refetchInterval:3e4}),{data:d}=m({queryKey:["/api/admin/analytics",{timeframe:"week"}],refetchInterval:3e5}),I=A({mutationFn:async a=>C("POST",`/api/admin/disputes/${a.disputeId}/resolve`),onSuccess:()=>{w({title:"Dispute resolved successfully"}),u(!1),g(null)}});A({mutationFn:async a=>C("POST","/api/admin/escrow/manual-action"),onSuccess:()=>{w({title:"Manual action completed successfully"})}});const r=a=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(a),k=a=>{const U=Math.floor(a/3600),G=Math.floor(a%3600/60);return`${U}h ${G}m`};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Control Center"}),e.jsx("p",{className:"text-gray-600",children:"Platform oversight and management dashboard"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(h,{variant:"outline",className:"px-3 py-1",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"System Online"]}),e.jsxs(o,{onClick:()=>B(),variant:"outline",size:"sm",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.platform.activeUsers.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.platform.onlineDrivers," drivers online"]})]})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Escrow Balance"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r(s.transactions.escrowBalance)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.transactions.pendingTransactions," pending"]})]})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Security Alerts"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.security.fraudAlerts}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.security.securityIncidents," incidents today"]})]})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"System Health"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.platform.serverHealth}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uptime: ",k(s.platform.systemUptime)]})]})]})]}),e.jsxs(P,{value:S,onValueChange:D,children:[e.jsxs(_,{className:"grid w-full grid-cols-6",children:[e.jsx(x,{value:"overview",children:"Overview"}),e.jsx(x,{value:"escrow",children:"Escrow"}),e.jsx(x,{value:"disputes",children:"Disputes"}),e.jsx(x,{value:"verifications",children:"Verifications"}),e.jsx(x,{value:"analytics",children:"Analytics"}),e.jsx(x,{value:"content",children:"Content"})]}),e.jsx(p,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Real-time Activity"}),e.jsx(N,{children:"Live platform monitoring"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Today's Transactions"}),e.jsx(h,{children:s==null?void 0:s.transactions.todayTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Active Merchants"}),e.jsx(h,{variant:"secondary",children:s==null?void 0:s.platform.activeMerchants})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Online Drivers"}),e.jsx(h,{variant:"outline",children:s==null?void 0:s.platform.onlineDrivers})]})]})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Quick Actions"}),e.jsx(N,{children:"Administrative controls"})]}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs(o,{className:"w-full justify-start",variant:"outline",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Send Platform Announcement"]}),e.jsxs(o,{className:"w-full justify-start",variant:"outline",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"System Maintenance Mode"]}),e.jsxs(o,{className:"w-full justify-start",variant:"outline",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Generate Reports"]})]})]})]})}),e.jsx(p,{value:"escrow",className:"space-y-6",children:c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(i,{children:"Total Escrow Balance"})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:r(c.totalBalance)}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[r(c.releasedToday)," released today"]})]})]}),e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(i,{children:"Pending Releases"})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:r(c.pendingReleases)}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[c.transactions.readyForRelease," ready for release"]})]})]}),e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(i,{children:"Disputed Amount"})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:r(c.disputedAmount)}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[c.transactions.disputed," active disputes"]})]})]})]})}),e.jsx(p,{value:"disputes",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Active Disputes"}),e.jsx(N,{children:"Disputes requiring admin resolution"})]}),e.jsx(l,{children:((b=f==null?void 0:f.disputes)==null?void 0:b.map(a=>e.jsx("div",{className:"border rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:a.disputeType.replace("_"," ").toUpperCase()}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsx(h,{variant:a.priority==="HIGH"?"destructive":"secondary",children:a.priority}),e.jsx("span",{className:"text-sm text-gray-500",children:r(a.transactionAmount)})]})]}),e.jsxs(o,{onClick:()=>{g(a),u(!0)},size:"sm",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Resolve"]})]})},a.id)))||e.jsx("p",{children:"No active disputes"})})]})}),e.jsx(p,{value:"analytics",className:"space-y-6",children:d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(i,{children:"Financial Analytics"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Revenue"}),e.jsx("span",{className:"font-semibold",children:r(d.analytics.financial.revenueGrowth)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Revenue Growth"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+",d.analytics.financial.revenueGrowth,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Escrow Turnover"}),e.jsxs("span",{className:"font-semibold",children:[d.analytics.financial.escrowTurnover," days"]})]})]})]}),e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(i,{children:"User Behavior"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Daily Active Users"}),e.jsx("span",{className:"font-semibold",children:d.analytics.userBehavior.dailyActiveUsers.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Conversion Rate"}),e.jsxs("span",{className:"font-semibold",children:[d.analytics.userBehavior.conversionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Retention Rate"}),e.jsxs("span",{className:"font-semibold",children:[d.analytics.userBehavior.retentionRate,"%"]})]})]})]})]})})]}),e.jsx(V,{open:R,onOpenChange:u,children:e.jsxs($,{className:"max-w-2xl",children:[e.jsx(Q,{children:e.jsx(J,{children:"Resolve Dispute"})}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Dispute Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:j.description}),e.jsxs("p",{className:"text-sm mt-2",children:["Amount: ",r(j.transactionAmount)]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Resolution"}),e.jsxs(X,{children:[e.jsx(Y,{children:e.jsx(Z,{placeholder:"Select resolution"})}),e.jsxs(ee,{children:[e.jsx(v,{value:"approve_customer",children:"Approve Customer"}),e.jsx(v,{value:"approve_merchant",children:"Approve Merchant"}),e.jsx(v,{value:"partial_refund",children:"Partial Refund"}),e.jsx(v,{value:"no_action",children:"No Action"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Admin Notes"}),e.jsx(W,{placeholder:"Enter resolution notes..."})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(o,{onClick:()=>I.mutate({disputeId:j.id,resolution:"approve_customer",adminNotes:"Resolved in favor of customer",evidenceReviewed:!0}),children:"Resolve Dispute"})]})]})]})]})})]})})}export{re as default};
//# sourceMappingURL=admin-control-center-C-6zuu4u.js.map
